# AHP App ê°œë°œì¼ì§€ â€” 2026-02-19

## ì„¸ì…˜ ê°œìš”
- **ì‘ì—… ì‹œê°„**: ì„¸ì…˜ ì§€ì† (ì „ì¼ ì»¨í…ìŠ¤íŠ¸ ì´ì–´ì„œ ì§„í–‰)
- **ë‹´ë‹¹ ëª¨ë¸**: Claude Sonnet 4.6
- **ì‘ì—… ë²”ìœ„**: ë°±ì—”ë“œ CI ì‹¤íŒ¨ ë””ë²„ê¹… ë° ìˆ˜ì •, ë°°í¬ ê²€ì¦, ESLint ìˆ˜ì •, alert() ì „ë©´ ì œê±° (55ê°œ íŒŒì¼)

---

## ì„¸ì…˜ ì‹œì‘ ì‹œì  ìƒíƒœ (ì»¨í…ìŠ¤íŠ¸ ì¬ê°œ)

ì „ì¼(2026-02-18) ì„¸ì…˜ì—ì„œ ë‹¤ìŒ ì‘ì—…ê¹Œì§€ ì™„ë£Œ:
- í”„ë¡ íŠ¸ì—”ë“œ 12ê°œ ì»¤ë°‹ (alert ì œê±°, URL ìˆ˜ì •, ì´ëª¨ì§€ ë¡œê·¸ ì œê±° ë“±)
- ë°±ì—”ë“œ exports/workshops ì•± ì‹ ê·œ êµ¬í˜„ (GitHub API ì§ì ‘ ì»¤ë°‹)
- `simple_urls.py` ì—…ë°ì´íŠ¸: exports, workshops ë“±ë¡

**ì„¸ì…˜ ì¬ê°œ ì‹œ ì˜¤ë¥˜ ìƒí™©:**
- ë°±ì—”ë“œ CI ì‹¤íŒ¨ (#32, #33 ëª¨ë‘ failure)
- Render.com ë°°í¬ë„ ì‹¤íŒ¨
- ì‚¬ìš©ì ë³´ê³ : "2ê°œë„ ì—ëŸ¬ì•¼", "render.comì—ì„œë„ ì—ëŸ¬ì•¼"

---

## ì™„ë£Œëœ ì‘ì—…

### 1. ë°±ì—”ë“œ CI ì‹¤íŒ¨ ì›ì¸ ë¶„ì„ ë° ìˆ˜ì •

#### ê·¼ë³¸ ì›ì¸ íŒŒì•…
ë°±ì—”ë“œ CI ì‹¤íŒ¨ ì›ì¸ 2ê°€ì§€:

**ì›ì¸ 1**: `apps.exports`ì™€ `apps.workshops`ê°€ `INSTALLED_APPS`ì— ë¯¸ë“±ë¡
- `simple_urls.py`ì— URL í¬í•¨ ì¶”ê°€ â†’ Django startup `manage.py check` ì‹¤íŒ¨
- `python manage.py check --deploy` ì—ì„œ ì•± ì„í¬íŠ¸ ì˜¤ë¥˜ ë°œìƒ

**ì›ì¸ 2**: ë‘ ì•± ëª¨ë‘ `migrations/` ë””ë ‰í„°ë¦¬ ë¯¸ì¡´ì¬
- ëª¨ë¸ì´ ìˆëŠ” ì•±ì€ ë°˜ë“œì‹œ `migrations/__init__.py` + `0001_initial.py` í•„ìš”

#### ìˆ˜ì • ë‚´ì—­

**íŒŒì¼ 1: `ahp_backend/settings.py`** (commit `9a6710f3`)
```python
LOCAL_APPS = [
    'apps.accounts',
    'apps.projects',
    'apps.evaluations',
    'apps.analysis',
    'apps.subscriptions',
    'apps.exports',      # ì‹ ê·œ ì¶”ê°€
    'apps.workshops',    # ì‹ ê·œ ì¶”ê°€
]
```

**íŒŒì¼ 2-5: migrations ë””ë ‰í„°ë¦¬ ìƒì„±** (commit `75473c26` ~ `569f1556`)
- `apps/exports/migrations/__init__.py`
- `apps/exports/migrations/0001_initial.py` â€” ExportTemplate, ExportHistory, ReportSchedule í…Œì´ë¸”
- `apps/workshops/migrations/__init__.py`
- `apps/workshops/migrations/0001_initial.py` â€” WorkshopSession, WorkshopParticipant, RealTimeProgress, GroupConsensusResult, SurveyTemplate, SurveyResponse í…Œì´ë¸”

#### ì˜ì¡´ì„± ì„¤ì •
```python
# exports/0001_initial.py
dependencies = [
    migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ('projects', '0001_initial'),
]

# workshops/0001_initial.py
dependencies = [
    migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ('projects', '0001_initial'),
]
```

### 2. ë°±ì—”ë“œ CI ê²€ì¦

ìˆ˜ì • í›„ ë°±ì—”ë“œ CI ê²°ê³¼:

| Run # | Status | Commit |
|-------|--------|--------|
| #34 | âœ… success | 9a6710f3 (settings.py INSTALLED_APPS ìˆ˜ì •) |
| #35 | âœ… success | 75473c26 (migrations __init__ ìƒì„±) |
| #36 | âœ… success | 0d7bbf41 (migrations __init__ ìƒì„±) |
| #37 | âœ… success | 6abdf6c4 (0001_initial.py ìƒì„±) |
| #38 | âœ… success | 569f1556 (0001_initial.py ìƒì„±) |

**ëª¨ë“  CI í†µê³¼ ì™„ë£Œ âœ…**

### 3. í”„ë¡ íŠ¸ì—”ë“œ GitHub Pages ë°°í¬ ìƒíƒœ ì ê²€

| ì›Œí¬í”Œë¡œìš° | ìµœì‹  Run | ê²°ê³¼ | ë¹„ê³  |
|----------|---------|------|------|
| CI Pipeline | #81 | âœ… success | ë¹Œë“œ ì •ìƒ |
| Deploy to GitHub Pages | #87 | âŒ failure | "Setup Pages" ë‹¨ê³„ ì‹¤íŒ¨ |
| pages build and deployment | #88 | âŒ failure | #87 ì‹¤íŒ¨ë¡œ ì¸í•œ ì—°ì‡„ ì‹¤íŒ¨ |

**ë¶„ì„**:
- ë¹Œë“œ ìì²´ëŠ” ì„±ê³µ (`Build Application` job í†µê³¼)
- `Deploy` jobì˜ `Setup Pages` ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨
- ì´ì „ ì»¤ë°‹(08e5e38)ì—ì„œëŠ” ë°°í¬ ì„±ê³µí–ˆìœ¼ë‚˜ dev log ì»¤ë°‹(f4135c2) ì´í›„ ì‹¤íŒ¨
- ì½”ë“œ ë¬¸ì œê°€ ì•„ë‹Œ GitHub Pages ì¸í”„ë¼ ì¼ì‹œì  ë¬¸ì œë¡œ íŒë‹¨
- ë¡œì»¬ ë¹Œë“œ í…ŒìŠ¤íŠ¸: `npm run build` ì •ìƒ ì™„ë£Œ âœ…

### 4. connectionTest.ts ESLint ìˆ˜ì •

**ì˜¤ë¥˜**: `no-whitespace-before-property` (ë¹Œë“œ ê²½ê³ )
```typescript
// ìˆ˜ì • ì „ (ê²½ê³  ë°œìƒ)
console.log('=' .repeat(50));  // line 291, 308

// ìˆ˜ì • í›„
console.log('='.repeat(50));
```

**íŒŒì¼**: `src/utils/connectionTest.ts` (lines 291, 308)

---

## ì™„ë£Œëœ ì‘ì—… (ì„¸ì…˜ 2ë¶€)

### 5. alert() ì „ë©´ ì œê±° â€” 55ê°œ íŒŒì¼

ì „ì¼ ì„¸ì…˜ì—ì„œ 28ê°œ íŒŒì¼ ì™„ë£Œ í›„, 56ê°œ íŒŒì¼ì´ ì¶”ê°€ë¡œ ë‚¨ì•„ìˆëŠ” ê²ƒì„ í™•ì¸.
ì´ **55ê°œ ì»´í¬ë„ŒíŠ¸** íŒŒì¼ì—ì„œ `alert()` í˜¸ì¶œ ì™„ì „ ì œê±°.

#### ì²˜ë¦¬ ì „ëµ

| êµ¬ë¶„ | ì²˜ë¦¬ ë°©ë²• |
|------|----------|
| í”„ë¡œë•ì…˜ UI ì»´í¬ë„ŒíŠ¸ | `actionMessage` ìƒíƒœ + `showActionMessage()` í—¬í¼ + í† ìŠ¤íŠ¸ ë°°ë„ˆ JSX |
| ë°ëª¨/í…ŒìŠ¤íŠ¸ íŒŒì¼ | `console.log()` ë˜ëŠ” `console.warn()` ëŒ€ì²´ |
| ì£¼ì„ ì²˜ë¦¬ëœ alert | ë³€ê²½ ì—†ìŒ |
| XSS í…ŒìŠ¤íŠ¸ ë¬¸ìì—´ (`security.test.ts`) | ë³€ê²½ ì—†ìŒ (í•¨ìˆ˜ í˜¸ì¶œ ì•„ë‹˜) |

#### í† ìŠ¤íŠ¸ ë°°ë„ˆ íŒ¨í„´
```tsx
const [actionMessage, setActionMessage] = useState<{type:'success'|'error'|'info', text:string}|null>(null);

const showActionMessage = (type: 'success'|'error'|'info', text: string) => {
  setActionMessage({type, text});
  setTimeout(() => setActionMessage(null), 3000);
};

// JSX (return divì˜ ì²« ë²ˆì§¸ ìì‹):
{actionMessage && (
  <div className={`fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm font-medium shadow-lg ${
    actionMessage.type === 'success' ? 'bg-green-100 text-green-800' :
    actionMessage.type === 'info' ? 'bg-blue-100 text-blue-800' :
    'bg-red-100 text-red-800'
  }`}>
    {actionMessage.text}
  </div>
)}
```

#### ì²˜ë¦¬ëœ íŒŒì¼ ëª©ë¡ (55ê°œ)

**admin í´ë” (17ê°œ)**
- AlternativeManagement.tsx, CriteriaManagement.tsx, EnhancedEvaluatorManagement.tsx
- EvaluatorAssignment.tsx, EvaluatorManagement.tsx, GroupWeightAnalysis.tsx
- ModelBuilderWorkflow.tsx, ModelConfiguration.tsx, MyProjects.tsx
- PersonalServiceDashboard.tsx, ProjectCompletion.tsx, SensitivityAnalysis.tsx
- SurveyLinkManager.tsx, TrashBin.tsx, TrashBinTest.tsx
- UsageManagement.tsx, UserManagement.tsx
- `ai-management/AISettingsManager.tsx`

**AI/ë¶„ì„ í´ë” (6ê°œ)**
- `ai-interpretation/AIResultsInterpretationPage.tsx`
- `ai-materials/AIMaterialsGenerationPage.tsx`
- `ai-paper/AIPaperGenerationPage.tsx`
- `ai-quality/AIQualityValidationPage.tsx`
- `analysis/ResultsAnalysis.tsx`
- `analysis/advanced/ComprehensiveReport.tsx`

**í‰ê°€/ê¸°ì¤€ í´ë” (7ê°œ)**
- `comparison/PairwiseComparison.tsx`
- `criteria/BulkCriteriaInput.tsx`
- `criteria/InteractiveCriteriaEditor.tsx`
- `evaluation/DirectInputEvaluation.tsx`, `EvaluationTest.tsx`, `MultiModeEvaluation.tsx`
- `evaluation/assignment/InvitationHistory.tsx`, `InviteEvaluators.tsx`

**superadmin í´ë” (4ê°œ)**
- AllProjectsManagement.tsx, RoleSwitcher.tsx, SystemReset.tsx, SystemSettings.tsx

**ê¸°íƒ€ (21ê°œ)**
- `auth/SecureLoginForm.tsx`
- `common/ServerWarningBadge.tsx`, `TrashOverflowModal.tsx`
- `decision/DecisionSupportSystem.tsx`
- `demo/ComponentShowcase.tsx`, `EventSequenceDemo.tsx`
- `evaluator/ProjectSelection.tsx`
- `modeling/ModelBuilder.tsx`
- `notifications/EmailNotificationSystem.tsx`
- `paper/PaperManagement.tsx`
- `project/EnhancedProjectCreationWizard.tsx`
- `settings/AIConfiguration.tsx`, `PersonalSettings.tsx`
- `subscription/SubscriptionDashboard.tsx`
- `survey/EvaluatorSurveyPage.tsx`, `SurveyFormBuilder.tsx`, `SurveyManagementSystem.tsx`
- `workshop/ParticipantManager.tsx`
- `App.tsx`

#### ìµœì¢… ê²€ì¦
```
Grep alert() ê²°ê³¼:
- CriteriaManagement.tsx:527 â†’ ì£¼ì„ ì²˜ë¦¬ëœ ì¤„ (// alert(...))
- security.test.ts â†’ XSS í…ŒìŠ¤íŠ¸ ë¬¸ìì—´ (í•¨ìˆ˜ í˜¸ì¶œ ì•„ë‹˜)
âœ… ì‹¤ì œ alert() í•¨ìˆ˜ í˜¸ì¶œ 0ê°œ ë‚¨ìŒ
```

#### ë¡œì»¬ ë¹Œë“œ ê²°ê³¼
```
âœ… Compiled with warnings (errors ì—†ìŒ)
ë²ˆë“¤: 581.61 kB gzip
```

---

## ì»¤ë°‹ ë‚´ì—­

### í”„ë¡ íŠ¸ì—”ë“œ (aebonlee/ahp_app)
| ì»¤ë°‹ í•´ì‹œ | ë‚´ìš© |
|-----------|------|
| `c17fbab` | fix: remove whitespace before .repeat in connectionTest.ts + add 2026-02-19 dev log |
| `f85df06` | fix: replace all alert() calls with inline toast notifications across 55 components |

### ë°±ì—”ë“œ (aebonlee/ahp-django-service)
| ì»¤ë°‹ í•´ì‹œ | ë‚´ìš© |
|-----------|------|
| `9a6710f3` | fix: add exports and workshops to INSTALLED_APPS |
| `75473c26` | feat: add initial migrations for exports and workshops apps |
| `0d7bbf41` | feat: add initial migrations for exports and workshops apps |
| `6abdf6c4` | feat: add initial migrations for exports and workshops apps |
| `569f1556` | feat: add initial migrations for exports and workshops apps |

---

## ì™„ë£Œëœ ì‘ì—… (ì„¸ì…˜ 3ë¶€)

### 6. projects ì—”ë“œí¬ì¸íŠ¸ ì¸ì¦ ê°•í™”

**íŒŒì¼**: `apps/projects/views.py` (ì»¤ë°‹ `a47c40c`)

#### ìˆ˜ì • ë‚´ì—­

| í•­ëª© | ë³€ê²½ ì „ | ë³€ê²½ í›„ |
|------|---------|---------|
| `ProjectViewSet.authentication_classes` | `[]` (ë¹„ì–´ìˆìŒ) | ì œê±° (DRF ê¸°ë³¸ê°’ ì‚¬ìš©) |
| `ProjectViewSet.permission_classes` | `[AllowAny]` | `[IsAuthenticated]` |
| `ProjectViewSet.get_permissions()` | í•­ìƒ `AllowAny()` ë°˜í™˜ | **ì œê±°** |
| `ProjectViewSet.get_queryset()` ìµëª… ë¶„ê¸° | ëª¨ë“  í”„ë¡œì íŠ¸ ë°˜í™˜ (ë³´ì•ˆ ê²°í•¨) | **ì œê±°** |
| `CriteriaViewSet.authentication_classes` | `[]` (ë¹„ì–´ìˆìŒ) | ì œê±° |
| `CriteriaViewSet.permission_classes` | `[AllowAny]` | `[IsAuthenticated]` |
| `CriteriaViewSet.get_queryset()` | ëª¨ë“  criteria ë°˜í™˜ | ì ‘ê·¼ ê°€ëŠ¥í•œ í”„ë¡œì íŠ¸ì˜ criteriaë§Œ ë°˜í™˜ |
| `timezone` import | ëˆ„ë½ (soft_deleteì—ì„œ ì‚¬ìš© ì¤‘) | **ì¶”ê°€** |

**ê²°ê³¼**: ë¯¸ì¸ì¦ ì‚¬ìš©ì `/api/service/projects/projects/` ì ‘ê·¼ ì‹œ 401 ë°˜í™˜

---

### 7. Render.com ë°°í¬ ì‹¤íŒ¨ ë””ë²„ê¹… ë° ìˆ˜ì •

#### ë¬¸ì œ ìƒí™©
`a47c40c` ì»¤ë°‹ ì´í›„ Render.com ë¹Œë“œ ì‹¤íŒ¨:
```
django.db.utils.ProgrammingError: relation "survey_responses" already exists
```

**ì›ì¸**: Render DBì— `survey_responses` í…Œì´ë¸”ì´ ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ì „ë¶€í„° ì¡´ì¬ â†’ `workshops.0001_initial`ì´ ì¬ìƒì„± ì‹œë„ â†’ ì¶©ëŒ

#### ìˆ˜ì • ì‹œë„ ê³¼ì •

| ì‹œë„ | ë°©ë²• | ê²°ê³¼ | ì‹¤íŒ¨ ì›ì¸ |
|------|------|------|----------|
| 1ì°¨ | `migrate --fake-initial` | CI âœ… Render âŒ | `--fake-initial`ì€ ALL í…Œì´ë¸”ì´ ì¡´ì¬í•  ë•Œë§Œ ë™ì‘ (ì¼ë¶€ ì—†ìœ¼ë©´ ì‹¤íŒ¨) |
| 2ì°¨ | `SeparateDatabaseAndState` + `RunPython` | CI âŒ | `RunPython`ì€ `from_state.apps` ì‚¬ìš© â†’ ìƒˆ ëª¨ë¸ ë¯¸í¬í•¨ â†’ `get_model()` ì‹¤íŒ¨ |
| 3ì°¨ | `render-build.sh` ì¡°ê±´ë¶€ `record_applied` | CI âœ… Render âœ… | ë°°í¬ ì„±ê³µ |

#### ìµœì¢… í•´ê²°ì±…

**íŒŒì¼ 1: `render-build.sh`** (ì»¤ë°‹ `ebff907`)
```bash
# migrate ì‹¤í–‰ ì „, í…Œì´ë¸”ì´ ì´ë¯¸ ì¡´ì¬í•˜ë©´ migrationì„ appliedë¡œ ë§ˆí‚¹
python manage.py shell -c "
from django.db import connection
from django.db.migrations.recorder import MigrationRecorder
tables = connection.introspection.table_names()
recorder = MigrationRecorder(connection)
applied = {(m.app, m.name) for m in recorder.migration_qs}

if 'survey_responses' in tables and ('workshops', '0001_initial') not in applied:
    recorder.record_applied('workshops', '0001_initial')

if 'export_templates' in tables and ('exports', '0001_initial') not in applied:
    recorder.record_applied('exports', '0001_initial')
"
python manage.py migrate --no-input
```

#### ì¶”ê°€ ë¬¸ì œ: workshop_sessions í…Œì´ë¸” ë¯¸ì¡´ì¬

`survey_responses`ëŠ” ìˆì§€ë§Œ `workshop_sessions` ë“± ë‹¤ë¥¸ í…Œì´ë¸”ì€ ì—†ëŠ” ë¶ˆì¼ì¹˜ ìƒíƒœ ë°œê²¬.
â†’ `0001_initial`ì„ fake-applyí–ˆê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ í…Œì´ë¸”ì´ ìƒì„± ì•ˆ ë¨.

**íŒŒì¼ 2-3: `0002_create_missing_tables.py`** (ì»¤ë°‹ `4f95b1a`)

`0002` ë§ˆì´ê·¸ë ˆì´ì…˜ì—ì„œ `RunPython`ìœ¼ë¡œ ëˆ„ë½ í…Œì´ë¸” ì¡°ê±´ë¶€ ìƒì„±:
- `0001_initial` ì´í›„ ì‹¤í–‰ë˜ë¯€ë¡œ `from_state.apps`ì— workshop ëª¨ë¸ í¬í•¨ â†’ `get_model()` ì •ìƒ ì‘ë™
- ê° ëª¨ë¸ì˜ DB í…Œì´ë¸” ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸ í›„ ì—†ì„ ë•Œë§Œ `schema_editor.create_model()` í˜¸ì¶œ
- ì˜ì¡´ì„± ìˆœì„œ: `WorkshopSession` â†’ `SurveyTemplate` â†’ `WorkshopParticipant` â†’ `RealTimeProgress` â†’ `GroupConsensusResult` â†’ `SurveyResponse`
- Fresh DB (CI): `0001_initial`ì´ ëª¨ë‘ ìƒì„± â†’ `0002`ëŠ” no-op âœ…
- Render ê¸°ì¡´ DB: `0001_initial` fake â†’ `0002`ê°€ ëˆ„ë½ í…Œì´ë¸” ìƒì„± âœ…

---

## ì»¤ë°‹ ë‚´ì—­ (ì„¸ì…˜ ì „ì²´)

### í”„ë¡ íŠ¸ì—”ë“œ (aebonlee/ahp_app)
| ì»¤ë°‹ í•´ì‹œ | ë‚´ìš© |
|-----------|------|
| `c17fbab` | fix: remove whitespace before .repeat in connectionTest.ts + add 2026-02-19 dev log |
| `f85df06` | fix: replace all alert() calls with inline toast notifications across 55 components |

### ë°±ì—”ë“œ (aebonlee/ahp-django-service)
| ì»¤ë°‹ í•´ì‹œ | CI | ë‚´ìš© |
|-----------|----|------|
| `9a6710f3` | âœ… #34 | fix: add exports and workshops to INSTALLED_APPS |
| `75473c26` | âœ… #35 | feat: add initial migrations for exports and workshops apps |
| `0d7bbf41` | âœ… #36 | feat: add initial migrations for exports and workshops apps |
| `6abdf6c4` | âœ… #37 | feat: add initial migrations for exports and workshops apps |
| `569f1556` | âœ… #38 | feat: add initial migrations for exports and workshops apps |
| `a47c40c` | âœ… #39 | security: require authentication for ProjectViewSet and CriteriaViewSet |
| `6a9b693` | âœ… #40 | fix: --fake-initial ì‹œë„ (Render ì‹¤íŒ¨) |
| `b4ed855` | âŒ #41 | fix: SeparateDatabaseAndState+RunPython ì‹œë„ (CI ì‹¤íŒ¨) |
| `ebff907` | âœ… #42 | fix: render-build.sh ì¡°ê±´ë¶€ ë§ˆí‚¹ + ë§ˆì´ê·¸ë ˆì´ì…˜ ì›ë³µ |
| `4f95b1a` | âœ… #43 | fix: 0002 migrationìœ¼ë¡œ ëˆ„ë½ í…Œì´ë¸” ìƒì„± |

---

## í˜„ì¬ ì‹œìŠ¤í…œ ìƒíƒœ

### ë°±ì—”ë“œ (aebonlee/ahp-django-service)

| ì•± | ì—”ë“œí¬ì¸íŠ¸ | ì¸ì¦ | ìƒíƒœ |
|----|-----------|------|------|
| accounts | `/api/service/accounts/` | IsAuthenticated | âœ… |
| projects | `/api/service/projects/projects/` | IsAuthenticated | âœ… 401 (ë¯¸ì¸ì¦) |
| criteria | `/api/service/projects/criteria/` | IsAuthenticated | âœ… 401 (ë¯¸ì¸ì¦) |
| evaluations | `/api/service/evaluations/` | IsAuthenticated | âœ… |
| analysis | `/api/service/analysis/` | IsAuthenticated | âœ… |
| subscriptions | `/api/service/subscriptions/` | IsAuthenticated | âœ… |
| exports | `/api/service/exports/` | IsAuthenticated | âœ… |
| workshops | `/api/service/workshops/sessions/` | IsAuthenticated | âœ… 200 (ë¹ˆ ëª©ë¡) |

- **CI**: âœ… Run #39-40, #42-43 ì„±ê³µ (#41ì€ SeparateDatabaseAndState ì‹œë„ë¡œ ì‹¤íŒ¨)
- **Render.com**: âœ… ë°°í¬ ì„±ê³µ, workshop_sessions í…Œì´ë¸” ìƒì„± ì™„ë£Œ

### í”„ë¡ íŠ¸ì—”ë“œ (aebonlee/ahp_app)

- **CI Pipeline**: âœ… í†µê³¼
- **GitHub Pages**: âœ… ë°°í¬ ì™„ë£Œ
- **ë°°í¬ URL**: https://aebonlee.github.io/ahp_app

---

## ë‚¨ì€ ì‘ì—… (TODO) â€” ì„¸ì…˜ 3 ê¸°ì¤€

### ìš°ì„ ìˆœìœ„ HIGH
1. ~~**ì „ì²´ API ì—°ë™ í†µí•© í…ŒìŠ¤íŠ¸**~~ â†’ **ì™„ë£Œ** (ì„¸ì…˜ 4)
2. **íšŒì›ê°€ì… ì´ë©”ì¼ ì¸ì¦ íë¦„ ê²€í† **

### ìš°ì„ ìˆœìœ„ LOW (ê°œë°œ ì™„ë£Œ í›„)
3. **Render.com PostgreSQL â†’ Neon.tech ì´ì „** ($7/ì›” ì ˆì•½)
4. **ìƒˆ í”„ë¡œë•ì…˜ ë ˆí¬** ìƒì„± (í˜„ì¬ ë ˆí¬ëŠ” ë°±ì—…ìš©)

---

## ê¸°ìˆ  ë…¸íŠ¸

### Django ì•± ì¶”ê°€ ì‹œ í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
ìƒˆ Django ì•±ì„ ì¶”ê°€í•  ë•Œ ë°˜ë“œì‹œ ë‹¤ìŒ 3ë‹¨ê³„ ëª¨ë‘ ìˆ˜í–‰:
1. `apps/{ì•±ëª…}/migrations/__init__.py` ìƒì„±
2. `apps/{ì•±ëª…}/migrations/0001_initial.py` ìƒì„± (ëª¨ë¸ì´ ìˆëŠ” ê²½ìš°)
3. `settings.py` â†’ `LOCAL_APPS` ë¦¬ìŠ¤íŠ¸ì— `'apps.{ì•±ëª…}'` ì¶”ê°€

ìˆœì„œ ì—†ì´ `urls.py`ì—ë§Œ include ì¶”ê°€í•˜ë©´ CI `manage.py check` ì‹¤íŒ¨.

### GitHub Pages "Setup Pages" ì‹¤íŒ¨ íŒ¨í„´
- ë¹Œë“œ ìì²´ëŠ” ì„±ê³µí•´ë„ `configure-pages@v4` ì•¡ì…˜ì´ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŒ
- GitHub ì¸í”„ë¼ ì¼ì‹œ ë¬¸ì œ ë˜ëŠ” í™˜ê²½(github-pages) ì„¤ì • ë¬¸ì œ
- ì¬íŠ¸ë¦¬ê±°(ìƒˆ push)ë¡œ ëŒ€ë¶€ë¶„ í•´ê²°ë¨

### Django RunPythonê³¼ SeparateDatabaseAndState ì£¼ì˜ì‚¬í•­
`SeparateDatabaseAndState`ì˜ `database_operations` ì•ˆì— ìˆëŠ” `RunPython`ì€
`from_state.apps` (state_operations ì ìš© **ì´ì „** ìƒíƒœ)ë¥¼ ì‚¬ìš©.
ë”°ë¼ì„œ state_operationsì—ì„œ ì •ì˜í•œ ìƒˆ ëª¨ë¸ì„ `apps.get_model()`ë¡œ ì¡°íšŒ ë¶ˆê°€.

ì˜¬ë°”ë¥¸ íŒ¨í„´: ìƒˆ ëª¨ë¸ì„ ì‚¬ìš©í•˜ëŠ” `RunPython`ì€ **ë³„ë„ ë§ˆì´ê·¸ë ˆì´ì…˜**(`0002`)ìœ¼ë¡œ ë¶„ë¦¬.
ì´ ê²½ìš° `from_state`ê°€ `0001_initial`ì˜ state_operationsë¥¼ í¬í•¨í•˜ë¯€ë¡œ `get_model()` ì •ìƒ ë™ì‘.

### Render.com ë§ˆì´ê·¸ë ˆì´ì…˜ ì¶©ëŒ ì²˜ë¦¬ íŒ¨í„´
ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ì „ì— í…Œì´ë¸”ì´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ìš°:
1. `render-build.sh`ì—ì„œ `MigrationRecorder.record_applied()` ë¡œ í•´ë‹¹ ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆ˜ë™ ë§ˆí‚¹
2. í›„ì† ë§ˆì´ê·¸ë ˆì´ì…˜(`0002`)ì—ì„œ ëˆ„ë½ í…Œì´ë¸”ì„ `schema_editor.create_model()` + ì¡´ì¬ ì—¬ë¶€ ì²´í¬ë¡œ ìƒì„±
3. `--fake-initial`ì€ ALL í…Œì´ë¸” ì¡´ì¬ ì‹œì—ë§Œ ë™ì‘í•˜ë¯€ë¡œ ë¶€ë¶„ ìƒíƒœì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€

---

## ì„¸ì…˜ 4: API ì—°ë™ í†µí•© í…ŒìŠ¤íŠ¸ (2026-02-19 ì˜¤í›„)

### í…ŒìŠ¤íŠ¸ ë°©ë²•
- Python `urllib` (Windowsì—ì„œ curl ë¯¸ì‚¬ìš©) ê¸°ë°˜ HTTP ìš”ì²­
- ë°±ì—”ë“œ: `https://ahp-django-backend.onrender.com`
- ìˆœì„œ: íšŒì›ê°€ì… â†’ ë¡œê·¸ì¸ â†’ í”„ë¡œì íŠ¸ ìƒì„± â†’ ê¸°ì¤€ ìƒì„± â†’ í‰ê°€ ìƒì„± â†’ ë¹„êµ ì…ë ¥ â†’ ë¶„ì„

### í†µí•© í…ŒìŠ¤íŠ¸ ê²°ê³¼

| # | ì—”ë“œí¬ì¸íŠ¸ | HTTP | ê²°ê³¼ | ë¹„ê³  |
|---|-----------|------|------|------|
| 1 | `/health/` | GET | âœ… 200 | |
| 2 | `/db-status/` | GET | âœ… 200 | tables=75 |
| 3 | `/api/service/accounts/register/` | POST | âœ… 201 | JWT í¬í•¨ |
| 4 | `/api/service/accounts/login/` | POST | âœ… 200 | access/refresh ë°œê¸‰ |
| 5 | `/api/service/accounts/users/me/` | GET | âŒ 404 | â†’ ìˆ˜ì •ë¨ |
| 6 | `/api/service/projects/projects/` (ë¯¸ì¸ì¦) | GET | âœ… 401 | ë³´ì•ˆ ì •ìƒ |
| 7 | `/api/service/projects/projects/` (ì¸ì¦) | GET | âœ… 200 | count=0 |
| 8 | `/api/service/projects/projects/` | POST | âœ… 201 | id ì—†ìŒ â†’ ìˆ˜ì •ë¨ |
| 9 | `/api/service/projects/projects/{id}/` | GET | âœ… 200 | |
| 10 | `/api/service/projects/projects/{id}/` | PATCH | âœ… 200 | status ë³€ê²½ |
| 11 | `/api/service/projects/criteria/` | POST | âœ… 201 | 3ê°œ ìƒì„± |
| 12 | `/api/service/evaluations/evaluations/` | POST | âœ… 201 | ë¹„êµìŒ 3ê°œ ìë™ìƒì„±, id ì—†ìŒ â†’ ìˆ˜ì •ë¨ |
| 13 | `/api/service/evaluations/comparisons/` | GET | âœ… 200 | count=3 |
| 14 | `/api/service/evaluations/comparisons/{id}/` | PATCH | âŒ 500 | â†’ ìˆ˜ì •ë¨ |
| 15 | `/api/service/analysis/calculate/individual/` | POST | âŒ 500 | â†’ ìˆ˜ì •ë¨ |
| 16 | `/api/service/analysis/project-summary/` | GET | âŒ 500 | â†’ ìˆ˜ì •ë¨ |
| 17 | `/api/service/auth/token/refresh/` | POST | âœ… 200 | |

### ë°œê²¬ ë° ìˆ˜ì •í•œ ë²„ê·¸

#### ë²„ê·¸ 1: ProjectCreateSerializer/EvaluationCreateSerializer â€” `id` ëˆ„ë½
**í˜„ìƒ**: 201 Created ì‘ë‹µì— `id` í•„ë“œ ì—†ìŒ â†’ í”„ë¡ íŠ¸ì—”ë“œê°€ ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ IDë¥¼ ëª¨ë¦„
**ì›ì¸**: `fields` ë¦¬ìŠ¤íŠ¸ì— `id` ë¯¸í¬í•¨
**ìˆ˜ì •**:
- `ProjectCreateSerializer`: `id = serializers.SerializerMethodField()` + `get_id()` ì¶”ê°€
- `EvaluationCreateSerializer`: `id = serializers.UUIDField(read_only=True)` ì¶”ê°€

#### ë²„ê·¸ 2: PairwiseComparisonSerializer.validate() â€” PATCH ì‹œ 500 KeyError
**í˜„ìƒ**: PATCH `/comparisons/{id}/` ì‹œ 500 Server Error
**ì›ì¸**: `validate()`ì—ì„œ `data['criteria_a']`, `data['criteria_b']`ë¥¼ ì§ì ‘ ì ‘ê·¼ â†’ PATCH(partial)ì—ì„œ í•´ë‹¹ í‚¤ê°€ ì—†ìœ¼ë©´ `KeyError`
**ìˆ˜ì •**: instance ê°’ì„ fallbackìœ¼ë¡œ ì‚¬ìš©
```python
criteria_a = data.get('criteria_a', getattr(self.instance, 'criteria_a', None))
criteria_b = data.get('criteria_b', getattr(self.instance, 'criteria_b', None))
```
**ì¶”ê°€**: `evaluation` í•„ë“œë„ `fields`ì— ì¶”ê°€í•˜ì—¬ POST ì§€ì›

#### ë²„ê·¸ 3: AnalysisViewSet â€” 4ê°œ ì•¡ì…˜ ë©”ì„œë“œ ë¯¸êµ¬í˜„
**í˜„ìƒ**: `urls.py`ì—ì„œ ì°¸ì¡°í•˜ëŠ” `calculate_individual`, `calculate_group`, `calculate_final_priorities`, `project_summary`ê°€ `AnalysisViewSet`ì— ì—†ìŒ â†’ 500
**ìˆ˜ì •**: 4ê°œ ë©”ì„œë“œ ëª¨ë‘ êµ¬í˜„
- `calculate_individual`: evaluation_id ê¸°ì¤€ AHP ê°€ì¤‘ì¹˜ ê³„ì‚° + CR ë°˜í™˜
- `calculate_group`: ì „ì²´ ì™„ë£Œ í‰ê°€ ê¸°í•˜í‰ê·  ì§‘ê³„
- `calculate_final_priorities`: calculate_group ìœ„ì„
- `project_summary`: í”„ë¡œì íŠ¸ ë¶„ì„ ìƒíƒœ ìš”ì•½

#### ë²„ê·¸ 4: `/accounts/users/me/` â€” URL ë¼ìš°íŒ… 404
**í˜„ìƒ**: `UserViewSet`ì— `me` ì•¡ì…˜ì´ ìˆì§€ë§Œ routerëŠ” `user_views.UserViewSet` ë“±ë¡ (í•´ë‹¹ í´ë˜ìŠ¤ì— `me` ì—†ìŒ) â†’ pk="me"ë¡œ ì¡°íšŒ â†’ 404
**ìˆ˜ì •**: `accounts/urls.py`ì— `/accounts/me/` ëª…ì‹œì  URL ì¶”ê°€ + `current_user_profile` FBV êµ¬í˜„ (GET/PATCH ì§€ì›)

### ì»¤ë°‹ ë‚´ì—­ (ì„¸ì…˜ 4)

| ì»¤ë°‹ í•´ì‹œ | ë‚´ìš© |
|-----------|------|
| `caae9a9` | fix: í†µí•© í…ŒìŠ¤íŠ¸ ë°œê²¬ ë²„ê·¸ 3ì¢… ìˆ˜ì • (serializers + analysis views) |
| `533ede7` | fix: /me/ ì—”ë“œí¬ì¸íŠ¸ 404 ìˆ˜ì • |
| `d3cc26b` | fix: EvaluationCreateSerializer id í•„ë“œ ëˆ„ë½ ìˆ˜ì • |

### ìµœì¢… ê²€ì¦ ê²°ê³¼ (Render ë°°í¬ ì™„ë£Œ í›„)

ëª¨ë“  ìˆ˜ì • ì‚¬í•­ì´ Renderì— ë°˜ì˜ëœ í›„ ì „ì²´ íë¦„ì„ ì¬ì‹¤í–‰í•œ ìµœì¢… ê²°ê³¼:

| # | ì—”ë“œí¬ì¸íŠ¸ | HTTP | ìµœì¢… ê²°ê³¼ | ë¹„ê³  |
|---|-----------|------|-----------|------|
| 1 | `/api/service/accounts/register/` | POST | âœ… 201 | user_id=22 í¬í•¨ |
| 2 | `/api/service/accounts/me/` | GET | âœ… 200 | id, username ì •ìƒ ë°˜í™˜ |
| 3 | `/api/service/projects/projects/` | POST | âœ… 201 | **id í¬í•¨** (UUID) |
| 4 | `/api/service/projects/criteria/` Ã— 3 | POST | âœ… 201 Ã— 3 | |
| 5 | `/api/service/evaluations/evaluations/` | POST | âœ… 201 | **id í¬í•¨** (UUID) |
| 6 | `/api/service/evaluations/comparisons/` | GET | âœ… 200 | count=3 ìë™ìƒì„± |
| 7 | `/api/service/evaluations/comparisons/{id}/` Ã— 3 | PATCH | âœ… 200 Ã— 3 | |
| 8 | `/api/service/analysis/calculate/individual/` | POST | âœ… 200 | AHP ê°€ì¤‘ì¹˜ ì •ìƒ ê³„ì‚° |
| 9 | `/api/service/analysis/project-summary/` | GET | âœ… 200 | ìš”ì•½ ì •ìƒ ë°˜í™˜ |

**AHP ê³„ì‚° ìƒ˜í”Œ ê²°ê³¼** (CR=0.0036, 3:5:2 ë¹„êµ ì…ë ¥):
```
Cost:    0.6483  (rank 1)
Quality: 0.2297  (rank 2)
Speed:   0.1220  (rank 3)
CR=0.0036 â†’ is_consistent=True (threshold 0.1 ì´í•˜)
```

**ì „ì²´ í•µì‹¬ íë¦„ ì™„ì „ ë™ì‘ í™•ì¸**: íšŒì›ê°€ì… â†’ í”„ë¡œì íŠ¸ ìƒì„± â†’ ê¸°ì¤€ ì„¤ì • â†’ í‰ê°€ ìƒì„± â†’ ìŒëŒ€ë¹„êµ ì…ë ¥ â†’ AHP ê°€ì¤‘ì¹˜ ê³„ì‚°

---

## ìµœì¢… ì‹œìŠ¤í…œ ìƒíƒœ (2026-02-19 ì„¸ì…˜ ì¢…ë£Œ ê¸°ì¤€)

### ë°±ì—”ë“œ (aebonlee/ahp-django-service)

| ì•± | ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸ | ìƒíƒœ |
|----|----------------|------|
| accounts | register, login, /me/ | âœ… |
| projects | projects CRUD, criteria CRUD | âœ… |
| evaluations | evaluations, comparisons (PATCH) | âœ… |
| analysis | calculate_individual, project_summary | âœ… |
| workshops | sessions | âœ… |
| exports | templates | âœ… |

**ë³´ì•ˆ**: ë¯¸ì¸ì¦ ì ‘ê·¼ â†’ 401 Unauthorized (ì •ìƒ)

### ì»¤ë°‹ íˆìŠ¤í† ë¦¬ (ì„¸ì…˜ 3~4)

| ì»¤ë°‹ | CI | ë‚´ìš© |
|------|----|------|
| `a47c40c` | âœ… | security: ProjectViewSet ì¸ì¦ ê°•í™” |
| `ebff907` | âœ… | fix: Render ë§ˆì´ê·¸ë ˆì´ì…˜ ì¶©ëŒ ì²˜ë¦¬ |
| `4f95b1a` | âœ… | fix: ëˆ„ë½ í…Œì´ë¸” ìƒì„± ë§ˆì´ê·¸ë ˆì´ì…˜ |
| `caae9a9` | âœ… | fix: í†µí•© í…ŒìŠ¤íŠ¸ ë²„ê·¸ 3ì¢… ìˆ˜ì • |
| `533ede7` | âœ… | fix: /me/ ì—”ë“œí¬ì¸íŠ¸ URL ë¼ìš°íŒ… ìˆ˜ì • |
| `d3cc26b` | âœ… | fix: EvaluationCreateSerializer id ëˆ„ë½ ìˆ˜ì • |

---

## ì„¸ì…˜ 5: í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸ (2026-02-19 ì €ë…)

### í…ŒìŠ¤íŠ¸ ëª©í‘œ
í”„ë¡ íŠ¸ì—”ë“œ `api.ts`ì˜ ì—”ë“œí¬ì¸íŠ¸ ìƒìˆ˜ê°€ ì‹¤ì œ Django ë°±ì—”ë“œ URLê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦í•˜ê³  ìˆ˜ì •.

### í…ŒìŠ¤íŠ¸ ë°©ë²•
Python `urllib`ë¡œ ì‹¤ì œ ë°±ì—”ë“œ ì„œë²„ì— HTTP ìš”ì²­í•˜ì—¬ ê° URLì˜ ì‘ë‹µì½”ë“œ í™•ì¸.

### ë°œê²¬ëœ ë¬¸ì œ (ìˆ˜ì • ì „)

#### ë¬¸ì œ 1: AUTH.ME/PROFILE â€” 404
| í•­ëª© | ê¸°ì¡´ ê°’ | ì‹¤ì œ ê²°ê³¼ |
|------|---------|-----------|
| `AUTH.ME` | `/api/service/auth/profile/` | 404 NOT FOUND |
| `AUTH.PROFILE` | `/api/service/auth/profile/` | 404 NOT FOUND |
| **ì •ìƒ ê²½ë¡œ** | `/api/service/accounts/me/` | âœ… 200 |

#### ë¬¸ì œ 2: CRITERIA â€” ì˜ëª»ëœ ê²½ë¡œ íŒ¨í„´
| í•­ëª© | ê¸°ì¡´ ê°’ | ì‹¤ì œ ê²°ê³¼ |
|------|---------|-----------|
| `CRITERIA.LIST` | `(id) => /projects/${id}/criteria/` | 404 |
| `CRITERIA.CREATE` | `(id) => /projects/${id}/add_criteria/` | 404 |
| **ì •ìƒ ê²½ë¡œ** | `/projects/criteria/?project=${id}` | âœ… 200 |

â†’ `CriteriaViewSet`ì€ ë…ë¦½ì ì¸ `/projects/criteria/` ë¼ìš°íŒ…ì„ ì‚¬ìš©í•˜ë©° `?project=` ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ í•„í„°ë§.

#### ë¬¸ì œ 3: ALTERNATIVES â€” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•±
| ê¸°ì¡´ ê°’ | ì‹¤ì œ ê²°ê³¼ |
|---------|-----------|
| `/api/v1/alternatives/` | 404 (alternatives ì•± ì—†ìŒ) |
| **í•´ê²°**: `criteria/?type=alternative` ë¡œ ëŒ€ì²´ | âœ… 200 |

#### ë¬¸ì œ 4: COMPARISONS/EVALUATIONS â€” ì˜ëª»ëœ prefix `/api/v1/`
| í•­ëª© | ê¸°ì¡´ ê°’ | ì˜¬ë°”ë¥¸ ê°’ |
|------|---------|-----------|
| `EVALUATIONS.SUBMIT` | `/api/v1/comparisons/` | `/api/service/evaluations/comparisons/` |
| `EVALUATIONS.GET_MATRIX` | `/api/v1/comparisons/?project=` | `/api/service/evaluations/comparisons/?project=` |
| `COMPARISONS.SAVE` | `/api/v1/comparisons/` | `/api/service/evaluations/comparisons/` |
| `COMPARISONS.GET` | `/api/v1/comparisons/?project=` | `/api/service/evaluations/comparisons/?project=` |

#### ë¬¸ì œ 5: RESULTS â€” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” `/api/v1/results/`
| í•­ëª© | ê¸°ì¡´ ê°’ | ì˜¬ë°”ë¥¸ ê°’ |
|------|---------|-----------|
| `RESULTS.GET` | `/api/v1/results/${id}/` | `/api/service/analysis/project-summary/?project_id=${id}` |
| `RESULTS.CALCULATE_GROUP` | `/api/v1/results/group/` | `/api/service/analysis/calculate/group/` |
| `RESULTS.SENSITIVITY` | `/api/v1/results/sensitivity/` | `/api/service/analysis/sensitivity/` |
| `EVALUATIONS.RESULTS` | `/api/v1/results/?project=` | `/api/service/analysis/project-summary/?project_id=` |

#### ë¬¸ì œ 6: EVALUATORS â€” `/api/service/evaluators/` ì•± ì—†ìŒ
| ê¸°ì¡´ ê°’ | ì‹¤ì œ ê²°ê³¼ |
|---------|-----------|
| `/api/service/evaluators/` | 404 |
| `SEND_INVITATIONS` â†’ `/evaluators/invite/` | 404 |
| **í•´ê²°**: `/evaluations/invitations/`, `/evaluations/bulk-invitations/` | âœ… 200 |

#### ë³´ì•ˆ ì·¨ì•½ì : CORS_ALLOW_ALL_ORIGINS=True
```
Origin: https://evil.com â†’ Access-Control-Allow-Origin: https://evil.com (âš ï¸)
Origin: https://naver.com â†’ Access-Control-Allow-Origin: https://naver.com (âš ï¸)
```
Render í™˜ê²½ ë³€ìˆ˜ì— `CORS_ALLOW_ALL_ORIGINS=True`ê°€ ì„¤ì •ë˜ì–´ ìˆì–´ ëª¨ë“  origin í—ˆìš©.

### ìˆ˜ì • ë‚´ì—­

#### ìˆ˜ì • 1: `api.ts` ì „ë©´ ìˆ˜ì • (í”„ë¡ íŠ¸ì—”ë“œ)
íŒŒì¼: `D:/ahp_app/ahp_app/src/config/api.ts`

```typescript
// ìˆ˜ì • ì „ â†’ ìˆ˜ì • í›„
AUTH.ME:     '/auth/profile/'      â†’ '/accounts/me/'
AUTH.LOGIN:  '/auth/login/'        â†’ '/auth/token/'   (simplejwt ì§ì ‘)
CRITERIA.LIST: (id) => '/{id}/criteria/' â†’ '/criteria/?project={id}'
CRITERIA.CREATE: (id) => '/{id}/add_criteria/' â†’ '/criteria/'
ALTERNATIVES.*: '/api/v1/alternatives/' â†’ '/projects/criteria/?type=alternative'
EVALUATIONS.*: '/api/v1/comparisons|results/' â†’ '/evaluations/comparisons/' ë° '/analysis/...'
COMPARISONS.*: '/api/v1/comparisons/' â†’ '/evaluations/comparisons/'
RESULTS.*: '/api/v1/results/' â†’ '/analysis/project-summary/' ë° '/analysis/calculate/'
EVALUATORS.*: '/evaluators/' â†’ '/evaluations/invitations/', '/evaluations/bulk-invitations/'
```

ì»¤ë°‹: `ac28eb2`

#### ìˆ˜ì • 2: CORS ë³´ì•ˆ ê°•í™” (ë°±ì—”ë“œ)
íŒŒì¼: `ahp_backend/settings.py`

```python
# ìˆ˜ì • ì „
CORS_ALLOW_ALL_ORIGINS = config('CORS_ALLOW_ALL_ORIGINS', default=False, cast=bool)
CORS_ALLOWED_ORIGIN_REGEXES = [r"^file://.*$"]

# ìˆ˜ì • í›„
CORS_ALLOW_ALL_ORIGINS = False  # í™˜ê²½ ë³€ìˆ˜ë¡œ override ë¶ˆê°€, í•­ìƒ False
CORS_ALLOWED_ORIGIN_REGEXES = [r"^file://.*$"] if DEBUG else []  # DEBUG ì‹œì—ë§Œ
```

ì»¤ë°‹: `f810099`

#### ìˆ˜ì • 3: AnalysisViewSet UUID ìœ íš¨ì„± ê²€ì¦ (ë°±ì—”ë“œ)
ì˜ëª»ëœ UUID ë¬¸ìì—´ë¡œ `Project.objects.get(pk='test')` í˜¸ì¶œ ì‹œ `ValueError` â†’ 500 ë°œìƒí•˜ë˜ ë²„ê·¸ ìˆ˜ì •.
- `project_summary`, `calculate_group`, `calculate_individual` ëª¨ë‘ ìˆ˜ì •
- `(Project.DoesNotExist, ValueError, Exception)` ëª¨ë‘ â†’ 404ë¡œ ì‘ë‹µ

ì»¤ë°‹: `c960f7e`

### ê²€ì¦ ê²°ê³¼

| ì—”ë“œí¬ì¸íŠ¸ | ìˆ˜ì • ì „ | ìˆ˜ì • í›„ |
|-----------|---------|---------|
| `AUTH.ME â†’ /accounts/me/` | 404 âŒ | 200 âœ… |
| `CRITERIA â†’ /criteria/?project=` | 404 âŒ | 200 âœ… |
| `COMPARISONS â†’ /evaluations/comparisons/` | 404 âŒ | 200 âœ… |
| `EVALUATORS â†’ /evaluations/invitations/` | 404 âŒ | 200 âœ… |
| `ALTERNATIVES â†’ /criteria/?type=alternative` | 404 âŒ | 200 âœ… |
| CORS evil.com í—ˆìš© | âš ï¸ ACAO ë°˜í™˜ | âœ… ì°¨ë‹¨ í™•ì¸ (Render ë°˜ì˜ ì™„ë£Œ) |
| `project_summary('test')` | 500 âŒ | 404 âœ… |

### ì»¤ë°‹ ë‚´ì—­ (ì„¸ì…˜ 5)

#### ë°±ì—”ë“œ (aebonlee/ahp-django-service)
| ì»¤ë°‹ í•´ì‹œ | ë‚´ìš© |
|-----------|------|
| `f810099` | security: CORS_ALLOW_ALL_ORIGINS ì°¨ë‹¨, DEBUGì—ì„œë§Œ file:// í—ˆìš© |
| `c960f7e` | fix: AnalysisViewSet UUID ìœ íš¨ì„± ê²€ì¦ (500 â†’ 404) |

#### í”„ë¡ íŠ¸ì—”ë“œ (aebonlee/ahp_app)
| ì»¤ë°‹ í•´ì‹œ | ë‚´ìš© |
|-----------|------|
| `ac28eb2` | fix: api.ts ì „ì²´ ì—”ë“œí¬ì¸íŠ¸ ë°±ì—”ë“œ URLê³¼ ì¼ì¹˜í•˜ë„ë¡ ìˆ˜ì • |

---

---

## ì„¸ì…˜ 6: CORS Render ë°˜ì˜ í™•ì¸ (2026-02-19 ì•¼ê°„)

### í…ŒìŠ¤íŠ¸ ê²°ê³¼

Render ì¬ë°°í¬ ì™„ë£Œ í›„ CORS ì •ì±… ì ìš© ì—¬ë¶€ í™•ì¸.

| Origin | í—ˆìš© ì—¬ë¶€ | ACAO í—¤ë” | ê²°ê³¼ |
|--------|-----------|-----------|------|
| `https://aebonlee.github.io` | í—ˆìš© ëŒ€ìƒ | `https://aebonlee.github.io` | âœ… ì •ìƒ í—ˆìš© |
| `http://localhost:3000` | í—ˆìš© ëŒ€ìƒ | `http://localhost:3000` | âœ… ì •ìƒ í—ˆìš© |
| `https://evil.com` | ì°¨ë‹¨ ëŒ€ìƒ | NONE (í—¤ë” ì—†ìŒ) | âœ… ì°¨ë‹¨ í™•ì¸ |
| `https://naver.com` | ì°¨ë‹¨ ëŒ€ìƒ | NONE (í—¤ë” ì—†ìŒ) | âœ… ì°¨ë‹¨ í™•ì¸ |
| `https://google.com` | ì°¨ë‹¨ ëŒ€ìƒ | NONE (í—¤ë” ì—†ìŒ) | âœ… ì°¨ë‹¨ í™•ì¸ |

**ê²°ë¡ **: `CORS_ALLOW_ALL_ORIGINS = False` í•˜ë“œì½”ë”©ì´ Renderì— ì •ìƒ ë°˜ì˜ë¨. í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸(GitHub Pages, localhost)ë§Œ í—ˆìš©ë˜ê³  ì„ì˜ originì€ ACAO í—¤ë” ìì²´ê°€ ì‘ë‹µì— í¬í•¨ë˜ì§€ ì•ŠìŒ.

---

---

## ì„¸ì…˜ 7: ì´ë©”ì¼ ì¸ì¦ íë¦„ ê²€í†  (2026-02-19 ì•¼ê°„)

### í˜„í™© ë¶„ì„

| í•­ëª© | ì„¤ì •ê°’ | ì‹¤ì œ ë™ì‘ |
|------|--------|-----------|
| `ACCOUNT_EMAIL_VERIFICATION` | `'mandatory'` (ìˆ˜ì • ì „) | **ë¬´íš¨** â€” ì»¤ìŠ¤í…€ ë·°ê°€ allauth ìš°íšŒ |
| `EMAIL_BACKEND` | `console.EmailBackend` (ê¸°ë³¸ê°’) | ì„œë²„ ì½˜ì†” ì¶œë ¥ë§Œ, ì‹¤ì œ ë¯¸ë°œì†¡ |
| ì»¤ìŠ¤í…€ `/auth/register/` | allauth ì™„ì „ ìš°íšŒ | ê°€ì… ì¦‰ì‹œ JWT ë°œê¸‰ (ì´ë©”ì¼ ì¸ì¦ ì—†ìŒ) |
| allauth `/auth/registration/` | `'mandatory'` + console backend | 500 ì—ëŸ¬ (ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨) |

**ê²°ë¡ **: ì´ë©”ì¼ ì¸ì¦ì€ ì´ë¯¸ ë¹„í™œì„±í™” ìƒíƒœì˜€ìœ¼ë‚˜, `ACCOUNT_EMAIL_VERIFICATION = 'mandatory'` ì„¤ì •ì´ allauth URLì—ì„œ 500ì„ ìœ ë°œí•˜ëŠ” ë¶ˆì¼ì¹˜ ì¡´ì¬.

### ê²°ì •: ì´ë©”ì¼ ì¸ì¦ ë¹„í™œì„±í™” ìœ ì§€ (ë² íƒ€ ë‹¨ê³„)

### ìˆ˜ì • ë‚´ì—­

íŒŒì¼: `ahp_backend/settings.py` (ì»¤ë°‹ `ed84921`)

```python
# ìˆ˜ì • ì „
ACCOUNT_USERNAME_REQUIRED = False
ACCOUNT_AUTHENTICATION_METHOD = 'email'
ACCOUNT_EMAIL_VERIFICATION = 'mandatory'
ACCOUNT_CONFIRM_EMAIL_ON_GET = True
ACCOUNT_LOGIN_ON_EMAIL_CONFIRMATION = True

# ìˆ˜ì • í›„
ACCOUNT_USERNAME_REQUIRED = True
ACCOUNT_AUTHENTICATION_METHOD = 'username'
ACCOUNT_EMAIL_VERIFICATION = 'none'      # ì½”ë“œ ì‹¤ì œ ë™ì‘ê³¼ ì¼ì¹˜
ACCOUNT_CONFIRM_EMAIL_ON_GET = False
ACCOUNT_LOGIN_ON_EMAIL_CONFIRMATION = False
```

â†’ allauth `/auth/registration/` 500 ì—ëŸ¬ í•´ì†Œ.

### í–¥í›„ ì´ë©”ì¼ ì¸ì¦ í™œì„±í™” ì‹œ í•„ìš” ì‘ì—… (ë©”ëª¨)

1. Render í™˜ê²½ ë³€ìˆ˜ì— SMTP ì„¤ì • ì¶”ê°€:
   ```
   EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
   EMAIL_HOST=smtp.gmail.com
   EMAIL_PORT=587
   EMAIL_HOST_USER=...
   EMAIL_HOST_PASSWORD=...
   ```
2. `ACCOUNT_EMAIL_VERIFICATION = 'mandatory'` ë³µì›
3. ì»¤ìŠ¤í…€ `register` ë·°ì—ì„œ ì´ë©”ì¼ ì¸ì¦ ì•ˆë‚´ ë©”ì‹œì§€ ì¶”ê°€ (í† í° ë¯¸ì¦‰ì‹œ ë°œê¸‰)
4. í”„ë¡ íŠ¸ì—”ë“œ "ì´ë©”ì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”" ì•ˆë‚´ UI ì¶”ê°€

---

---

## ì„¸ì…˜ 8: E2E ì „ì²´ íë¦„ í…ŒìŠ¤íŠ¸ (2026-02-19 ì‹¬ì•¼)

### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
íšŒì›ê°€ì… â†’ JWT ë¡œê·¸ì¸ â†’ í”„ë¡œí•„ ì¡°íšŒ â†’ í”„ë¡œì íŠ¸ ìƒì„± â†’ ê¸°ì¤€ 3ê°œ ì¶”ê°€ â†’ í‰ê°€ ìƒì„± â†’ ë¹„êµìŒ ì…ë ¥(3ìŒ) â†’ AHP ê³„ì‚° â†’ í”„ë¡œì íŠ¸ ìš”ì•½ â†’ í† í° ê°±ì‹  â†’ ë¡œê·¸ì•„ì›ƒ

### 1ì°¨ í…ŒìŠ¤íŠ¸ ê²°ê³¼ (ì‹¤íŒ¨ 4ê±´ ë°œê²¬)

| # | ë‹¨ê³„ | HTTP | ê²°ê³¼ | ì›ì¸ |
|---|------|------|------|------|
| 4 | í”„ë¡œì íŠ¸ ìƒì„± | 400 | âŒ | `evaluation_mode='individual'` ìœ íš¨í•˜ì§€ ì•Šì€ ê°’ |
| 5 | ê¸°ì¤€ ì¶”ê°€ | 500 | âŒ | proj_id=None (cascade from #4) |
| 6 | í‰ê°€ ìƒì„± | 400 | âŒ | proj_id=None (cascade from #4) |
| 12 | ë¡œê·¸ì•„ì›ƒ | 500 | âŒ | í† í° rotation í›„ êµ¬ refresh í† í°ìœ¼ë¡œ logout ì‹œë„ (í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜) |

**ìˆ˜ì • ë‚´ìš©**:
- `evaluation_mode: 'individual'` â†’ `'practical'` (ìœ íš¨ ì„ íƒê°’: practical/theoretical/direct_input/fuzzy_ahp)
- ë¡œê·¸ì•„ì›ƒ ì‹œ step 11 ê°±ì‹  í›„ **ìƒˆ refresh í† í°** ì‚¬ìš©

### 2ì°¨ í…ŒìŠ¤íŠ¸ ê²°ê³¼ (ì „ë¶€ í†µê³¼)

| # | ë‹¨ê³„ | HTTP | ê²°ê³¼ |
|---|------|------|------|
| 1 | íšŒì›ê°€ì… | 201 | âœ… |
| 2 | JWT ë¡œê·¸ì¸ | 200 | âœ… |
| 3 | í”„ë¡œí•„ ì¡°íšŒ `/accounts/me/` | 200 | âœ… |
| 4 | í”„ë¡œì íŠ¸ ìƒì„± (evaluation_mode=practical) | 201 | âœ… |
| 5 | ê¸°ì¤€ 3ê°œ ì¶”ê°€ `/projects/criteria/` | 201Ã—3 | âœ… |
| 6 | í‰ê°€ ìƒì„± `/evaluations/evaluations/` | 201 | âœ… |
| 7 | ë¹„êµ ëª©ë¡ ì¡°íšŒ (3ìŒ ìë™ìƒì„±) | 200 | âœ… |
| 8 | ë¹„êµê°’ ì…ë ¥ PATCH Ã— 3 | 200Ã—3 | âœ… |
| 9 | AHP ê°œì¸ ê°€ì¤‘ì¹˜ ê³„ì‚° | 200 | âœ… |
| 10 | í”„ë¡œì íŠ¸ ìš”ì•½ | 200 | âœ… |
| 11 | í† í° ê°±ì‹  (ìƒˆ refresh ë°œê¸‰) | 200 | âœ… |
| 12 | ë¡œê·¸ì•„ì›ƒ (ê°±ì‹ ëœ refresh ì‚¬ìš©) | 200 | âœ… |
| 13 | ë¡œê·¸ì•„ì›ƒ í›„ ME ì¡°íšŒ (access ìœ íš¨ê¸°ê°„ ë‚´) | 200 | âœ… (ì •ìƒ) |

**17/17 ì „ë¶€ í†µê³¼**

**AHP ê³„ì‚° ê²°ê³¼** (3:5:2 ë¹„êµ ì…ë ¥):
```
ë¹„ìš©: 0.6483 (rank 1)
í’ˆì§ˆ: 0.2297 (rank 2)
ì†ë„: 0.1220 (rank 3)
CR = 0.0036 â†’ is_consistent = True
```

### ì¶”ê°€ ë°œê²¬ ë²„ê·¸ ë° ìˆ˜ì •

#### apiService.ts ì˜ëª»ëœ ì—”ë“œí¬ì¸íŠ¸ 2ê³³ (ì»¤ë°‹ `504353b`)

| í•¨ìˆ˜ | ìˆ˜ì • ì „ | ìˆ˜ì • í›„ |
|------|---------|---------|
| `validateAccessKey` | POST `/invitations/accept/` (404) | GET `/invitations/by_token/?token=` |
| `resultsAPI.*` | `/api/results/*` (ë¯¸ì¡´ì¬) | `/api/service/analysis/*` |

- `accept`ëŠ” `detail=True` action â†’ ì˜¬ë°”ë¥¸ ê²½ë¡œëŠ” `/invitations/{id}/accept/`
- í† í°ìœ¼ë¡œ ì´ˆëŒ€ ì¡°íšŒëŠ” `by_token` action (detail=False, GET)
- `resultsAPI`ëŠ” í˜„ì¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¯¸ì‚¬ìš©(dead code)ì´ë‚˜ ê²½ë¡œ ì¼ê´€ì„± ìœ ì§€

### ì»¤ë°‹ ë‚´ì—­ (ì„¸ì…˜ 8)

| ë ˆí¬ | ì»¤ë°‹ | ë‚´ìš© |
|------|------|------|
| í”„ë¡ íŠ¸ | `504353b` | fix: apiService.ts validateAccessKey, resultsAPI ê²½ë¡œ ìˆ˜ì • |

---

---

## 2026-02-19 ì „ì²´ ì„¸ì…˜ ì¢…í•© ìš”ì•½

### ì˜¤ëŠ˜ ìˆ˜í–‰í•œ ì‘ì—… (ì„¸ì…˜ 4~8)

| ì„¸ì…˜ | ì‘ì—… | ê²°ê³¼ |
|------|------|------|
| 4 | API ì—°ë™ í†µí•© í…ŒìŠ¤íŠ¸ (ë°±ì—”ë“œ ë²„ê·¸ 4ì¢… ìˆ˜ì •) | âœ… ì™„ë£Œ |
| 5 | í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸ (api.ts ì „ë©´ ìˆ˜ì •) | âœ… ì™„ë£Œ |
| 6 | CORS Render ë°˜ì˜ í™•ì¸ | âœ… ì™„ë£Œ |
| 7 | ì´ë©”ì¼ ì¸ì¦ íë¦„ ê²€í†  ë° ì„¤ì • ì •ë¦¬ | âœ… ì™„ë£Œ |
| 8 | E2E ì „ì²´ íë¦„ í…ŒìŠ¤íŠ¸ 17/17 í†µê³¼ | âœ… ì™„ë£Œ |

### ì˜¤ëŠ˜ ìˆ˜ì •í•œ ë²„ê·¸ ì „ì²´ ëª©ë¡

| # | íŒŒì¼ | ë²„ê·¸ | ìˆ˜ì • ë‚´ìš© |
|---|------|------|-----------|
| 1 | `projects/serializers.py` | `ProjectCreateSerializer` id ëˆ„ë½ | `SerializerMethodField` ì¶”ê°€ |
| 2 | `evaluations/serializers.py` | `PairwiseComparisonSerializer.validate()` PATCH 500 | `.get()` + instance fallback |
| 3 | `evaluations/serializers.py` | `EvaluationCreateSerializer` id ëˆ„ë½ | `UUIDField(read_only=True)` ì¶”ê°€ |
| 4 | `analysis/views.py` | `AnalysisViewSet` 4ê°œ ë©”ì„œë“œ ë¯¸êµ¬í˜„ 500 | `calculate_individual/group/final_priorities/project_summary` êµ¬í˜„ |
| 5 | `analysis/views.py` | ì˜ëª»ëœ UUID â†’ `ValueError` â†’ 500 | `(DoesNotExist, ValueError, Exception)` â†’ 404 |
| 6 | `accounts/views.py` + `urls.py` | `/accounts/me/` 404 | `current_user_profile` FBV + ëª…ì‹œì  URL |
| 7 | `settings.py` | `CORS_ALLOW_ALL_ORIGINS=True` env varë¡œ ëª¨ë“  origin í—ˆìš© | `False` í•˜ë“œì½”ë”© |
| 8 | `settings.py` | `ACCOUNT_EMAIL_VERIFICATION='mandatory'` allauth 500 ìœ ë°œ | `'none'`ìœ¼ë¡œ ìˆ˜ì • |
| 9 | `src/config/api.ts` | ì—”ë“œí¬ì¸íŠ¸ ìƒìˆ˜ 11ê°œ ì˜ëª»ë¨ | ë°±ì—”ë“œ ì‹¤ì œ URLê³¼ ì¼ì¹˜í•˜ë„ë¡ ì „ë©´ ìˆ˜ì • |
| 10 | `src/services/apiService.ts` | `validateAccessKey` 404 ê²½ë¡œ | `by_token/?token=` (GET)ìœ¼ë¡œ ìˆ˜ì • |
| 11 | `src/services/apiService.ts` | `resultsAPI.*` ë¯¸ì¡´ì¬ ê²½ë¡œ | `/api/service/analysis/*` ì‹¤ì œ ê²½ë¡œë¡œ ìˆ˜ì • |

### ì˜¤ëŠ˜ ì»¤ë°‹ ë‚´ì—­ ì „ì²´

#### ë°±ì—”ë“œ (aebonlee/ahp-django-service)

| ì»¤ë°‹ | ë‚´ìš© |
|------|------|
| `caae9a9` | fix: í†µí•© í…ŒìŠ¤íŠ¸ ë²„ê·¸ 3ì¢… ìˆ˜ì • (serializers + analysis views) |
| `533ede7` | fix: /me/ ì—”ë“œí¬ì¸íŠ¸ 404 ìˆ˜ì • |
| `d3cc26b` | fix: EvaluationCreateSerializer id ëˆ„ë½ ìˆ˜ì • |
| `f810099` | security: CORS_ALLOW_ALL_ORIGINS ì°¨ë‹¨ (False í•˜ë“œì½”ë”©) |
| `c960f7e` | fix: AnalysisViewSet UUID ìœ íš¨ì„± ê²€ì¦ 500 â†’ 404 |
| `ed84921` | config: allauth ì´ë©”ì¼ ì¸ì¦ ë¹„í™œì„±í™” (ë² íƒ€ ë‹¨ê³„) |

#### í”„ë¡ íŠ¸ì—”ë“œ (aebonlee/ahp_app)

| ì»¤ë°‹ | ë‚´ìš© |
|------|------|
| `ac28eb2` | fix: api.ts ì „ì²´ ì—”ë“œí¬ì¸íŠ¸ ë°±ì—”ë“œ URLê³¼ ì¼ì¹˜í•˜ë„ë¡ ìˆ˜ì • |
| `504353b` | fix: apiService.ts validateAccessKey, resultsAPI ê²½ë¡œ ìˆ˜ì • |
| `4f3ebfc` | docs: ê°œë°œì¼ì§€ ì„¸ì…˜ 5 ì¶”ê°€ |
| `0c7be8e` | docs: ê°œë°œì¼ì§€ ì„¸ì…˜ 6 ì¶”ê°€ (CORS í™•ì¸) |
| `a3f5bd3` | docs: ê°œë°œì¼ì§€ ì„¸ì…˜ 7 ì¶”ê°€ (ì´ë©”ì¼ ì¸ì¦) |
| `9195247` | docs: ê°œë°œì¼ì§€ ì„¸ì…˜ 8 ì¶”ê°€ (E2E í…ŒìŠ¤íŠ¸) |

### ìµœì¢… ì‹œìŠ¤í…œ ìƒíƒœ (2026-02-19 ê¸°ì¤€)

#### ë°±ì—”ë“œ (https://ahp-django-backend.onrender.com)

| í•­ëª© | ìƒíƒœ |
|------|------|
| ì¸ì¦ (register/login/logout/me) | âœ… ì •ìƒ |
| í”„ë¡œì íŠ¸ CRUD | âœ… ì •ìƒ |
| ê¸°ì¤€(criteria) CRUD | âœ… ì •ìƒ |
| í‰ê°€ ìƒì„± ë° ë¹„êµìŒ ì…ë ¥ | âœ… ì •ìƒ |
| AHP ê³„ì‚° (ê°œì¸/ê·¸ë£¹/ìš”ì•½) | âœ… ì •ìƒ |
| í† í° ê°±ì‹  (rotation) | âœ… ì •ìƒ |
| CORS ë³´ì•ˆ (í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸) | âœ… ì •ìƒ |
| ì´ë©”ì¼ ì¸ì¦ | â¸ ë¹„í™œì„±í™” (ë² íƒ€) |

#### í”„ë¡ íŠ¸ì—”ë“œ (https://aebonlee.github.io/ahp_app)

| í•­ëª© | ìƒíƒœ |
|------|------|
| `api.ts` ì—”ë“œí¬ì¸íŠ¸ ìƒìˆ˜ | âœ… ë°±ì—”ë“œ URLê³¼ ì¼ì¹˜ |
| `authService.ts` ì¸ì¦ íë¦„ | âœ… ì •ìƒ |
| `apiService.ts` í‰ê°€ì/ê²°ê³¼ API | âœ… ìˆ˜ì • ì™„ë£Œ |
| `ahpApiService.ts` | âœ… ì •ìƒ |

---

## ë‚¨ì€ ì‘ì—… (TODO)

### ìš°ì„ ìˆœìœ„ LOW
1. **Render.com PostgreSQL â†’ Neon.tech ì´ì „** ($7/ì›” ì ˆì•½)
2. **ìƒˆ í”„ë¡œë•ì…˜ ë ˆí¬** ìƒì„±

---

---

## ì„¸ì…˜ 9: CRITICAL ë³´ì•ˆ ìˆ˜ì • (exports/workshops AllowAny + í•˜ë“œì½”ë”© ë¹„ë°€ë²ˆí˜¸)

### ë¬¸ì œ ë°œê²¬ ë°°ê²½

ë³´ì•ˆ ê°ì‚¬(ì´ì „ ì„¸ì…˜ Feature Audit)ì—ì„œ ë°œê²¬ëœ CRITICAL ì·¨ì•½ì  2ì¢…:
1. **exports/workshops ViewSet ì „ì²´ `AllowAny`** â€” ë¯¸ì¸ì¦ ì‚¬ìš©ìê°€ ìˆ˜ì¶œ ì´ë ¥, ì›Œí¬ìˆ ì„¸ì…˜ ë“± ëª¨ë“  ë°ì´í„° ì¡°íšŒ/ìˆ˜ì • ê°€ëŠ¥
2. **RoleSwitcher.tsx í•˜ë“œì½”ë”© ë¹„ë°€ë²ˆí˜¸** â€” `'admin123'`ì´ í”„ë¡ íŠ¸ì—”ë“œ ë²ˆë“¤ì— ë…¸ì¶œ â†’ ë¹„ë°€ë²ˆí˜¸ ìš°íšŒ ê°€ëŠ¥

### ìˆ˜ì • 1: exports/workshops AllowAny ì œê±° (ë°±ì—”ë“œ)

**íŒŒì¼**: `apps/exports/views.py` (ì»¤ë°‹ `2bf7ff1`)

| ViewSet | ìˆ˜ì • ì „ | ìˆ˜ì • í›„ |
|---------|---------|---------|
| `ExportTemplateViewSet` | `AllowAny` | `IsAuthenticated` |
| `ExportHistoryViewSet` | `AllowAny` | `IsAuthenticated` |
| `ReportScheduleViewSet` | `AllowAny` | `IsAuthenticated` |
| `ExportJobViewSet` | `AllowAny` | `IsAuthenticated` |

ì¶”ê°€ ìˆ˜ì •:
- `ExportTemplateViewSet.get_queryset()`: ê³µê°œ í…œí”Œë¦¿ OR ë³¸ì¸ ì†Œìœ  í…œí”Œë¦¿ë§Œ ë°˜í™˜
  ```python
  from django.db.models import Q
  return ExportTemplate.objects.filter(
      Q(is_public=True) | Q(created_by=self.request.user)
  ).order_by('-created_at')
  ```
- `ExportHistoryViewSet.get_queryset()`: `exported_by=self.request.user` í•„í„°
- `ReportScheduleViewSet.get_queryset()`: `created_by=self.request.user` í•„í„°
- `perform_create()`: `created_by`/`exported_by` ìë™ í• ë‹¹

**íŒŒì¼**: `apps/workshops/views.py` (ì»¤ë°‹ `2bf7ff1`)

| ì „ëµ | ë‚´ìš© |
|------|------|
| `WorkshopSessionViewSet` | `get_permissions()` ì˜¤ë²„ë¼ì´ë“œ â€” `join` ì•¡ì…˜ë§Œ `AllowAny()`, ë‚˜ë¨¸ì§€ `IsAuthenticated()` |
| `WorkshopParticipantViewSet` | `get_permissions()` â€” `by_token` ì•¡ì…˜ë§Œ `AllowAny()`, ë‚˜ë¨¸ì§€ `IsAuthenticated()` |
| ë‚˜ë¨¸ì§€ 4ê°œ ViewSet | `AllowAny` â†’ `IsAuthenticated` |
| `get_queryset()` (ì „ì²´) | ë¯¸ì¸ì¦ ì‹œ `.none()` ë°˜í™˜, ì¸ì¦ ì‹œ `facilitator=self.request.user` í•„í„° |

> **`join`/`by_token` ì•¡ì…˜ `AllowAny` ìœ ì§€ ì´ìœ **: ì™¸ë¶€ ì°¸ê°€ìê°€ ì›Œí¬ìˆ ì½”ë“œ/ì•¡ì„¸ìŠ¤ í† í°ìœ¼ë¡œ ì°¸ì—¬ ì‹œ JWT ì¸ì¦ ì—†ì´ ì ‘ê·¼í•´ì•¼ í•˜ëŠ” ì •ë‹¹í•œ use case.

### ìˆ˜ì • 2: verify-password ì—”ë“œí¬ì¸íŠ¸ ì‹ ì„¤ (ë°±ì—”ë“œ)

**íŒŒì¼**: `apps/accounts/views.py` + `apps/accounts/urls.py` (ì»¤ë°‹ `2bf7ff1`)

```python
@api_view(['POST'])
@permission_classes([permissions.IsAuthenticated])
def verify_password(request):
    password = request.data.get('password', '').strip()
    if not password:
        return Response({'error': 'ë¹„ë°€ë²ˆí˜¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.'}, status=400)
    if request.user.check_password(password):
        return Response({'valid': True})
    return Response({'valid': False, 'error': 'ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.'}, status=400)
```

ì—”ë“œí¬ì¸íŠ¸: `POST /api/service/accounts/verify-password/`

### ìˆ˜ì • 3: RoleSwitcher.tsx í•˜ë“œì½”ë”© ë¹„ë°€ë²ˆí˜¸ ì œê±° (í”„ë¡ íŠ¸ì—”ë“œ)

**íŒŒì¼**: `src/components/superadmin/RoleSwitcher.tsx` (ì»¤ë°‹ `61e86d3`)

```typescript
// ìˆ˜ì • ì „ (CRITICAL â€” ë²ˆë“¤ì— ë…¸ì¶œ)
if (password === 'admin123') {
  onRoleSwitch(targetRole);
}

// ìˆ˜ì • í›„ (ì‹¤ì œ API ê²€ì¦)
import apiService from '../../services/apiService';
const [isVerifying, setIsVerifying] = useState(false);

const handleConfirmSwitch = async () => {
  setIsVerifying(true);
  try {
    const result = await apiService.post('/api/service/accounts/verify-password/', { password });
    if (result.data && (result.data as any).valid) {
      onRoleSwitch(targetRole);
    } else {
      showActionMessage('error', 'ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }
  } catch {
    showActionMessage('error', 'ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  } finally {
    setIsVerifying(false);
    setPassword('');
  }
};
```

ë²„íŠ¼ ë¡œë”© ìƒíƒœ: `disabled={isVerifying}` + `{isVerifying ? 'í™•ì¸ ì¤‘...' : 'í™•ì¸'}`

### ìˆ˜ì • 4: SystemReset.tsx TODO ì œê±° (í”„ë¡ íŠ¸ì—”ë“œ)

**íŒŒì¼**: `src/components/superadmin/SystemReset.tsx` (ì»¤ë°‹ `61e86d3`)

```typescript
// ìˆ˜ì • ì „
// TODO: ì‹¤ì œ API ì—°ë™
if (password === 'correct') { ... }

// ìˆ˜ì • í›„
const handleFinalReset = async () => {
  setIsVerifying(true);
  try {
    const result = await apiService.post('/api/service/accounts/verify-password/', { password });
    if (result.data && (result.data as any).valid) {
      onReset(resetOptions);
      showActionMessage('success', 'ì‹œìŠ¤í…œ ì´ˆê¸°í™”ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.');
      setConfirmStep(0);
    } else {
      showActionMessage('error', 'ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }
  } catch {
    showActionMessage('error', 'ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  } finally {
    setIsVerifying(false);
  }
};
```

### ì»¤ë°‹ ë‚´ì—­ (ì„¸ì…˜ 9)

| ë ˆí¬ | ì»¤ë°‹ | ë‚´ìš© |
|------|------|------|
| ë°±ì—”ë“œ | `2bf7ff1` | security: fix AllowAny in exports/workshops, add verify-password endpoint |
| í”„ë¡ íŠ¸ | `61e86d3` | security: replace hardcoded admin123 in RoleSwitcher, implement SystemReset password verification |

---

---

## ì„¸ì…˜ 10: ResultsDataManager ì‹¤ì œ API ì—°ë™

### ëª©í‘œ

`ResultsDataManager.tsx`ì˜ ëª¨ë“  í•˜ë“œì½”ë”©/mock ìƒ˜í”Œ ë°ì´í„°ë¥¼ ì‹¤ì œ ë°±ì—”ë“œ AHP ë¶„ì„ APIë¡œ êµì²´.

### ì‹ ê·œ TypeScript ì¸í„°í˜ì´ìŠ¤

```typescript
interface ProjectSummaryResponse {
  project: { id: string; name: string; status: string; ... };
  evaluations: Array<{ id: string; evaluator_name: string; status: string; ... }>;
  criteria: Array<{ id: string; name: string; weight?: number }>;
  completion_rate: number;
}

interface GroupWeightResponse {
  method: string;
  weights: Record<string, number>;
  criteria_names: Record<string, string>;
  participant_count: number;
  consistency_ratio?: number;
}

interface IndividualWeightResponse {
  evaluation_id: string;
  evaluator_name: string;
  weights: Record<string, number>;
  consistency_ratio: number;
  is_consistent: boolean;
}
```

### loadResults() êµ¬í˜„

3ë‹¨ê³„ ë³‘ë ¬/ìˆœì°¨ API í˜¸ì¶œ:

```
1. GET /api/service/analysis/project-summary/?project_id={id}
   â†’ criteria ëª©ë¡, ì™„ë£Œëœ í‰ê°€ ëª©ë¡, ì§„í–‰ë¥ 
2. POST /api/service/analysis/calculate/group/
   â†’ ì „ì²´ ê·¸ë£¹ ê°€ì¤‘ì¹˜ (ê¸°í•˜í‰ê·  ì§‘ê³„)
3. GET /api/service/evaluations/evaluations/?project={id}&status=completed
   POST /api/service/analysis/calculate/individual/ Ã— N (í‰ê°€ìë³„)
   â†’ ê°œì¸ë³„ ê°€ì¤‘ì¹˜ + CR
```

### ëŒ€ì•ˆ ë¶„ì„ íƒ­ ì²˜ë¦¬

ë°±ì—”ë“œ `calculate_group`ì€ ê¸°ì¤€ ê°€ì¤‘ì¹˜ë§Œ ë°˜í™˜í•˜ë©° ëŒ€ì•ˆ ìµœì¢… ì ìˆ˜ ê³„ì‚° ë¯¸êµ¬í˜„.
â†’ ëŒ€ì•ˆ ë¶„ì„ íƒ­ì— "ëŒ€ì•ˆ ë¹„êµ í‰ê°€ê°€ í•„ìš”í•©ë‹ˆë‹¤" ì•ˆë‚´ ë©”ì‹œì§€ë¡œ ì •ì§í•˜ê²Œ í‘œì‹œ:

```tsx
<div className="text-center py-12">
  <p className="text-2xl mb-4">ğŸ“Š</p>
  <h3 className="text-lg font-semibold mb-2">ëŒ€ì•ˆ ë¹„êµ í‰ê°€ê°€ í•„ìš”í•©ë‹ˆë‹¤</h3>
  <p className="text-sm" style={{ color: 'var(--text-muted)' }}>
    ëŒ€ì•ˆ ë¶„ì„ì„ ìœ„í•´ì„œëŠ” ëŒ€ì•ˆ ë¹„êµ í‰ê°€ë¥¼ ë¨¼ì € ì™„ë£Œí•´ì•¼ í•©ë‹ˆë‹¤.
  </p>
</div>
```

### CSV export / HTML ë³´ê³ ì„œ

- CSV: ë°±ì—”ë“œ Excel ì‹œë„ í›„ ë¡œì»¬ CSV fallback
- HTML ë³´ê³ ì„œ: ì‹¤ì œ `ahpResults` ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ë™ì  ìƒì„±

### íƒ€ì… ì•ˆì „ì„±

- `PaginatedResponse<T> | T[]` ì–‘ìª½ ì²˜ë¦¬ â†’ `Array.isArray()` ê°€ë“œ
- Optional chaining ì „ë©´ ì ìš© (`weights?.[key]`, `evaluations?.length`)
- Mock ë°ì´í„° ì „ë©´ ì œê±°

### ì»¤ë°‹ ë‚´ì—­ (ì„¸ì…˜ 10)

| ë ˆí¬ | ì»¤ë°‹ | ë‚´ìš© |
|------|------|------|
| í”„ë¡ íŠ¸ | `06dbf0a` | feat: ResultsDataManager ì‹¤ì œ API ì—°ë™ (mock ë°ì´í„° ì „ë©´ êµì²´) |

---

---

## ì„¸ì…˜ 11: AdminOnlyDashboard ì‹¤ì œ API ì—°ë™

### ëª©í‘œ

`AdminOnlyDashboard.tsx`ì˜ í•˜ë“œì½”ë”©ëœ í†µê³„/ì‚¬ìš©ì/í™œë™ ë°ì´í„°ë¥¼ ì‹¤ì œ APIë¡œ êµì²´.

### ì‹ ê·œ ì¸í„°í˜ì´ìŠ¤

```typescript
interface UserStatsResponse { total_users: number; active_users: number; ... }
interface PaginatedResponse<T> { count: number; results: T[]; next: string | null; previous: string | null; }
interface SystemStats { totalUsers: number; totalProjects: number; activeEvaluations: number; systemHealth: string; }
interface RecentUser { id: string; name: string; email: string; role: string; joinedAt: string; status: string; }
interface ActivityItem { id: string; type: string; user: string; action: string; time: string; }
```

### loadSystemStats() â€” Promise.allSettled ë³‘ë ¬ í˜¸ì¶œ

```typescript
const [usersResult, projectsResult, evalsResult, healthResult] = await Promise.allSettled([
  apiService.get('/api/service/accounts/users/stats/'),
  apiService.get('/api/service/projects/projects/?page_size=1'),
  apiService.get('/api/service/evaluations/evaluations/?status=in_progress&page_size=1'),
  fetch(API_BASE_URL + '/health/').then(r => r.json()),
]);
```

`Promise.allSettled` ì‚¬ìš©ìœ¼ë¡œ ì¼ë¶€ API ì‹¤íŒ¨ ì‹œì—ë„ ë‚˜ë¨¸ì§€ ë°ì´í„° ì •ìƒ í‘œì‹œ.

### loadRecentUsers()

```
GET /api/service/accounts/users/?page_size=5
```

`is_superuser`/`is_staff` boolean â†’ role ë ˆì´ë¸” ë§¤í•‘ (ë°±ì—”ë“œì— custom `role` í•„ë“œ ì—†ìŒ):
```typescript
const role = user.is_superuser ? 'ìŠˆí¼ê´€ë¦¬ì' :
             user.is_staff ? 'ê´€ë¦¬ì' : 'ì‚¬ìš©ì';
```

### loadSystemActivity() â€” í™œë™ ë¡œê·¸ êµ¬ì„±

ì „ìš© audit log ì—”ë“œí¬ì¸íŠ¸ ì—†ìŒ â†’ ìµœê·¼ í”„ë¡œì íŠ¸ + í‰ê°€ ë°ì´í„° ë³‘ë ¬ ì¡°íšŒ í›„ í†µí•©:

```typescript
const [projectsRes, evalsRes] = await Promise.allSettled([
  apiService.get('/api/service/projects/projects/?page_size=5&ordering=-created_at'),
  apiService.get('/api/service/evaluations/evaluations/?page_size=5&ordering=-created_at'),
]);
// ë‘ ëª©ë¡ í•©ì³ì„œ ìµœì‹ ìˆœ ì •ë ¬ â†’ ìƒìœ„ 6ê±´ í‘œì‹œ
```

### formatRelativeTime() â€” ìƒëŒ€ì‹œê°„ í‘œì‹œ

```typescript
const formatRelativeTime = (dateStr: string): string => {
  const diff = Date.now() - new Date(dateStr).getTime();
  const minutes = Math.floor(diff / 60000);
  if (minutes < 60) return `${minutes}ë¶„ ì „`;
  const hours = Math.floor(minutes / 60);
  if (hours < 24) return `${hours}ì‹œê°„ ì „`;
  return `${Math.floor(hours / 24)}ì¼ ì „`;
};
```

### ì¶”ê°€ ê¸°ëŠ¥

- ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ (`ğŸ”„ ìƒˆë¡œê³ ì¹¨`)
- ë¡œë”© ìŠ¤í”¼ë„ˆ (`isLoading` ìƒíƒœ)
- ì˜¤ë¥˜ ì²˜ë¦¬: ê°œë³„ API ì‹¤íŒ¨ ì‹œ í•´ë‹¹ ì¹´ë“œë§Œ ê¸°ë³¸ê°’ í‘œì‹œ

### ì»¤ë°‹ ë‚´ì—­ (ì„¸ì…˜ 11)

| ë ˆí¬ | ì»¤ë°‹ | ë‚´ìš© |
|------|------|------|
| í”„ë¡ íŠ¸ | `c56a609` | feat: AdminOnlyDashboard ì‹¤ì œ API ì—°ë™ (mock ë°ì´í„° ì „ë©´ êµì²´) |

---

---

## ì„¸ì…˜ 9~11 ì¢…í•© ìš”ì•½

### ì´ë²ˆ ì„¸ì…˜ì—ì„œ ì™„ë£Œí•œ ì‘ì—…

| ì„¸ì…˜ | ì‘ì—… | ì£¼ìš” ë‚´ìš© |
|------|------|-----------|
| 9 | CRITICAL ë³´ì•ˆ ìˆ˜ì • | AllowAny ì œê±°(exports/workshops), admin123 í•˜ë“œì½”ë”© ì œê±°, verify-password API ì‹ ì„¤ |
| 10 | ResultsDataManager API ì—°ë™ | mock 3ì¢… â†’ ì‹¤ì œ project-summary/calculate-group/calculate-individual |
| 11 | AdminOnlyDashboard API ì—°ë™ | mock í†µê³„/ì‚¬ìš©ì/í™œë™ â†’ ì‹¤ì œ users/projects/evaluations API, Promise.allSettled |

### ì»¤ë°‹ ëª©ë¡ (ì„¸ì…˜ 9~11)

#### ë°±ì—”ë“œ (aebonlee/ahp-django-service)
| ì»¤ë°‹ | ë‚´ìš© |
|------|------|
| `2bf7ff1` | security: fix AllowAny in exports/workshops, add verify-password endpoint |

#### í”„ë¡ íŠ¸ì—”ë“œ (aebonlee/ahp_app)
| ì»¤ë°‹ | ë‚´ìš© |
|------|------|
| `61e86d3` | security: replace hardcoded admin123, implement SystemReset password verification |
| `06dbf0a` | feat: ResultsDataManager ì‹¤ì œ API ì—°ë™ |
| `c56a609` | feat: AdminOnlyDashboard ì‹¤ì œ API ì—°ë™ |

### ë‚¨ì€ ì‘ì—… (ìš°ì„ ìˆœìœ„ë³„)

#### HIGH
- **WorkshopManagement.tsx** â€” API ì£¼ì„ í•´ì œ ë° ì—°ë™
- **ProjectCompletion.tsx** â€” ì´ë©”ì¼ ë°œì†¡/í”„ë¡œì íŠ¸ ìƒíƒœ ì—…ë°ì´íŠ¸ API ì—°ë™
- **SurveyLinkManager.tsx** â€” API ì—°ë™ìœ¼ë¡œ ë°ì´í„° ì˜ì†ì„± í™•ë³´ (í˜„ì¬ ë¡œì»¬ ìƒíƒœë§Œ)

#### MEDIUM
- **PaymentSystem.tsx** â€” PG ì—°ë™ (ë˜ëŠ” ë¯¸êµ¬í˜„ ì•ˆë‚´ UI)

#### LOW
- Render.com PostgreSQL â†’ Neon.tech ì´ì „ ($7/ì›” ì ˆì•½)
- ìƒˆ í”„ë¡œë•ì…˜ ë ˆí¬ ìƒì„±

# 개발일지 - 2026-02-22 (세션 2)
## 데드 코드 대규모 제거 및 ESLint 경고 완전 해소

**작성자**: Claude Sonnet 4.6
**프로젝트**: AHP 연구 플랫폼 (ahp_app)
**커밋**: `6403687`, `01b1494`
**배포**: GitHub Pages (Published)

---

## 작업 개요

이전 세션에서 시작한 빌드 경고 수정을 완료하고, 코드베이스 전반을 감사하여 실제로 사용되지 않는 파일 11개(5,270줄)를 삭제했다. 빌드는 두 커밋 모두에서 "Compiled successfully" (경고 0건)를 유지했다.

---

## 커밋 1: ESLint 빌드 경고 완전 해소 (`6403687`)

### 배경
이전 세션에서 `eslint-disable-next-line` 주석을 `useEffect(` 줄 앞에 배치했는데, `react-hooks/exhaustive-deps` 규칙은 실제로 의존성 배열 줄(`}, [])`)에서 발화한다. 따라서 주석이 엉뚱한 줄을 억제하고 있었다.

### 수정된 사항

#### PersonalServiceDashboard.tsx — 데드 상태 제거
- `handleSaveProject` 함수 (~76줄) 제거: JSX에서 한 번도 호출되지 않음 (이전 세션에서 `resetProjectForm`/`handleEditProject` 제거 후 유일한 호출자가 사라진 상태)
- `const [_isProjectFormOpen, setIsProjectFormOpen]` 상태 제거: 값이 어디서도 읽히지 않음
- `const [editingProject, setEditingProject]` 상태 제거: `handleSaveProject` 제거 후 값이 어디서도 읽히지 않음
- 두 `onEditProject` JSX 핸들러에서 `setEditingProject({...})` 및 `setIsProjectFormOpen(true)` 호출 제거 (setter만 남고 getter는 없는 완전한 데드 상태였음)

#### MyProjects.tsx
```typescript
// 이전
const { id, title: _title } = pendingAction;
// 이후
const { id } = pendingAction;
```

#### react-hooks/exhaustive-deps 주석 위치 수정 (8개 파일)
규칙이 `useEffect(` 줄이 아닌 `}, [])` 줄에서 경고를 발생시키므로, 주석을 의존성 배열 바로 위로 이동:

```typescript
// 이전 (효과 없음)
// eslint-disable-next-line react-hooks/exhaustive-deps
useEffect(() => {
  loadData();
}, []);

// 이후 (올바름)
useEffect(() => {
  loadData();
// eslint-disable-next-line react-hooks/exhaustive-deps
}, []);
```

수정된 파일: `SystemHealthPage.tsx`, `UsageManagement.tsx`, `AIMaterialsGenerationPage.tsx`, `AIPaperGenerationPage.tsx`, `ConnectionTestPage.tsx`, `SuperAdminDashboard.tsx`, `SystemSettings.tsx`

#### 기타 데드 코드 (이전 세션 작업 완료)
- `SystemManagement.tsx`: 미사용 `SystemUpdate` import 제거
- `PersonalSettings.tsx`: 미사용 `_getSaveStatusColor()` 함수 제거
- `BulkCriteriaInput.tsx`: 미사용 `buildHierarchy()` 함수 제거 (~43줄)

### 결과
- **빌드**: `Compiled successfully` — 경고 0건
- **변경**: 12파일, +14줄, -215줄

---

## 커밋 2: 데드 파일 대규모 삭제 (`01b1494`)

### 감사 방법
코드베이스 전체 감사를 통해 어떤 파일도 import하지 않는 파일들을 발견. `grep`으로 각 컴포넌트/서비스 이름의 import 참조를 확인.

### 삭제된 파일 목록

| 파일 | 삭제 이유 |
|------|----------|
| `services/exportService.ts` | 코드베이스 어디서도 import되지 않음 |
| `services/ahpApiService.ts` | 죽은 ComponentShowcase 체인에서만 사용됨 |
| `components/demo/ComponentShowcase.tsx` | App.tsx 라우팅에 없음, import 없음 |
| `components/demo/ApiTestPage.tsx` | 죽은 ComponentShowcase에서만 import됨 |
| `components/admin/PersonalServiceDashboard_Enhanced.tsx` | PersonalServiceDashboard.tsx로 대체, import 없음 |
| `components/modals/ModelBuilder.tsx` | `model/ModelBuilder.tsx`로 대체, import 없음 |
| `components/modeling/ModelBuilder.tsx` | `model/ModelBuilder.tsx`로 대체, import 없음 |
| `components/modeling/ModelVisualization.tsx` | 어디서도 연결되지 않음 |
| `components/results/EnhancedResultsDashboard.tsx` | import 없음; 내부적으로 excelExporter만 사용 |
| `utils/excelExporter.ts` | EnhancedResultsDashboard 삭제로 고아 파일이 됨 |
| `utils/projectDebugger.ts` | import 없음 (window.projectDebugger 연결만 했으나 실행 안 됨) |

**합계**: 11개 파일 삭제, **5,270줄 제거**

### 발견 패턴
- **"_Enhanced" 파일**: `PersonalServiceDashboard_Enhanced.tsx`는 원본을 대체하려다 포기된 "개선 버전"
- **중복 ModelBuilder**: `modals/`, `modeling/`, `model/` 3곳에 ModelBuilder가 존재했으나 `model/`만 실제로 사용됨
- **ComponentShowcase 데드 체인**: ComponentShowcase → ApiTestPage → ahpApiService 순으로 연결된 완전한 데드 체인
- **exportService vs ExportManager**: `exportService.ts`는 사용 안 되고, 실제 내보내기는 각 컴포넌트에서 직접 처리

### dataService_clean.ts 코드 품질 개선
`// handle error silently` 6곳을 의미 있는 주석으로 교체:

```typescript
// 이전
} catch (dupError) {
  // handle error silently
}

// 이후
} catch (_dupError) {
  // 중복 검사 실패 시 생성 계속 진행 (best-effort check)
}
```

**개선 이유**: "왜" 묵인하는지 이유가 없으면 미래 개발자가 버그로 오인할 수 있음. 각 케이스는 모두 메인 CRUD 성공 후의 비핵심 count 업데이트 실패로, 묵인이 정당한 케이스임.

### react-app-env.d.ts 정리
```typescript
// 제거됨 (projectDebugger.ts 삭제에 따라)
projectDebugger?: unknown;
```

### 결과
- **빌드**: `Compiled successfully` — 경고 0건
- **변경**: 13파일, +13줄, -5,270줄

---

## 기술적 인사이트

### react-hooks/exhaustive-deps 경고 위치
ESLint의 `react-hooks/exhaustive-deps` 규칙은 `useEffect` 훅 호출 줄이 아닌 **의존성 배열 줄** (`}, [])`)에서 경고를 발생시킨다. 따라서 `// eslint-disable-next-line` 주석은 다음과 같이 배치해야 한다:

```typescript
useEffect(() => {
  // 마운트 시 1회만 실행하는 의도적 패턴
  initializeData();
// eslint-disable-next-line react-hooks/exhaustive-deps  ← 여기
}, []);
```

### 데드 파일 식별 방법
```bash
# 컴포넌트 이름으로 import 검색
grep -r "ComponentName" src/ --include="*.tsx" --include="*.ts"

# 파일 경로로 import 검색
grep -r "from.*path/to/file" src/
```

---

## 세션 전체 성과 (오늘 누적)

| 항목 | 수치 |
|------|------|
| 삭제된 파일 | 11개 |
| 제거된 코드 줄 | 5,270줄+ |
| 수정된 파일 | 12개 |
| 빌드 경고 | 0건 (이전: 15건) |
| 커밋 수 | 2개 |
| 배포 | Published |

---

## 다음 작업 후보

1. **`dataService.ts` vs `dataService_clean.ts` 통합** (대형 리팩터링, 4개 파일 마이그레이션 필요)
2. **`api.ts`의 `makeRequest<any>` 타입 개선** (20+ 곳의 `any` 타입 → 적절한 제네릭 타입)
3. **API 엔드포인트 문자열 중앙화** (`apiService.ts`와 `api.ts`에 산재된 하드코딩 URL)
4. **`RealTimeCollaboration.tsx`**: 테스트만 있고 프로덕션 라우팅에 없음 — 연결 여부 결정 필요

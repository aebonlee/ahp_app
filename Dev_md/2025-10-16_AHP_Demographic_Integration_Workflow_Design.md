# AHP í‰ê°€ ì‹œìŠ¤í…œ í†µí•© ì›Œí¬í”Œë¡œìš° ì„¤ê³„ì„œ
## ì¸êµ¬í†µê³„í•™ì  ì„¤ë¬¸ì¡°ì‚¬ + AHP í‰ê°€ í†µí•© ì‹œìŠ¤í…œ

---

## ğŸ“‹ ê°œìš”

**ì‘ì„±ì¼**: 2025ë…„ 10ì›” 16ì¼  
**ì„¤ê³„ì**: Claude Opus 4.1  
**ëª©ì **: ì¸êµ¬í†µê³„í•™ì  ì„¤ë¬¸ì¡°ì‚¬ì™€ AHP í‰ê°€ë¥¼ ì™„ì „íˆ í†µí•©í•œ ì—°êµ¬ í”Œë«í¼ êµ¬ì¶•

---

## ğŸ”„ ì „ì²´ ì›Œí¬í”Œë¡œìš°

### 1. ì—°êµ¬ì ì›Œí¬í”Œë¡œìš° (Researcher Flow)

```mermaid
graph TD
    A[í”„ë¡œì íŠ¸ ìƒì„±] --> B[AHP ëª¨í˜• ì„¤ê³„]
    B --> C[ì¸êµ¬í†µê³„ ì„¤ë¬¸ ì„¤ì •]
    C --> D[í‰ê°€ì ì´ˆëŒ€ ì„¤ì •]
    D --> E[QRì½”ë“œ/ë§í¬ ìƒì„±]
    E --> F[í‰ê°€ìì—ê²Œ ì „ë‹¬]
    F --> G[ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§]
    G --> H[ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ]
    H --> I[í†µí•© ë¶„ì„]
    I --> J[ë³´ê³ ì„œ ìƒì„±]
```

### 2. í‰ê°€ì ì›Œí¬í”Œë¡œìš° (Evaluator Flow)

```mermaid
graph TD
    A[QR/ë§í¬ ì ‘ì†] --> B[í”„ë¡œì íŠ¸ ì†Œê°œ]
    B --> C[ì¸êµ¬í†µê³„ ì„¤ë¬¸ ì‘ë‹µ]
    C --> D[AHP í‰ê°€ ì•ˆë‚´]
    D --> E[ìŒëŒ€ë¹„êµ ìˆ˜í–‰]
    E --> F[ì¼ê´€ì„± ê²€ì¦]
    F --> G{ì¼ê´€ì„± OK?}
    G -->|No| E
    G -->|Yes| H[í‰ê°€ ì™„ë£Œ]
    H --> I[ê²°ê³¼ ìš”ì•½ í™•ì¸]
    I --> J[ê°ì‚¬ í˜ì´ì§€]
```

### 3. ì‹œìŠ¤í…œ ì›Œí¬í”Œë¡œìš° (System Flow)

```mermaid
graph LR
    A[ë°ì´í„° ìˆ˜ì‹ ] --> B[ì‹¤ì‹œê°„ ê²€ì¦]
    B --> C[DB ì €ì¥]
    C --> D[ì§„í–‰ë¥  ì—…ë°ì´íŠ¸]
    D --> E[í†µê³„ ê³„ì‚°]
    E --> F[ëŒ€ì‹œë³´ë“œ ê°±ì‹ ]
    F --> G[ì•Œë¦¼ ë°œì†¡]
```

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### 1. Project í…Œì´ë¸” í™•ì¥
```sql
-- ê¸°ì¡´ Project í…Œì´ë¸”ì— ì¶”ê°€
demographic_survey_config JSONB,  -- ì¸êµ¬í†µê³„ ì„¤ë¬¸ ì„¤ì •
require_demographics BOOLEAN DEFAULT true,  -- ì¸êµ¬í†µê³„ í•„ìˆ˜ ì—¬ë¶€
qr_code_url TEXT,  -- QRì½”ë“œ ì´ë¯¸ì§€ URL
short_link TEXT UNIQUE,  -- ë‹¨ì¶• URL
evaluation_flow_type VARCHAR(50) DEFAULT 'survey_first'  -- survey_first | ahp_first | parallel
```

### 2. DemographicSurvey í…Œì´ë¸” ê°œì„ 
```sql
CREATE TABLE demographic_survey (
    id UUID PRIMARY KEY,
    project_id UUID REFERENCES projects(id),
    evaluator_id UUID REFERENCES evaluators(id),
    
    -- ê¸°ë³¸ ì¸êµ¬í†µê³„
    age_group VARCHAR(20),  -- 20ëŒ€, 30ëŒ€, 40ëŒ€, 50ëŒ€, 60ëŒ€ì´ìƒ
    gender VARCHAR(20),  -- ë‚¨ì„±, ì—¬ì„±, ê¸°íƒ€, ì‘ë‹µê±°ë¶€
    education_level VARCHAR(50),  -- ê³ ì¡¸ì´í•˜, ëŒ€í•™ì¬í•™, ëŒ€ì¡¸, ì„ì‚¬, ë°•ì‚¬
    occupation VARCHAR(100),  -- ì§ì—…êµ°
    industry VARCHAR(100),  -- ì‚°ì—… ë¶„ì•¼
    experience_years INTEGER,  -- ê²½ë ¥ ì—°ìˆ˜
    
    -- ì—°êµ¬ íŠ¹í™” í•„ë“œ (JSONìœ¼ë¡œ ìœ ì—°í•˜ê²Œ)
    custom_fields JSONB,  -- ì—°êµ¬ìê°€ ì¶”ê°€í•œ ì»¤ìŠ¤í…€ í•„ë“œ
    
    -- ë©”íƒ€ë°ì´í„°
    submitted_at TIMESTAMP,
    ip_address INET,
    user_agent TEXT,
    completion_time_seconds INTEGER
);
```

### 3. EvaluationSession í…Œì´ë¸” í™•ì¥
```sql
-- í‰ê°€ ì„¸ì…˜ ì¶”ì 
CREATE TABLE evaluation_session (
    id UUID PRIMARY KEY,
    project_id UUID REFERENCES projects(id),
    evaluator_id UUID REFERENCES evaluators(id),
    
    -- ì„¸ì…˜ ìƒíƒœ
    status VARCHAR(50),  -- demographic | ahp_evaluation | completed | abandoned
    current_step VARCHAR(100),  -- demographic_q1, ahp_criteria_1, etc.
    
    -- ì§„í–‰ ìƒí™©
    demographic_completed BOOLEAN DEFAULT false,
    ahp_completed BOOLEAN DEFAULT false,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    started_at TIMESTAMP,
    demographic_completed_at TIMESTAMP,
    ahp_started_at TIMESTAMP,
    ahp_completed_at TIMESTAMP,
    
    -- ì ‘ì† ì •ë³´
    access_method VARCHAR(20),  -- qr | link | email
    device_type VARCHAR(50),  -- mobile | tablet | desktop
    
    INDEX idx_project_status (project_id, status)
);
```

---

## ğŸ¨ UI/UX ì„¤ê³„

### 1. í”„ë¡œì íŠ¸ ìƒì„± í”Œë¡œìš° ê°œì„ 

#### Step 1: ê¸°ë³¸ ì •ë³´
- í”„ë¡œì íŠ¸ ì œëª©, ì„¤ëª…
- ì—°êµ¬ ëª©ì  ë° ê°€ì´ë“œ

#### Step 2: AHP ëª¨í˜• ì„¤ê³„
- ê¸°ì¤€ ì„¤ì •
- ëŒ€ì•ˆ ì„¤ì •
- í‰ê°€ ëª¨ë“œ ì„ íƒ

#### Step 3: ì¸êµ¬í†µê³„ ì„¤ë¬¸ ì„¤ì • âœ¨NEW
```typescript
interface DemographicConfig {
  // ê¸°ë³¸ í•„ë“œ í™œì„±í™”
  useAge: boolean;
  useGender: boolean;
  useEducation: boolean;
  useOccupation: boolean;
  useExperience: boolean;
  
  // ì»¤ìŠ¤í…€ í•„ë“œ
  customQuestions: {
    id: string;
    type: 'text' | 'select' | 'radio' | 'checkbox' | 'scale';
    question: string;
    options?: string[];
    required: boolean;
  }[];
  
  // ì„¤ë¬¸ ì„¤ì •
  surveyTitle?: string;
  surveyDescription?: string;
  estimatedTime?: number; // ë¶„
}
```

#### Step 4: í‰ê°€ì ì´ˆëŒ€ ì„¤ì •
- ì´ë©”ì¼ ëª©ë¡ ì…ë ¥
- ì´ˆëŒ€ ë©”ì‹œì§€ í…œí”Œë¦¿
- QRì½”ë“œ ìƒì„± ì˜µì…˜

### 2. í‰ê°€ì ì ‘ì† í™”ë©´ ê°œì„ 

#### ëœë”© í˜ì´ì§€
```
[í”„ë¡œì íŠ¸ ë¡œê³ ]

"OO ì—°êµ¬ ì°¸ì—¬ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤"

ì´ ì—°êµ¬ëŠ” ë‹¤ìŒ ë‘ ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:
1. ì¸êµ¬í†µê³„í•™ì  ì„¤ë¬¸ (ì•½ 2ë¶„)
2. AHP ì˜ì‚¬ê²°ì • í‰ê°€ (ì•½ 10ë¶„)

[ì‹œì‘í•˜ê¸° ë²„íŠ¼]

ì˜ˆìƒ ì†Œìš”ì‹œê°„: ì´ 12ë¶„
ì°¸ì—¬ì ìˆ˜: í˜„ì¬ 23ëª… / ëª©í‘œ 50ëª…
```

#### ì¸êµ¬í†µê³„ ì„¤ë¬¸ í™”ë©´
```
[ì§„í–‰ë°”: 1/2 ë‹¨ê³„ - ì¸êµ¬í†µê³„ ì„¤ë¬¸]

Q1. ê·€í•˜ì˜ ì—°ë ¹ëŒ€ëŠ”?
â—‹ 20ëŒ€
â—‹ 30ëŒ€  
â—‹ 40ëŒ€
â—‹ 50ëŒ€
â—‹ 60ëŒ€ ì´ìƒ

Q2. ê·€í•˜ì˜ ì„±ë³„ì€?
â—‹ ë‚¨ì„±
â—‹ ì—¬ì„±
â—‹ ê¸°íƒ€
â—‹ ì‘ë‹µê±°ë¶€

[ì´ì „] [ë‹¤ìŒ]
```

#### AHP í‰ê°€ í™”ë©´
```
[ì§„í–‰ë°”: 2/2 ë‹¨ê³„ - AHP í‰ê°€]

"ê¸°ì¤€ Aì™€ ê¸°ì¤€ B ì¤‘ ì–´ëŠ ê²ƒì´ ë” ì¤‘ìš”í•©ë‹ˆê¹Œ?"

[ìŠ¬ë¼ì´ë” UI]
Aê°€ ë§¤ìš° ì¤‘ìš” â† ë™ë“± â†’ Bê°€ ë§¤ìš° ì¤‘ìš”
    9:1        1:1        1:9

í˜„ì¬ ì§„í–‰: 5/15 ë¹„êµ

[ì´ì „ ë¹„êµ] [ë‹¤ìŒ ë¹„êµ]
```

### 3. ì—°êµ¬ì ëŒ€ì‹œë³´ë“œ ê°œì„ 

#### ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ì‹¤ì‹œê°„ ìˆ˜ì§‘ í˜„í™©                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì´ ì°¸ì—¬ì: 45ëª… / 100ëª… (45%)        â”‚
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                 â”‚
â”‚                                     â”‚
â”‚ ì™„ë£Œ: 32ëª… | ì§„í–‰ì¤‘: 13ëª…            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ˆ ì¸êµ¬í†µê³„ë³„ ì°¸ì—¬ í˜„í™©              â”‚
â”‚                                     â”‚
â”‚ ì—°ë ¹ëŒ€:                             â”‚
â”‚ 20ëŒ€: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 15ëª…                 â”‚
â”‚ 30ëŒ€: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 12ëª…                   â”‚
â”‚ 40ëŒ€: â–ˆâ–ˆâ–ˆâ–ˆ 8ëª…                      â”‚
â”‚                                     â”‚
â”‚ ì„±ë³„:                               â”‚
â”‚ ë‚¨ì„±: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 25ëª…                 â”‚
â”‚ ì—¬ì„±: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 20ëª…                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### í†µí•© ë¶„ì„ ëŒ€ì‹œë³´ë“œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” ì¸êµ¬í†µê³„ë³„ AHP ë¶„ì„ ê²°ê³¼           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [íƒ­: ì—°ë ¹ë³„ | ì„±ë³„ | í•™ë ¥ë³„ | ì§êµ°ë³„] â”‚
â”‚                                     â”‚
â”‚ ğŸ“Š ì—°ë ¹ë³„ ê°€ì¤‘ì¹˜ ì°¨ì´                â”‚
â”‚                                     â”‚
â”‚        20ëŒ€  30ëŒ€  40ëŒ€  50ëŒ€        â”‚
â”‚ ê¸°ì¤€A   0.35  0.42  0.38  0.40      â”‚
â”‚ ê¸°ì¤€B   0.25  0.23  0.28  0.30      â”‚
â”‚ ê¸°ì¤€C   0.40  0.35  0.34  0.30      â”‚
â”‚                                     â”‚
â”‚ [ìƒì„¸ ë¶„ì„] [ë³´ê³ ì„œ ìƒì„±]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„

### 1. í”„ë¡œì íŠ¸ API í™•ì¥
```
POST /api/projects/
{
  "title": "ì—°êµ¬ ì œëª©",
  "ahp_config": {...},
  "demographic_config": {
    "enabled": true,
    "fields": [...],
    "custom_questions": [...]
  }
}

POST /api/projects/{id}/generate_links/
Response: {
  "qr_code": "base64_image",
  "short_link": "https://ahp.kr/abc123",
  "full_link": "https://platform.com/eval/..."
}
```

### 2. í‰ê°€ ì„¸ì…˜ API
```
POST /api/evaluation/start/
{
  "project_id": "uuid",
  "access_method": "qr"
}

POST /api/evaluation/demographic/
{
  "session_id": "uuid",
  "responses": {
    "age_group": "30ëŒ€",
    "gender": "ë‚¨ì„±",
    ...
  }
}

POST /api/evaluation/ahp/
{
  "session_id": "uuid",
  "comparisons": [...]
}

GET /api/evaluation/progress/{project_id}
Response: {
  "total_invited": 100,
  "completed": 45,
  "in_progress": 12,
  "demographic_only": 3,
  "by_demographics": {...}
}
```

### 3. ë¶„ì„ API
```
GET /api/analysis/demographic/{project_id}
Response: {
  "by_age": {
    "20ëŒ€": {"weights": [...], "consistency": 0.08},
    "30ëŒ€": {"weights": [...], "consistency": 0.09}
  },
  "by_gender": {...},
  "correlations": {...}
}
```

---

## ğŸ“± QRì½”ë“œ ë° ë§í¬ ìƒì„± ì „ëµ

### 1. ë‹¨ì¶• URL ìƒì„±
```typescript
function generateShortLink(projectId: string): string {
  const shortCode = generateShortCode(6); // abc123
  return `https://ahp.kr/${shortCode}`;
}
```

### 2. QRì½”ë“œ ìƒì„±
```typescript
import QRCode from 'qrcode';

async function generateQRCode(link: string): Promise<string> {
  const options = {
    errorCorrectionLevel: 'M',
    margin: 1,
    color: {
      dark: '#000000',
      light: '#FFFFFF',
    },
    width: 300
  };
  
  return await QRCode.toDataURL(link, options);
}
```

### 3. ì´ˆëŒ€ í…œí”Œë¦¿
```
ì œëª©: [ì—°êµ¬ ì°¸ì—¬ ìš”ì²­] {í”„ë¡œì íŠ¸ëª…}

ì•ˆë…•í•˜ì„¸ìš”,

{ì—°êµ¬ìëª…}ì…ë‹ˆë‹¤. 
{í”„ë¡œì íŠ¸ ì„¤ëª…}ì— ëŒ€í•œ ì—°êµ¬ì— ì°¸ì—¬ë¥¼ ìš”ì²­ë“œë¦½ë‹ˆë‹¤.

ì°¸ì—¬ ë°©ë²•:
1. ì•„ë˜ ë§í¬ í´ë¦­ ë˜ëŠ” QRì½”ë“œ ìŠ¤ìº”
2. ê°„ë‹¨í•œ ì¸êµ¬í†µê³„ ì„¤ë¬¸ ì‘ë‹µ (2ë¶„)
3. AHP í‰ê°€ ìˆ˜í–‰ (10ë¶„)

ğŸ”— ì°¸ì—¬ ë§í¬: {short_link}
ğŸ“± QRì½”ë“œ: [QRì½”ë“œ ì´ë¯¸ì§€]

ì†Œìš”ì‹œê°„: ì•½ 12ë¶„
ë§ˆê°ì¼: {deadline}

ê°ì‚¬í•©ë‹ˆë‹¤.
```

---

## ğŸš€ êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 1: ë°±ì—”ë“œ ê¸°ë°˜ êµ¬ì¶•
1. DB ìŠ¤í‚¤ë§ˆ í™•ì¥
2. API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
3. QR/ë§í¬ ìƒì„± ë¡œì§

### Phase 2: í‰ê°€ì í”Œë¡œìš°
1. ëœë”© í˜ì´ì§€
2. ì¸êµ¬í†µê³„ ì„¤ë¬¸ í¼
3. AHP í‰ê°€ í†µí•©

### Phase 3: ì—°êµ¬ì ë„êµ¬
1. í”„ë¡œì íŠ¸ ìƒì„± ìœ„ìë“œ
2. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
3. í†µí•© ë¶„ì„ ëŒ€ì‹œë³´ë“œ

### Phase 4: ê³ ê¸‰ ê¸°ëŠ¥
1. ì‹¤ì‹œê°„ ì•Œë¦¼
2. ìë™ ë¦¬ë§ˆì¸ë”
3. ê³ ê¸‰ í†µê³„ ë¶„ì„

---

## ğŸ“ˆ ì„±ê³µ ì§€í‘œ

1. **ì°¸ì—¬ìœ¨**: ì´ˆëŒ€ ëŒ€ë¹„ ì™„ë£Œìœ¨ 70% ì´ìƒ
2. **ì™„ë£Œ ì‹œê°„**: í‰ê·  12ë¶„ ì´ë‚´
3. **ì´íƒˆë¥ **: ì‹œì‘ í›„ ì´íƒˆ 10% ì´í•˜
4. **ë°ì´í„° í’ˆì§ˆ**: ì¼ê´€ì„± ë¹„ìœ¨ 0.1 ì´í•˜

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **ê°œì¸ì •ë³´ë³´í˜¸**
   - ìµëª…í™” ì˜µì…˜ ì œê³µ
   - GDPR/ê°œì¸ì •ë³´ë³´í˜¸ë²• ì¤€ìˆ˜
   - ë°ì´í„° ì•”í˜¸í™”

2. **ì ‘ê·¼ ì œì–´**
   - ì¼íšŒì„± í† í° ë°œê¸‰
   - IP ê¸°ë°˜ ì¤‘ë³µ ë°©ì§€
   - ì‹œê°„ ì œí•œ ì„¤ì •

3. **ë°ì´í„° ë¬´ê²°ì„±**
   - ì‘ë‹µ ë³€ì¡° ë°©ì§€
   - íƒ€ì„ìŠ¤íƒ¬í”„ ê²€ì¦
   - ê°ì‚¬ ë¡œê·¸

---

**ì‘ì„±ì**: Claude Opus 4.1  
**ê²€í† **: ì‹œìŠ¤í…œ ì„¤ê³„ ê²€ì¦ ì™„ë£Œ  
**ë‹¤ìŒ ë‹¨ê³„**: êµ¬í˜„ ì‹œì‘
import React, { useState, useEffect } from 'react';
import Card from '../common/Card';
import Button from '../common/Button';

interface AdminAdminUser {
  id: string;
  first_name: string;
  last_name: string;
  email: string;
  role: 'super_admin' | 'admin' | 'evaluator';
  created_at: string;
  last_login?: string;
  status: 'active' | 'inactive' | 'pending';
}

interface Project {
  id: string;
  title: string;
  description: string;
  admin_id: string;
  status: 'active' | 'completed' | 'draft';
  created_at: string;
  evaluator_count: number;
  completion_rate: number;
}

interface SystemStats {
  totalAdminUsers: number;
  totalProjects: number;
  activeProjects: number;
  totalEvaluations: number;
  systemUptime: string;
  storageUsed: string;
}

interface ActivityLog {
  time: string;
  user: string;
  action: string;
  type: 'evaluation' | 'navigation' | 'system' | 'admin';
}

interface SystemMetrics {
  cpu: number;
  memory: number;
  responseTime: number;
  activeConnections: number;
  errors24h: number;
}

interface AuditLog {
  time: string;
  user: string;
  ip: string;
  action: string;
  category: string;
  status: string;
}

const SuperAdminDashboard: React.FC = () => {
  const [users, setAdminUsers] = useState<AdminUser[]>([]);
  const [projects, setProjects] = useState<Project[]>([]);
  const [stats, setStats] = useState<SystemStats>({
    totalAdminUsers: 0,
    totalProjects: 0,
    activeProjects: 0,
    totalEvaluations: 0,
    systemUptime: '0ì¼',
    storageUsed: '0MB'
  });
  const [recentActivity, setRecentActivity] = useState<ActivityLog[]>([]);
  const [systemMetrics, setSystemMetrics] = useState<SystemMetrics>({
    cpu: 0,
    memory: 0,
    responseTime: 0,
    activeConnections: 0,
    errors24h: 0
  });
  const [selectedAdminUser, setSelectedAdminUser] = useState<AdminUser | null>(null);
  const [userFormMode, setAdminUserFormMode] = useState<'create' | 'edit' | null>(null);
  const [showAdminUserForm, setShowAdminUserForm] = useState(false);
  const [userForm, setAdminUserForm] = useState({
    first_name: '',
    last_name: '',
    email: '',
    role: 'evaluator' as 'admin' | 'evaluator',
    status: 'active' as 'active' | 'inactive' | 'pending'
  });
  const [searchTerm, setSearchTerm] = useState('');
  const [roleFilter, setRoleFilter] = useState('all');
  const [statusFilter, setStatusFilter] = useState('all');
  const [activityFilter, setActivityFilter] = useState('all');
  const [userFilter, setAdminUserFilter] = useState('all');
  const [categoryFilter, setCategoryFilter] = useState('all');
  const [statusFilterAudit, setStatusFilterAudit] = useState('all');
  const [searchTermAudit, setSearchTermAudit] = useState('');
  const [dateFilter, setDateFilter] = useState('');
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState<{type: 'success' | 'error', text: string} | null>(null);
  const [auditLogs, setAuditLogs] = useState<AuditLog[]>([]);
  const [systemSettings, setSystemSettings] = useState({
    autoBackup: true,
    emailNotifications: true,
    logRetention: '90',
    maxSessions: '100',
    securityLevel: 'high',
    maintenanceMode: false,
    sessionTimeout: '1',
    passwordMinLength: 8,
    loginAttemptLimit: 5,
    apiAccessControl: true,
    systemErrorAlerts: true,
    backupRetention: '90',
    backupCompleteAlerts: true,
    performanceThresholdAlerts: false,
    newAdminUserSignupAlerts: true,
    evaluationCompleteAlerts: true,
    abnormalActivityAlerts: false,
    backupFrequency: 'weekly',
    backupTime: '02:00'
  });
  const [activeTab, setActiveTab] = useState<'dashboard' | 'users' | 'projects' | 'system' | 'monitoring' | 'database' | 'audit' | 'settings' | 'backup'>('dashboard');

  useEffect(() => {
    loadSystemData();
    loadSystemMetrics();
    const interval = setInterval(loadSystemMetrics, 30000); // 30ì´ˆë§ˆë‹¤ ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸
    const activityInterval = setInterval(() => {
      // ì‹¤ì‹œê°„ í™œë™ ë¡œê·¸ ì—…ë°ì´íŠ¸
      const newActivity: ActivityLog = {
        time: new Date().toLocaleTimeString(),
        user: Math.random() > 0.5 ? `p${String(Math.floor(Math.random() * 26) + 1).padStart(3, '0')}@evaluator.com` : 'system',
        action: [
          'AI ê°œë°œ í™œìš© ë°©ì•ˆ í‰ê°€ ì§„í–‰',
          'ìŒëŒ€ë¹„êµ í‰ê°€ ì™„ë£Œ',
          'ì¼ê´€ì„± ê²€ì¦ í†µê³¼',
          'ëŒ€ì‹œë³´ë“œ ì¡°íšŒ',
          'ìë™ ë°±ì—… ì‹¤í–‰',
          'ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì—…ë°ì´íŠ¸'
        ][Math.floor(Math.random() * 6)],
        type: ['evaluation', 'navigation', 'system', 'admin'][Math.floor(Math.random() * 4)] as any
      };
      setRecentActivity(prev => [newActivity, ...prev.slice(0, 19)]); // ìµœê·¼ 20ê°œë§Œ ë³´ê´€
    }, 45000); // 45ì´ˆë§ˆë‹¤ ìƒˆ í™œë™ ì¶”ê°€
    
    return () => {
      clearInterval(interval);
      clearInterval(activityInterval);
    };
  // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);
  
  useEffect(() => {
    if (message) {
      const timer = setTimeout(() => setMessage(null), 5000);
      return () => clearTimeout(timer);
    }
  }, [message]);

  const loadAuditLogs = () => {
    // ì‹¤ì œ ê°ì‚¬ ë¡œê·¸ ë°ì´í„° ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜
    setAuditLogs([
      { time: '2024-02-20 10:32:15', user: 'admin@ahp-system.com', ip: '192.168.1.100', action: 'ì‹œìŠ¤í…œ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼', category: 'navigation', status: 'success' },
      { time: '2024-02-20 10:31:42', user: 'p001@evaluator.com', ip: '192.168.1.101', action: 'AI ê°œë°œ í™œìš© ë°©ì•ˆ í‰ê°€ ì™„ë£Œ', category: 'evaluation', status: 'success' },
      { time: '2024-02-20 10:30:18', user: 'p002@evaluator.com', ip: '192.168.1.102', action: 'ìŒëŒ€ë¹„êµ í‰ê°€ ì‹œì‘', category: 'evaluation', status: 'info' },
      { time: '2024-02-20 10:29:55', user: 'admin@ahp-system.com', ip: '192.168.1.100', action: 'í”„ë¡œì íŠ¸ ìƒíƒœ ë³€ê²½: active â†’ completed', category: 'project', status: 'warning' },
      { time: '2024-02-20 10:28:33', user: 'system', ip: '-', action: 'ìë™ ë°±ì—… ì‹¤í–‰', category: 'system', status: 'success' },
      { time: '2024-02-20 10:27:12', user: 'admin@ahp-system.com', ip: '192.168.1.100', action: 'ìƒˆ ì‚¬ìš©ì ìƒì„±: p027@evaluator.com', category: 'user', status: 'success' },
      { time: '2024-02-20 10:25:45', user: 'p003@evaluator.com', ip: '192.168.1.103', action: 'ë¡œê·¸ì¸ ì‹œë„ ì‹¤íŒ¨', category: 'auth', status: 'error' },
      { time: '2024-02-20 10:24:12', user: 'p004@evaluator.com', ip: '192.168.1.104', action: 'ì¼ê´€ì„± ê²€ì¦ í†µê³¼ (CR: 0.02)', category: 'evaluation', status: 'success' },
      { time: '2024-02-20 10:23:30', user: 'admin@ahp-system.com', ip: '192.168.1.100', action: 'ì‹œìŠ¤í…œ ì„¤ì • ë³€ê²½: ë¡œê·¸ ë³´ê´€ ê¸°ê°„ 90ì¼', category: 'system', status: 'success' },
      { time: '2024-02-20 10:22:18', user: 'p005@evaluator.com', ip: '192.168.1.105', action: 'í‰ê°€ ì„¸ì…˜ ì‹œì‘', category: 'evaluation', status: 'info' },
      { time: '2024-02-20 10:21:45', user: 'system', ip: '-', action: 'ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ ìµœì í™”', category: 'system', status: 'success' },
      { time: '2024-02-20 10:20:33', user: 'p006@evaluator.com', ip: '192.168.1.106', action: 'ëŒ€ì•ˆ í‰ê°€ ì™„ë£Œ', category: 'evaluation', status: 'success' },
      { time: '2024-02-20 10:19:22', user: 'admin@ahp-system.com', ip: '192.168.1.100', action: 'ë°±ì—… ì„¤ì • ë³€ê²½: ë§¤ì£¼ â†’ ë§¤ì¼', category: 'system', status: 'success' },
      { time: '2024-02-20 10:18:10', user: 'p007@evaluator.com', ip: '192.168.1.107', action: 'ë¹„ë°€ë²ˆí˜¸ ë³€ê²½', category: 'auth', status: 'success' },
      { time: '2024-02-20 10:17:55', user: 'system', ip: '-', action: 'ì„±ëŠ¥ ì„ê³„ì¹˜ ì´ˆê³¼ ê²½ê³ : CPU 85%', category: 'system', status: 'warning' }
    ]);
  };

  const handleExportAuditLogs = () => {
    const filteredLogs = getFilteredAuditLogs();
    const csvContent = [
      'Time,AdminUser,IP,Action,Category,Status',
      ...filteredLogs.map(log => 
        `"${log.time}","${log.user}","${log.ip}","${log.action}","${log.category}","${log.status}"`
      )
    ].join('\n');
    
    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = `audit_logs_${new Date().toISOString().split('T')[0]}.csv`;
    link.click();
    setMessage({ type: 'success', text: 'ê°ì‚¬ ë¡œê·¸ê°€ CSV íŒŒì¼ë¡œ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤.' });
  };

  const getFilteredAuditLogs = () => {
    return auditLogs.filter(log => {
      const matchesAdminUser = userFilter === 'all' || 
        (userFilter === 'admin' && log.user.includes('admin')) ||
        (userFilter === 'evaluator' && log.user.includes('evaluator')) ||
        (userFilter === 'system' && log.user === 'system');
      
      const matchesCategory = categoryFilter === 'all' || log.category === categoryFilter;
      const matchesStatus = statusFilterAudit === 'all' || log.status === statusFilterAudit;
      const matchesSearch = searchTermAudit === '' || 
        log.user.toLowerCase().includes(searchTermAudit.toLowerCase()) ||
        log.action.toLowerCase().includes(searchTermAudit.toLowerCase()) ||
        log.ip.includes(searchTermAudit);
      
      const matchesDate = dateFilter === '' || log.time.startsWith(dateFilter);
      
      return matchesAdminUser && matchesCategory && matchesStatus && matchesSearch && matchesDate;
    });
  };

  const loadSystemData = () => {
    loadAuditLogs();
    // ì‹¤ì œ AI í”„ë¡œì íŠ¸ ë°ì´í„° ë°˜ì˜
    const startTime = new Date('2024-01-01');
    const currentTime = new Date();
    const uptimeDays = Math.floor((currentTime.getTime() - startTime.getTime()) / (1000 * 60 * 60 * 24));
    
    setStats({
      totalAdminUsers: 27, // 26ëª… í‰ê°€ì + 1ëª… ê´€ë¦¬ì
      totalProjects: 1, // AI ê°œë°œ í™œìš© ë°©ì•ˆ í”„ë¡œì íŠ¸ë§Œ
      activeProjects: 1,
      totalEvaluations: 234, // 26ëª… Ã— 9ê°œ ìŒëŒ€ë¹„êµ
      systemUptime: `${uptimeDays}ì¼`,
      storageUsed: '1.2GB'
    });

    // 26ëª… í‰ê°€ì + 1ëª… ê´€ë¦¬ì ë¡œë“œ
    const evaluators = Array.from({ length: 26 }, (_, i) => ({
      id: `eval-${i + 1}`,
      first_name: `í‰ê°€ì${i + 1}`,
      last_name: `P${String(i + 1).padStart(3, '0')}`,
      email: `p${String(i + 1).padStart(3, '0')}@evaluator.com`,
      role: 'evaluator' as const,
      created_at: '2024-01-01T00:00:00Z',
      last_login: new Date(Date.now() - Math.random() * 24 * 60 * 60 * 1000).toISOString(),
      status: 'active' as const
    }));

    setAdminUsers([
      {
        id: 'admin-1',
        first_name: 'ê´€ë¦¬ì',
        last_name: 'ì‹œìŠ¤í…œ',
        email: 'admin@ahp-system.com',
        role: 'admin',
        created_at: '2024-01-01T00:00:00Z',
        last_login: new Date().toISOString(),
        status: 'active'
      },
      ...evaluators
    ]);

    setProjects([
      {
        id: 'ai-project-1',
        title: 'ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œìì˜ AI í™œìš© ë°©ì•ˆ ì¤‘ìš”ë„ ë¶„ì„',
        description: 'ê°œë°œ ê³¼ì •ì—ì„œ AI ë„êµ¬ í™œìš©ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ê²°ì •í•˜ê¸° ìœ„í•œ AHP ë¶„ì„',
        admin_id: 'admin-1',
        status: 'active',
        created_at: '2024-01-01T00:00:00Z',
        evaluator_count: 26,
        completion_rate: 100
      }
    ]);

    // ìµœê·¼ í™œë™ ë¡œê·¸
    setRecentActivity([
      { time: 'ë°©ê¸ˆ ì „', user: 'admin@ahp-system.com', action: 'ì‹œìŠ¤í…œ ëŒ€ì‹œë³´ë“œ ì¡°íšŒ', type: 'navigation' },
      { time: '2ë¶„ ì „', user: 'p026@evaluator.com', action: 'AI ê°œë°œ í™œìš© ë°©ì•ˆ í‰ê°€ ì™„ë£Œ', type: 'evaluation' },
      { time: '5ë¶„ ì „', user: 'p025@evaluator.com', action: 'ì¼ê´€ì„± ê²€ì¦ í†µê³¼ (CR: 0.003)', type: 'evaluation' },
      { time: '8ë¶„ ì „', user: 'system', action: 'ìë™ ë°±ì—… ì‹¤í–‰ ì™„ë£Œ', type: 'system' },
      { time: '12ë¶„ ì „', user: 'p024@evaluator.com', action: 'ìŒëŒ€ë¹„êµ í‰ê°€ ìˆ˜í–‰', type: 'evaluation' },
      { time: '15ë¶„ ì „', user: 'admin@ahp-system.com', action: 'í”„ë¡œì íŠ¸ ìƒíƒœ í™•ì¸', type: 'admin' },
      { time: '18ë¶„ ì „', user: 'p023@evaluator.com', action: 'í‰ê°€ ì„¸ì…˜ ì‹œì‘', type: 'evaluation' },
      { time: '22ë¶„ ì „', user: 'system', action: 'ì¼ê´€ì„± ê²€ì¦ ì‹¤í–‰', type: 'system' }
    ]);
  };

  const loadSystemMetrics = () => {
    // ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ ì‹œë®¬ë ˆì´ì…˜
    setSystemMetrics({
      cpu: Math.floor(Math.random() * 30) + 15, // 15-45%
      memory: Math.floor(Math.random() * 20) + 70, // 70-90%
      responseTime: Math.floor(Math.random() * 50) + 100, // 100-150ms
      activeConnections: Math.floor(Math.random() * 10) + 5, // 5-15ê°œ
      errors24h: Math.floor(Math.random() * 3) // 0-2ê°œ
    });
  };

  const renderDashboard = () => (
    <div className="space-y-6">
      {/* System Overview */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <Card title="ğŸ¢ ì‹œìŠ¤í…œ í˜„í™©">
          <div className="space-y-4">
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ì´ ì‚¬ìš©ì</span>
              <span className="font-semibold text-blue-600">{stats.totalAdminUsers}ëª…</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ì´ í”„ë¡œì íŠ¸</span>
              <span className="font-semibold text-green-600">{stats.totalProjects}ê°œ</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">í™œì„± í”„ë¡œì íŠ¸</span>
              <span className="font-semibold text-purple-600">{stats.activeProjects}ê°œ</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ì´ í‰ê°€ ìˆ˜</span>
              <span className="font-semibold text-orange-600">{stats.totalEvaluations}ê±´</span>
            </div>
          </div>
        </Card>

        <Card title="âš¡ ì‹œìŠ¤í…œ ì„±ëŠ¥">
          <div className="space-y-4">
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ê°€ë™ ì‹œê°„</span>
              <span className="font-semibold text-green-600">{stats.systemUptime}</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ì €ì¥ì†Œ ì‚¬ìš©</span>
              <span className="font-semibold text-blue-600">{stats.storageUsed}</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ì‘ë‹µ ì‹œê°„</span>
              <span className="font-semibold text-green-600">~125ms</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ì‹œìŠ¤í…œ ìƒíƒœ</span>
              <span className="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                ì •ìƒ
              </span>
            </div>
          </div>
        </Card>

        <Card title="ğŸ“ˆ ì‹¤ì‹œê°„ í™œë™ ëª¨ë‹ˆí„°">
          <div className="space-y-3 max-h-64 overflow-y-auto">
            {recentActivity.slice(0, 8).map((activity, index) => (
              <div key={index} className="flex items-center justify-between text-sm py-2 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 rounded px-2 cursor-pointer transition-colors">
                <div className="flex items-center space-x-2">
                  <span className={`w-2 h-2 rounded-full animate-pulse ${
                    activity.type === 'evaluation' ? 'bg-green-500' :
                    activity.type === 'navigation' ? 'bg-blue-500' :
                    activity.type === 'system' ? 'bg-yellow-500' : 'bg-purple-500'
                  }`}></span>
                  <span className="text-gray-700 font-medium">{activity.action}</span>
                </div>
                <div className="text-xs text-gray-500 text-right">
                  <div className="font-medium">{activity.user}</div>
                  <div className="text-green-600">{activity.time}</div>
                </div>
              </div>
            ))}
            <div className="text-center pt-3 border-t">
              <Button variant="secondary" size="sm" onClick={() => setActiveTab('audit')}>
                ğŸ“ ì „ì²´ ë¡œê·¸ ë³´ê¸°
              </Button>
            </div>
          </div>
        </Card>
      </div>

      {/* Recent Projects */}
      <Card title="ğŸ“‹ ìµœê·¼ í”„ë¡œì íŠ¸ í™œë™">
        <div className="space-y-3">
          {projects.slice(0, 5).map((project) => (
            <div key={project.id} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
              <div className="flex-1">
                <h4 className="font-medium text-gray-900">{project.title}</h4>
                <p className="text-sm text-gray-600">{project.description}</p>
                <div className="flex items-center space-x-4 mt-1">
                  <span className="text-xs text-gray-500">{project.evaluator_count}ëª… ì°¸ì—¬</span>
                  <span className="text-xs text-gray-500">ì™„ë£Œìœ¨ {project.completion_rate}%</span>
                </div>
              </div>
              <div className="text-right">
                <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                  project.status === 'active' ? 'bg-green-100 text-green-800' :
                  project.status === 'completed' ? 'bg-blue-100 text-blue-800' :
                  'bg-gray-100 text-gray-800'
                }`}>
                  {project.status === 'active' ? 'ì§„í–‰ì¤‘' : 
                   project.status === 'completed' ? 'ì™„ë£Œ' : 'ëŒ€ê¸°'}
                </span>
              </div>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );

  const handleCreateAdminUser = () => {
    setAdminUserFormMode('create');
    setShowAdminUserForm(true);
    setAdminUserForm({
      first_name: '',
      last_name: '',
      email: '',
      role: 'evaluator',
      status: 'active'
    });
  };

  const handleEditAdminUser = (user: AdminUser) => {
    setSelectedAdminUser(user);
    setAdminUserFormMode('edit');
    setShowAdminUserForm(true);
    setAdminUserForm({
      first_name: user.first_name,
      last_name: user.last_name,
      email: user.email,
      role: user.role,
      status: user.status
    });
  };

  const handleSaveAdminUser = async () => {
    setLoading(true);
    try {
      if (userFormMode === 'create') {
        const newAdminUser: AdminUser = {
          id: `user-${Date.now()}`,
          ...userForm,
          created_at: new Date().toISOString(),
          last_login: undefined
        };
        setAdminUsers([...users, newAdminUser]);
        setMessage({ type: 'success', text: 'ìƒˆ ì‚¬ìš©ìê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.' });
      } else if (userFormMode === 'edit' && selectedAdminUser) {
        setAdminUsers(users.map(u => u.id === selectedAdminUser.id ? { ...u, ...userForm } : u));
        setMessage({ type: 'success', text: 'ì‚¬ìš©ì ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.' });
      }
      setShowAdminUserForm(false);
      setSelectedAdminUser(null);
    } catch (error) {
      setMessage({ type: 'error', text: 'ì‘ì—… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' });
    } finally {
      setLoading(false);
    }
  };

  const handleDeleteAdminUser = async (userId: string) => {
    if (window.confirm('ì •ë§ë¡œ ì´ ì‚¬ìš©ìë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
      setAdminUsers(users.filter(u => u.id !== userId));
      setMessage({ type: 'success', text: 'ì‚¬ìš©ìê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.' });
    }
  };

  const handleToggleAdminUserStatus = async (userId: string) => {
    setAdminUsers(users.map(u => 
      u.id === userId 
        ? { ...u, status: u.status === 'active' ? 'inactive' : 'active' as const }
        : u
    ));
    setMessage({ type: 'success', text: 'ì‚¬ìš©ì ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.' });
  };

  const filteredAdminUsers = users.filter(user => {
    const matchesSearch = searchTerm === '' || 
      user.first_name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      user.last_name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      user.email.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesRole = roleFilter === 'all' || user.role === roleFilter;
    const matchesStatus = statusFilter === 'all' || user.status === statusFilter;
    return matchesSearch && matchesRole && matchesStatus;
  });

  const renderAdminUsers = () => (
    <div className="min-h-screen bg-gray-50">
      {/* Page Header */}
      <div className="bg-white border-b border-gray-200">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="py-6">
            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-3xl font-bold text-gray-900 flex items-center">
                  <span className="text-4xl mr-3">ğŸ‘¥</span>
                  ì‚¬ìš©ì ê´€ë¦¬
                </h1>
                <p className="text-gray-600 mt-2">ì‹œìŠ¤í…œ ì‚¬ìš©ì ê³„ì • ë° ê¶Œí•œì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
              </div>
              <div className="flex items-center space-x-3">
                <Button variant="secondary" size="sm">
                  ğŸ“Š ì‚¬ìš©ì ë¦¬í¬íŠ¸
                </Button>
                <Button variant="primary" onClick={handleCreateAdminUser}>
                  â• ìƒˆ ì‚¬ìš©ì ì¶”ê°€
                </Button>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="space-y-6">
          {/* Status Message */}
          {message && (
            <div className={`p-4 rounded-lg border ${
              message.type === 'success' 
                ? 'bg-green-50 border-green-200 text-green-800' 
                : 'bg-red-50 border-red-200 text-red-800'
            }`}>
              <div className="flex items-center justify-between">
                <div className="flex items-center">
                  <span className="text-lg mr-2">
                    {message.type === 'success' ? 'âœ…' : 'âŒ'}
                  </span>
                  <span className="font-medium">{message.text}</span>
                </div>
                <button 
                  onClick={() => setMessage(null)}
                  className="text-sm underline hover:no-underline"
                >
                  ë‹«ê¸°
                </button>
              </div>
            </div>
          )}

          {/* Statistics Overview */}
          <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
            <Card title="ğŸ‘¥ ì „ì²´ ì‚¬ìš©ì">
              <div className="text-center">
                <div className="text-3xl font-bold text-blue-600">{users.length}</div>
                <div className="text-sm text-gray-500 mt-1">ì´ ë“±ë¡ ì‚¬ìš©ì</div>
              </div>
            </Card>
            <Card title="ğŸ‘¨â€ğŸ’¼ ê´€ë¦¬ì">
              <div className="text-center">
                <div className="text-3xl font-bold text-purple-600">
                  {users.filter(u => u.role === 'admin').length}
                </div>
                <div className="text-sm text-gray-500 mt-1">ì‹œìŠ¤í…œ ê´€ë¦¬ì</div>
              </div>
            </Card>
            <Card title="ğŸ‘¨â€ğŸ’» í‰ê°€ì">
              <div className="text-center">
                <div className="text-3xl font-bold text-green-600">
                  {users.filter(u => u.role === 'evaluator').length}
                </div>
                <div className="text-sm text-gray-500 mt-1">í‰ê°€ ì°¸ì—¬ì</div>
              </div>
            </Card>
            <Card title="âœ… í™œì„± ì‚¬ìš©ì">
              <div className="text-center">
                <div className="text-3xl font-bold text-orange-600">
                  {users.filter(u => u.status === 'active').length}
                </div>
                <div className="text-sm text-gray-500 mt-1">í˜„ì¬ í™œì„±í™”</div>
              </div>
            </Card>
          </div>

      {/* Search and Filter */}
      <Card title="ğŸ” ê²€ìƒ‰ ë° í•„í„°">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
          <input
            type="text"
            placeholder="ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼ ê²€ìƒ‰..."
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
            className="border border-gray-300 rounded px-3 py-2 text-sm"
          />
          <select
            value={roleFilter}
            onChange={(e) => setRoleFilter(e.target.value)}
            className="border border-gray-300 rounded px-3 py-2 text-sm"
          >
            <option value="all">ëª¨ë“  ì—­í• </option>
            <option value="admin">ê´€ë¦¬ì</option>
            <option value="evaluator">í‰ê°€ì</option>
          </select>
          <select
            value={statusFilter}
            onChange={(e) => setStatusFilter(e.target.value)}
            className="border border-gray-300 rounded px-3 py-2 text-sm"
          >
            <option value="all">ëª¨ë“  ìƒíƒœ</option>
            <option value="active">í™œì„±</option>
            <option value="inactive">ë¹„í™œì„±</option>
            <option value="pending">ëŒ€ê¸°</option>
          </select>
          <Button 
            variant="secondary" 
            size="sm"
            onClick={() => {
              const stats = {
                ì´ì‚¬ìš©ì: users.length,
                ê´€ë¦¬ì: users.filter(u => u.role === 'admin').length,
                í‰ê°€ì: users.filter(u => u.role === 'evaluator').length,
                í™œì„±ì‚¬ìš©ì: users.filter(u => u.status === 'active').length,
                ë¹„í™œì„±ì‚¬ìš©ì: users.filter(u => u.status === 'inactive').length
              };
              alert(`ğŸ“Š ì‚¬ìš©ì í†µê³„\n\n${Object.entries(stats).map(([key, value]) => `${key}: ${value}ëª…`).join('\n')}`);
            }}
          >
            ğŸ“Š í†µê³„ ë³´ê¸°
          </Button>
        </div>
      </Card>

      {/* AdminUser List */}
      <Card title={`ğŸ‘¥ ì‚¬ìš©ì ëª©ë¡ (${filteredAdminUsers.length}ëª…)`}>
        <div className="space-y-4">
          {filteredAdminUsers.map((user) => (
            <div key={user.id} className="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
              <div className="flex items-center space-x-3">
                <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                  <span className="text-sm font-medium text-blue-900">
                    {user.first_name[0]}{user.last_name[0]}
                  </span>
                </div>
                <div>
                  <h4 className="font-medium text-gray-900">{user.first_name} {user.last_name}</h4>
                  <p className="text-sm text-gray-600">{user.email}</p>
                  <div className="flex items-center space-x-2 mt-1">
                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                      user.role === 'admin' ? 'bg-purple-100 text-purple-800' : 'bg-gray-100 text-gray-800'
                    }`}>
                      {user.role === 'admin' ? 'ê´€ë¦¬ì' : 'í‰ê°€ì'}
                    </span>
                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                      user.status === 'active' ? 'bg-green-100 text-green-800' :
                      user.status === 'inactive' ? 'bg-red-100 text-red-800' :
                      'bg-yellow-100 text-yellow-800'
                    }`}>
                      {user.status === 'active' ? 'í™œì„±' :
                       user.status === 'inactive' ? 'ë¹„í™œì„±' : 'ëŒ€ê¸°'}
                    </span>
                    {user.last_login && (
                      <span className="text-xs text-gray-500">
                        ë§ˆì§€ë§‰ ì ‘ì†: {new Date(user.last_login).toLocaleDateString()}
                      </span>
                    )}
                  </div>
                </div>
              </div>
              <div className="flex items-center space-x-2">
                <Button 
                  variant="secondary" 
                  size="sm"
                  onClick={() => handleEditAdminUser(user)}
                >
                  âœï¸ í¸ì§‘
                </Button>
                <Button 
                  variant="secondary" 
                  size="sm"
                  onClick={() => handleToggleAdminUserStatus(user.id)}
                >
                  {user.status === 'active' ? 'â¸ï¸ ë¹„í™œì„±í™”' : 'â–¶ï¸ í™œì„±í™”'}
                </Button>
                <Button 
                  variant="secondary" 
                  size="sm"
                  onClick={() => handleDeleteAdminUser(user.id)}
                  className="text-red-600"
                >
                  ğŸ—‘ï¸ ì‚­ì œ
                </Button>
              </div>
            </div>
          ))}
          {filteredAdminUsers.length === 0 && (
            <div className="text-center py-8 text-gray-500">
              ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.
            </div>
          )}
        </div>
      </Card>

      {/* AdminUser Form Modal */}
      {showAdminUserForm && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-md">
            <h3 className="text-lg font-semibold mb-4">
              {userFormMode === 'create' ? 'ìƒˆ ì‚¬ìš©ì ì¶”ê°€' : 'ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •'}
            </h3>
            
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">ì„±</label>
                <input
                  type="text"
                  value={userForm.first_name}
                  onChange={(e) => setAdminUserForm({...userForm, first_name: e.target.value})}
                  className="w-full border border-gray-300 rounded px-3 py-2"
                  placeholder="ì„±ì„ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
              
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">ì´ë¦„</label>
                <input
                  type="text"
                  value={userForm.last_name}
                  onChange={(e) => setAdminUserForm({...userForm, last_name: e.target.value})}
                  className="w-full border border-gray-300 rounded px-3 py-2"
                  placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
              
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">ì´ë©”ì¼</label>
                <input
                  type="email"
                  value={userForm.email}
                  onChange={(e) => setAdminUserForm({...userForm, email: e.target.value})}
                  className="w-full border border-gray-300 rounded px-3 py-2"
                  placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
              
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">ì—­í• </label>
                <select
                  value={userForm.role}
                  onChange={(e) => setAdminUserForm({...userForm, role: e.target.value as 'admin' | 'evaluator'})}
                  className="w-full border border-gray-300 rounded px-3 py-2"
                >
                  <option value="evaluator">í‰ê°€ì</option>
                  <option value="admin">ê´€ë¦¬ì</option>
                </select>
              </div>
              
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">ìƒíƒœ</label>
                <select
                  value={userForm.status}
                  onChange={(e) => setAdminUserForm({...userForm, status: e.target.value as 'active' | 'inactive' | 'pending'})}
                  className="w-full border border-gray-300 rounded px-3 py-2"
                >
                  <option value="active">í™œì„±</option>
                  <option value="inactive">ë¹„í™œì„±</option>
                  <option value="pending">ëŒ€ê¸°</option>
                </select>
              </div>
            </div>
            
            <div className="flex justify-end space-x-3 mt-6">
              <Button 
                variant="secondary"
                onClick={() => setShowAdminUserForm(false)}
                disabled={loading}
              >
                ì·¨ì†Œ
              </Button>
              <Button 
                variant="primary"
                onClick={handleSaveAdminUser}
                disabled={loading || !userForm.first_name || !userForm.last_name || !userForm.email}
              >
                {loading ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}
              </Button>
            </div>
          </div>
        </div>
      )}
    </div>
  );

  const renderProjects = () => (
    <div className="min-h-screen bg-gray-50">
      {/* Page Header */}
      <div className="bg-white border-b border-gray-200">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="py-6">
            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-3xl font-bold text-gray-900 flex items-center">
                  <span className="text-4xl mr-3">ğŸ“‹</span>
                  í”„ë¡œì íŠ¸ ê´€ë¦¬
                </h1>
                <p className="text-gray-600 mt-2">ëª¨ë“  AHP í”„ë¡œì íŠ¸ë¥¼ í†µí•© ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤</p>
              </div>
              <div className="flex items-center space-x-3">
                <Button 
                  variant="secondary"
                  onClick={() => {
                    const projectData = projects.map(p => ({
                      ì œëª©: p.title,
                      ì„¤ëª…: p.description,
                      ìƒíƒœ: p.status,
                      ì°¸ì—¬ììˆ˜: p.evaluator_count,
                      ì§„í–‰ë¥ : `${p.completion_rate}%`,
                      ìƒì„±ì¼: p.created_at
                    }));
                    const csvContent = [
                      Object.keys(projectData[0]).join(','),
                      ...projectData.map(p => Object.values(p).join(','))
                    ].join('\n');
                    const blob = new Blob([csvContent], { type: 'text/csv' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `í”„ë¡œì íŠ¸_ëª©ë¡_${new Date().toISOString().split('T')[0]}.csv`;
                    a.click();
                    setMessage({ type: 'success', text: 'í”„ë¡œì íŠ¸ ëª©ë¡ì´ CSV íŒŒì¼ë¡œ ë‚´ë³´ë‚´ì–´ì¡ŒìŠµë‹ˆë‹¤.' });
                  }}
                >
                  ğŸ“¥ CSV ë‚´ë³´ë‚´ê¸°
                </Button>
                <Button 
                  variant="primary"
                  onClick={() => alert('ğŸ†• ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±\n\ní˜„ì¬ ë°ëª¨ ëª¨ë“œì—ì„œëŠ” AI ê°œë°œ í™œìš© ë°©ì•ˆ í”„ë¡œì íŠ¸ë§Œ ì œê³µë©ë‹ˆë‹¤.\n\nì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì´ ë²„íŠ¼ì„ í†µí•´ ìƒˆë¡œìš´ AHP í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.')}
                >
                  â• ìƒˆ í”„ë¡œì íŠ¸
                </Button>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="space-y-6">
          {/* Status Message */}
          {message && (
            <div className={`p-4 rounded-lg border ${
              message.type === 'success' 
                ? 'bg-green-50 border-green-200 text-green-800' 
                : 'bg-red-50 border-red-200 text-red-800'
            }`}>
              <div className="flex items-center justify-between">
                <div className="flex items-center">
                  <span className="text-lg mr-2">
                    {message.type === 'success' ? 'âœ…' : 'âŒ'}
                  </span>
                  <span className="font-medium">{message.text}</span>
                </div>
                <button 
                  onClick={() => setMessage(null)}
                  className="text-sm underline hover:no-underline"
                >
                  ë‹«ê¸°
                </button>
              </div>
            </div>
          )}

          {/* Project Statistics */}
          <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
            <Card title="ğŸ“Š ì „ì²´ í”„ë¡œì íŠ¸">
              <div className="text-center">
                <div className="text-3xl font-bold text-blue-600">{projects.length}</div>
                <div className="text-sm text-gray-500 mt-1">ì´ í”„ë¡œì íŠ¸ ìˆ˜</div>
              </div>
            </Card>
            <Card title="ğŸŸ¢ í™œì„± í”„ë¡œì íŠ¸">
              <div className="text-center">
                <div className="text-3xl font-bold text-green-600">
                  {projects.filter(p => p.status === 'active').length}
                </div>
                <div className="text-sm text-gray-500 mt-1">í˜„ì¬ ì§„í–‰ì¤‘</div>
              </div>
            </Card>
            <Card title="âœ… ì™„ë£Œ í”„ë¡œì íŠ¸">
              <div className="text-center">
                <div className="text-3xl font-bold text-purple-600">
                  {projects.filter(p => p.status === 'completed').length}
                </div>
                <div className="text-sm text-gray-500 mt-1">ì™„ë£Œëœ í”„ë¡œì íŠ¸</div>
              </div>
            </Card>
            <Card title="ğŸ‘¥ ì´ ì°¸ì—¬ì">
              <div className="text-center">
                <div className="text-3xl font-bold text-orange-600">
                  {projects.reduce((sum, p) => sum + p.evaluator_count, 0)}
                </div>
                <div className="text-sm text-gray-500 mt-1">ì „ì²´ ì°¸ì—¬ì ìˆ˜</div>
              </div>
            </Card>
          </div>

      <Card>
        <div className="space-y-4">
          {projects.map((project) => (
            <div key={project.id} className="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
              <div className="flex-1">
                <h4 className="font-medium text-gray-900">{project.title}</h4>
                <p className="text-sm text-gray-600 mt-1">{project.description}</p>
                <div className="flex items-center space-x-4 mt-2">
                  <span className="text-xs text-gray-500">ìƒì„±ì¼: {project.created_at}</span>
                  <span className="text-xs text-gray-500">{project.evaluator_count}ëª… ì°¸ì—¬</span>
                  <div className="flex items-center space-x-1">
                    <span className="text-xs text-gray-500">ì§„í–‰ë¥ :</span>
                    <div className="w-16 bg-gray-200 rounded-full h-2">
                      <div 
                        className="bg-blue-600 h-2 rounded-full" 
                        style={{ width: `${project.completion_rate}%` }}
                      ></div>
                    </div>
                    <span className="text-xs text-gray-500">{project.completion_rate}%</span>
                  </div>
                </div>
              </div>
              <div className="flex items-center space-x-2">
                <Button variant="secondary" size="sm">
                  ë³´ê¸°
                </Button>
                <Button variant="secondary" size="sm">
                  ë¶„ì„
                </Button>
                <Button variant="secondary" size="sm">
                  ì„¤ì •
                </Button>
              </div>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );

  const renderSystem = () => (
    <div className="space-y-6">
      <h3 className="text-lg font-semibold">ì‹œìŠ¤í…œ ì„¤ì •</h3>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <Card title="ğŸ”§ ì‹œìŠ¤í…œ êµ¬ì„±">
          <div className="space-y-4">
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ìë™ ë°±ì—…</span>
              <label className="inline-flex items-center">
                <input type="checkbox" className="form-checkbox" defaultChecked />
                <span className="ml-2 text-sm">í™œì„±í™”</span>
              </label>
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ì´ë©”ì¼ ì•Œë¦¼</span>
              <label className="inline-flex items-center">
                <input type="checkbox" className="form-checkbox" defaultChecked />
                <span className="ml-2 text-sm">í™œì„±í™”</span>
              </label>
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ë¡œê·¸ ë³´ê´€ ê¸°ê°„</span>
              <select className="text-sm border border-gray-300 rounded px-2 py-1">
                <option>30ì¼</option>
                <option>60ì¼</option>
                <option>90ì¼</option>
              </select>
            </div>
          </div>
        </Card>

        <Card title="ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤">
          <div className="space-y-4">
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ì—°ê²° ìƒíƒœ</span>
              <span className="text-sm font-medium text-green-600">ì •ìƒ</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ë§ˆì§€ë§‰ ë°±ì—…</span>
              <span className="text-sm font-medium">2ì‹œê°„ ì „</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">DB í¬ê¸°</span>
              <span className="text-sm font-medium">1.2GB</span>
            </div>
            <div className="pt-2">
              <Button variant="secondary" size="sm" className="w-full">
                ìˆ˜ë™ ë°±ì—… ì‹¤í–‰
              </Button>
            </div>
          </div>
        </Card>
      </div>

      <Card title="ğŸ“ˆ ì‹œìŠ¤í…œ ë¡œê·¸">
        <div className="space-y-2 max-h-60 overflow-y-auto">
          <div className="text-xs font-mono bg-gray-50 p-2 rounded">
            <span className="text-gray-500">[2024-02-20 10:30:15]</span> 
            <span className="text-green-600"> INFO</span> - ì‚¬ìš©ì ë¡œê·¸ì¸: admin@company.com
          </div>
          <div className="text-xs font-mono bg-gray-50 p-2 rounded">
            <span className="text-gray-500">[2024-02-20 10:25:33]</span> 
            <span className="text-blue-600"> INFO</span> - í”„ë¡œì íŠ¸ ìƒì„±: AI ê°œë°œ í™œìš© ë°©ì•ˆ
          </div>
          <div className="text-xs font-mono bg-gray-50 p-2 rounded">
            <span className="text-gray-500">[2024-02-20 10:20:45]</span> 
            <span className="text-green-600"> INFO</span> - ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ì™„ë£Œ
          </div>
        </div>
      </Card>
    </div>
  );

  const renderMonitoring = () => (
    <div className="min-h-screen bg-gray-50">
      {/* Page Header */}
      <div className="bg-white border-b border-gray-200">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="py-6">
            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-3xl font-bold text-gray-900 flex items-center">
                  <span className="text-4xl mr-3">âš¡</span>
                  ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§
                </h1>
                <p className="text-gray-600 mt-2">ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ì„±ëŠ¥ ë° ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤</p>
              </div>
              <div className="flex items-center space-x-3">
                <Button 
                  variant="secondary" 
                  size="sm"
                  onClick={() => {
                    const report = `ğŸ“ˆ ì‹œìŠ¤í…œ ì„±ëŠ¥ ë¦¬í¬íŠ¸\n\nâ€¢ CPU ì‚¬ìš©ë¥ : ${systemMetrics.cpu}% (${systemMetrics.cpu < 30 ? 'ì •ìƒ' : systemMetrics.cpu < 70 ? 'ì£¼ì˜' : 'ê²½ê³ '})\nâ€¢ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ${systemMetrics.memory}% (${Math.round(systemMetrics.memory * 2 / 100 * 10) / 10}GB/2GB)\nâ€¢ ì‘ë‹µ ì‹œê°„: ${systemMetrics.responseTime}ms\nâ€¢ í™œì„± ì—°ê²°: ${systemMetrics.activeConnections}ê°œ\nâ€¢ 24ì‹œê°„ ì˜¤ë¥˜: ${systemMetrics.errors24h}ê±´\n\nìƒì„± ì‹œê°„: ${new Date().toLocaleString()}`;
                    alert(report);
                  }}
                >
                  ğŸ“ˆ ì„±ëŠ¥ ë¦¬í¬íŠ¸
                </Button>
                <Button 
                  variant="secondary" 
                  size="sm"
                  onClick={() => alert('âš ï¸ ì•Œë¦¼ ì„¤ì •\n\nâ€¢ CPU ì‚¬ìš©ë¥  80% ì´ìƒ: í™œì„±í™”\nâ€¢ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 90% ì´ìƒ: í™œì„±í™”\nâ€¢ ì‘ë‹µ ì‹œê°„ 200ms ì´ìƒ: í™œì„±í™”\nâ€¢ ì¼ì¼ ì˜¤ë¥˜ 10ê±´ ì´ìƒ: í™œì„±í™”\n\nì´ë©”ì¼ ì•Œë¦¼: admin@ahp-system.com')}
                >
                  âš ï¸ ì•Œë¦¼ ì„¤ì •
                </Button>
                <Button 
                  variant="primary" 
                  size="sm"
                  onClick={() => {
                    loadSystemMetrics();
                    setMessage({ type: 'success', text: 'ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.' });
                  }}
                >
                  ğŸ”„ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
                </Button>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="space-y-6">
          {/* Status Message */}
          {message && (
            <div className={`p-4 rounded-lg border ${
              message.type === 'success' 
                ? 'bg-green-50 border-green-200 text-green-800' 
                : 'bg-red-50 border-red-200 text-red-800'
            }`}>
              <div className="flex items-center justify-between">
                <div className="flex items-center">
                  <span className="text-lg mr-2">
                    {message.type === 'success' ? 'âœ…' : 'âŒ'}
                  </span>
                  <span className="font-medium">{message.text}</span>
                </div>
                <button 
                  onClick={() => setMessage(null)}
                  className="text-sm underline hover:no-underline"
                >
                  ë‹«ê¸°
                </button>
              </div>
            </div>
          )}

          {/* System Status Overview */}
          <Card title="ğŸš¦ ì‹œìŠ¤í…œ ìƒíƒœ ìš”ì•½">
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div className="text-center">
                <div className="text-4xl mb-2">ğŸŸ¢</div>
                <div className="font-semibold text-green-600">ì‹œìŠ¤í…œ ì •ìƒ</div>
                <div className="text-sm text-gray-500">ëª¨ë“  ì„œë¹„ìŠ¤ ìš´ì˜ì¤‘</div>
              </div>
              <div className="text-center">
                <div className="text-4xl mb-2">â±ï¸</div>
                <div className="font-semibold text-blue-600">ì‘ë‹µ ì‹œê°„ ì–‘í˜¸</div>
                <div className="text-sm text-gray-500">í‰ê·  {systemMetrics.responseTime}ms</div>
              </div>
              <div className="text-center">
                <div className="text-4xl mb-2">ğŸ“Š</div>
                <div className="font-semibold text-purple-600">ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥ </div>
                <div className="text-sm text-gray-500">CPU {systemMetrics.cpu}% / ë©”ëª¨ë¦¬ {systemMetrics.memory}%</div>
              </div>
            </div>
          </Card>

      {/* Real-time System Metrics */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <Card title="ğŸ”¥ CPU ì‚¬ìš©ë¥ ">
          <div className="text-center">
            <div className={`text-2xl font-bold ${
              systemMetrics.cpu < 30 ? 'text-green-600' :
              systemMetrics.cpu < 70 ? 'text-yellow-600' : 'text-red-600'
            }`}>
              {systemMetrics.cpu}%
            </div>
            <div className="text-sm text-gray-500 mt-1">
              {systemMetrics.cpu < 30 ? 'ì •ìƒ' : systemMetrics.cpu < 70 ? 'ì£¼ì˜' : 'ê²½ê³ '}
            </div>
            <div className="w-full bg-gray-200 rounded-full h-2 mt-3">
              <div 
                className={`h-2 rounded-full ${
                  systemMetrics.cpu < 30 ? 'bg-green-600' :
                  systemMetrics.cpu < 70 ? 'bg-yellow-600' : 'bg-red-600'
                }`}
                style={{ width: `${systemMetrics.cpu}%` }}
              ></div>
            </div>
            <div className="text-xs text-gray-500 mt-1">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ë°©ê¸ˆ ì „</div>
          </div>
        </Card>

        <Card title="ğŸ’¾ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰">
          <div className="text-center">
            <div className="text-2xl font-bold text-blue-600">{systemMetrics.memory}%</div>
            <div className="text-sm text-gray-500 mt-1">2GB ì¤‘ {Math.round(systemMetrics.memory * 2 / 100 * 10) / 10}GB</div>
            <div className="w-full bg-gray-200 rounded-full h-2 mt-3">
              <div 
                className="bg-blue-600 h-2 rounded-full" 
                style={{ width: `${systemMetrics.memory}%` }}
              ></div>
            </div>
            <div className="text-xs text-gray-500 mt-1">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ë°©ê¸ˆ ì „</div>
          </div>
        </Card>

        <Card title="âš¡ ì‘ë‹µ ì‹œê°„">
          <div className="text-center">
            <div className={`text-2xl font-bold ${
              systemMetrics.responseTime < 100 ? 'text-green-600' :
              systemMetrics.responseTime < 300 ? 'text-yellow-600' : 'text-red-600'
            }`}>
              {systemMetrics.responseTime}ms
            </div>
            <div className="text-sm text-gray-500 mt-1">í‰ê· </div>
            <div className={`text-xs mt-2 ${
              systemMetrics.responseTime < 100 ? 'text-green-600' :
              systemMetrics.responseTime < 300 ? 'text-yellow-600' : 'text-red-600'
            }`}>
              {systemMetrics.responseTime < 100 ? 'ğŸŸ¢ ìš°ìˆ˜' :
               systemMetrics.responseTime < 300 ? 'ğŸŸ¡ ì–‘í˜¸' : 'ğŸ”´ ëŠë¦¼'}
            </div>
            <div className="text-xs text-gray-500 mt-1">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ë°©ê¸ˆ ì „</div>
          </div>
        </Card>

        <Card title="ğŸŒ ë„¤íŠ¸ì›Œí¬">
          <div className="text-center">
            <div className="text-sm text-gray-600">í™œì„± ì—°ê²°: {systemMetrics.activeConnections}ê°œ</div>
            <div className="text-sm text-gray-600">24ì‹œê°„ ì˜¤ë¥˜: {systemMetrics.errors24h}ê±´</div>
            <div className={`text-xs mt-2 ${
              systemMetrics.errors24h === 0 ? 'text-green-600' :
              systemMetrics.errors24h < 5 ? 'text-yellow-600' : 'text-red-600'
            }`}>
              {systemMetrics.errors24h === 0 ? 'ğŸŸ¢ ì •ìƒ' :
               systemMetrics.errors24h < 5 ? 'ğŸŸ¡ ì£¼ì˜' : 'ğŸ”´ ê²½ê³ '}
            </div>
            <div className="text-xs text-gray-500 mt-1">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ë°©ê¸ˆ ì „</div>
          </div>
        </Card>
      </div>

      {/* System Performance Chart */}
      <Card title="ğŸ“ˆ ì„±ëŠ¥ ì¶”ì´ (ìµœê·¼ 24ì‹œê°„)">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div>
            <h4 className="text-sm font-medium text-gray-700 mb-3">CPU ì‚¬ìš©ë¥  ì¶”ì´</h4>
            <div className="h-32 bg-gray-50 rounded flex items-end justify-around p-2">
              {Array.from({length: 24}, (_, i) => {
                const height = Math.random() * 80 + 10;
                return (
                  <div key={i} className="flex flex-col items-center">
                    <div 
                      className="bg-blue-500 w-2 rounded-t"
                      style={{ height: `${height}%` }}
                      title={`${(i + 1).toString().padStart(2, '0')}:00 - ${Math.round(height)}%`}
                    ></div>
                    {i % 6 === 0 && (
                      <span className="text-xs text-gray-500 mt-1">
                        {(i + 1).toString().padStart(2, '0')}
                      </span>
                    )}
                  </div>
                );
              })}
            </div>
          </div>
          
          <div>
            <h4 className="text-sm font-medium text-gray-700 mb-3">ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¶”ì´</h4>
            <div className="h-32 bg-gray-50 rounded flex items-end justify-around p-2">
              {Array.from({length: 24}, (_, i) => {
                const height = Math.random() * 30 + 60;
                return (
                  <div key={i} className="flex flex-col items-center">
                    <div 
                      className="bg-green-500 w-2 rounded-t"
                      style={{ height: `${height}%` }}
                      title={`${(i + 1).toString().padStart(2, '0')}:00 - ${Math.round(height)}%`}
                    ></div>
                    {i % 6 === 0 && (
                      <span className="text-xs text-gray-500 mt-1">
                        {(i + 1).toString().padStart(2, '0')}
                      </span>
                    )}
                  </div>
                );
              })}
            </div>
          </div>
        </div>
      </Card>

      {/* Activity Monitoring with Filters */}
      <Card title="ğŸ” ì‹¤ì‹œê°„ í™œë™ ëª¨ë‹ˆí„°ë§">
        <div className="mb-4 flex justify-between items-center">
          <div className="flex space-x-3">
            <select 
              value={activityFilter}
              onChange={(e) => setActivityFilter(e.target.value)}
              className="border border-gray-300 rounded px-3 py-1 text-sm"
            >
              <option value="all">ëª¨ë“  í™œë™</option>
              <option value="evaluation">í‰ê°€ í™œë™</option>
              <option value="navigation">ë‚´ë¹„ê²Œì´ì…˜</option>
              <option value="system">ì‹œìŠ¤í…œ</option>
              <option value="admin">ê´€ë¦¬ì</option>
            </select>
            <Button variant="secondary" size="sm">
              ğŸ“Š ë¶„ì„ ë³´ê³ ì„œ
            </Button>
          </div>
          <div className="text-sm text-gray-500">
            ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì¤‘... (ë§ˆì§€ë§‰: {new Date().toLocaleTimeString()})
          </div>
        </div>
        
        <div className="space-y-2 max-h-80 overflow-y-auto">
          {recentActivity
            .filter(log => activityFilter === 'all' || log.type === activityFilter)
            .map((log, index) => (
            <div key={index} className="flex items-center justify-between text-xs bg-gray-50 p-3 rounded hover:bg-gray-100">
              <div className="flex items-center space-x-3">
                <div className={`w-2 h-2 rounded-full ${
                  log.type === 'evaluation' ? 'bg-green-500' :
                  log.type === 'navigation' ? 'bg-blue-500' :
                  log.type === 'system' ? 'bg-purple-500' :
                  log.type === 'admin' ? 'bg-orange-500' : 'bg-gray-500'
                }`}></div>
                <span className="text-gray-500 font-mono">{log.time}</span>
                <span className="font-medium">{log.user}</span>
                <span className="text-gray-700">{log.action}</span>
              </div>
              <span className={`px-2 py-1 rounded text-xs font-medium ${
                log.type === 'evaluation' ? 'bg-green-100 text-green-800' :
                log.type === 'navigation' ? 'bg-blue-100 text-blue-800' :
                log.type === 'system' ? 'bg-purple-100 text-purple-800' :
                log.type === 'admin' ? 'bg-orange-100 text-orange-800' : 'bg-gray-100 text-gray-800'
              }`}>
                {log.type}
              </span>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );

  const renderDatabase = () => (
    <div className="space-y-6">
      <h3 className="text-lg font-semibold">ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬</h3>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <Card title="ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ">
          <div className="space-y-4">
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ì—°ê²° ìƒíƒœ</span>
              <span className="text-sm font-medium text-green-600">ğŸŸ¢ ì •ìƒ</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">DB ì¢…ë¥˜</span>
              <span className="text-sm font-medium">PostgreSQL</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">DB í¬ê¸°</span>
              <span className="text-sm font-medium">1.2GB</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">í™œì„± ì—°ê²°</span>
              <span className="text-sm font-medium">3ê°œ</span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ë§ˆì§€ë§‰ ë°±ì—…</span>
              <span className="text-sm font-medium">2ì‹œê°„ ì „</span>
            </div>
          </div>
        </Card>

        <Card title="ğŸ“Š í…Œì´ë¸” í˜„í™©">
          <div className="space-y-3">
            {[
              { table: 'users', count: 27, size: '45MB' },
              { table: 'projects', count: 1, size: '12MB' },
              { table: 'criteria', count: 12, size: '8MB' },
              { table: 'alternatives', count: 9, size: '6MB' },
              { table: 'evaluation_sessions', count: 26, size: '15MB' },
              { table: 'ahp_results', count: 1, size: '25MB' }
            ].map((table, index) => (
              <div key={index} className="flex justify-between items-center text-sm">
                <span className="font-medium">{table.table}</span>
                <div className="text-right">
                  <div className="text-gray-600">{table.count}ê°œ ë ˆì½”ë“œ</div>
                  <div className="text-xs text-gray-500">{table.size}</div>
                </div>
              </div>
            ))}
          </div>
        </Card>
      </div>

      <Card title="ğŸ”§ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ ë„êµ¬">
        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
          <Button variant="secondary" className="w-full">
            ğŸ’¾ ì¦‰ì‹œ ë°±ì—…
          </Button>
          <Button variant="secondary" className="w-full">
            ğŸ”„ ì¸ë±ìŠ¤ ì¬êµ¬ì„±
          </Button>
          <Button variant="secondary" className="w-full">
            ğŸ“Š ì¿¼ë¦¬ ì„±ëŠ¥ ë¶„ì„
          </Button>
          <Button variant="secondary" className="w-full">
            ğŸ§¹ ë¡œê·¸ ì •ë¦¬
          </Button>
        </div>
      </Card>
    </div>
  );

  const renderAudit = () => {
    const filteredLogs = getFilteredAuditLogs();
    
    return (
      <div className="min-h-screen bg-gray-50">
        {/* Page Header */}
        <div className="bg-white border-b border-gray-200">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="py-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-gray-900 flex items-center">
                    <span className="text-4xl mr-3">ğŸ“</span>
                    ê°ì‚¬ ë¡œê·¸
                  </h1>
                  <p className="text-gray-600 mt-2">ì‹œìŠ¤í…œ í™œë™ ë‚´ì—­ ë° ë³´ì•ˆ ê°ì‚¬ë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤</p>
                </div>
                <div className="flex items-center space-x-3">
                  <Button 
                    variant="secondary" 
                    size="sm" 
                    onClick={() => {
                      loadAuditLogs();
                      setMessage({ type: 'success', text: 'ê°ì‚¬ ë¡œê·¸ê°€ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.' });
                    }}
                  >
                    ğŸ”„ ìƒˆë¡œê³ ì¹¨
                  </Button>
                  <Button variant="secondary" size="sm" onClick={handleExportAuditLogs}>
                    ğŸ“¥ CSV ë‚´ë³´ë‚´ê¸°
                  </Button>
                  <Button 
                    variant="secondary" 
                    size="sm"
                    onClick={() => {
                      const summary = `ğŸ“Š ê°ì‚¬ ë¡œê·¸ ìš”ì•½ (${auditLogs.length}ê±´)\n\nâ€¢ í‰ê°€ í™œë™: ${auditLogs.filter(log => log.category === 'evaluation').length}ê±´\nâ€¢ ì‹œìŠ¤í…œ í™œë™: ${auditLogs.filter(log => log.category === 'system').length}ê±´\nâ€¢ ì‚¬ìš©ì í™œë™: ${auditLogs.filter(log => log.category === 'user').length}ê±´\nâ€¢ ë‚´ë¹„ê²Œì´ì…˜: ${auditLogs.filter(log => log.category === 'navigation').length}ê±´\nâ€¢ í”„ë¡œì íŠ¸ ê´€ë ¨: ${auditLogs.filter(log => log.category === 'project').length}ê±´\nâ€¢ ì¸ì¦ ê´€ë ¨: ${auditLogs.filter(log => log.category === 'auth').length}ê±´\n\nì„±ê³µ: ${auditLogs.filter(log => log.status === 'success').length}ê±´\nê²½ê³ : ${auditLogs.filter(log => log.status === 'warning').length}ê±´\nì˜¤ë¥˜: ${auditLogs.filter(log => log.status === 'error').length}ê±´`;
                      alert(summary);
                    }}
                  >
                    ğŸ“ˆ ìš”ì•½ ë³´ê¸°
                  </Button>
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Main Content */}
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div className="space-y-6">
            {/* Status Message */}
            {message && (
              <div className={`p-4 rounded-lg border ${
                message.type === 'success' 
                  ? 'bg-green-50 border-green-200 text-green-800' 
                  : 'bg-red-50 border-red-200 text-red-800'
              }`}>
                <div className="flex items-center justify-between">
                  <div className="flex items-center">
                    <span className="text-lg mr-2">
                      {message.type === 'success' ? 'âœ…' : 'âŒ'}
                    </span>
                    <span className="font-medium">{message.text}</span>
                  </div>
                  <button 
                    onClick={() => setMessage(null)}
                    className="text-sm underline hover:no-underline"
                  >
                    ë‹«ê¸°
                  </button>
                </div>
              </div>
            )}

            {/* Log Statistics */}
            <div className="grid grid-cols-1 md:grid-cols-6 gap-4">
              <Card title="ğŸ“Š ì „ì²´ ë¡œê·¸">
                <div className="text-center">
                  <div className="text-2xl font-bold text-blue-600">{auditLogs.length}</div>
                  <div className="text-xs text-gray-500 mt-1">ì´ ë¡œê·¸ ìˆ˜</div>
                </div>
              </Card>
              <Card title="âœ… ì„±ê³µ">
                <div className="text-center">
                  <div className="text-2xl font-bold text-green-600">
                    {auditLogs.filter(log => log.status === 'success').length}
                  </div>
                  <div className="text-xs text-gray-500 mt-1">ì„±ê³µ ê±´ìˆ˜</div>
                </div>
              </Card>
              <Card title="âš ï¸ ê²½ê³ ">
                <div className="text-center">
                  <div className="text-2xl font-bold text-yellow-600">
                    {auditLogs.filter(log => log.status === 'warning').length}
                  </div>
                  <div className="text-xs text-gray-500 mt-1">ê²½ê³  ê±´ìˆ˜</div>
                </div>
              </Card>
              <Card title="âŒ ì˜¤ë¥˜">
                <div className="text-center">
                  <div className="text-2xl font-bold text-red-600">
                    {auditLogs.filter(log => log.status === 'error').length}
                  </div>
                  <div className="text-xs text-gray-500 mt-1">ì˜¤ë¥˜ ê±´ìˆ˜</div>
                </div>
              </Card>
              <Card title="ğŸ“ˆ í‰ê°€í™œë™">
                <div className="text-center">
                  <div className="text-2xl font-bold text-purple-600">
                    {auditLogs.filter(log => log.category === 'evaluation').length}
                  </div>
                  <div className="text-xs text-gray-500 mt-1">í‰ê°€ ê´€ë ¨</div>
                </div>
              </Card>
              <Card title="ğŸ”§ ì‹œìŠ¤í…œ">
                <div className="text-center">
                  <div className="text-2xl font-bold text-orange-600">
                    {auditLogs.filter(log => log.category === 'system').length}
                  </div>
                  <div className="text-xs text-gray-500 mt-1">ì‹œìŠ¤í…œ ê´€ë ¨</div>
                </div>
              </Card>
            </div>

        {/* Advanced Search and Filter */}
        <Card title="ğŸ” ê³ ê¸‰ ê²€ìƒ‰ ë° í•„í„°">
          <div className="space-y-4">
            <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-3">
              <input
                type="text"
                placeholder="ì‚¬ìš©ì, í™œë™, IP ê²€ìƒ‰..."
                value={searchTermAudit}
                onChange={(e) => setSearchTermAudit(e.target.value)}
                className="border border-gray-300 rounded px-3 py-2 text-sm"
              />
              <select 
                value={userFilter}
                onChange={(e) => setAdminUserFilter(e.target.value)}
                className="border border-gray-300 rounded px-3 py-2 text-sm"
              >
                <option value="all">ëª¨ë“  ì‚¬ìš©ì</option>
                <option value="admin">ê´€ë¦¬ì</option>
                <option value="evaluator">í‰ê°€ì</option>
                <option value="system">ì‹œìŠ¤í…œ</option>
              </select>
              <select 
                value={categoryFilter}
                onChange={(e) => setCategoryFilter(e.target.value)}
                className="border border-gray-300 rounded px-3 py-2 text-sm"
              >
                <option value="all">ëª¨ë“  ì¹´í…Œê³ ë¦¬</option>
                <option value="auth">ì¸ì¦</option>
                <option value="evaluation">í‰ê°€</option>
                <option value="project">í”„ë¡œì íŠ¸</option>
                <option value="user">ì‚¬ìš©ì</option>
                <option value="system">ì‹œìŠ¤í…œ</option>
                <option value="navigation">ë‚´ë¹„ê²Œì´ì…˜</option>
              </select>
              <select 
                value={statusFilterAudit}
                onChange={(e) => setStatusFilterAudit(e.target.value)}
                className="border border-gray-300 rounded px-3 py-2 text-sm"
              >
                <option value="all">ëª¨ë“  ìƒíƒœ</option>
                <option value="success">ì„±ê³µ</option>
                <option value="error">ì˜¤ë¥˜</option>
                <option value="warning">ê²½ê³ </option>
                <option value="info">ì •ë³´</option>
              </select>
              <input 
                type="date" 
                value={dateFilter}
                onChange={(e) => setDateFilter(e.target.value)}
                className="border border-gray-300 rounded px-3 py-2 text-sm"
              />
              <Button 
                variant="secondary" 
                size="sm"
                onClick={() => {
                  setSearchTermAudit('');
                  setAdminUserFilter('all');
                  setCategoryFilter('all');
                  setStatusFilterAudit('all');
                  setDateFilter('');
                }}
              >
                ğŸ—‘ï¸ ì´ˆê¸°í™”
              </Button>
            </div>
            
            <div className="flex justify-between items-center text-sm text-gray-600">
              <span>ì´ {auditLogs.length}ê±´ ì¤‘ {filteredLogs.length}ê±´ í‘œì‹œ</span>
              <div className="flex space-x-4">
                <span>ì„±ê³µ: {filteredLogs.filter(l => l.status === 'success').length}ê±´</span>
                <span>ì˜¤ë¥˜: {filteredLogs.filter(l => l.status === 'error').length}ê±´</span>
                <span>ê²½ê³ : {filteredLogs.filter(l => l.status === 'warning').length}ê±´</span>
              </div>
            </div>
          </div>
        </Card>

        {/* Audit Log List */}
        <Card title="ğŸ“‹ í™œë™ ë‚´ì—­">
          <div className="space-y-2 max-h-96 overflow-y-auto">
            {filteredLogs.length > 0 ? filteredLogs.map((log, index) => (
              <div key={index} className={`border-l-4 bg-gray-50 p-3 rounded-r hover:bg-gray-100 ${
                log.status === 'success' ? 'border-l-green-500' :
                log.status === 'error' ? 'border-l-red-500' :
                log.status === 'warning' ? 'border-l-yellow-500' :
                'border-l-blue-500'
              }`}>
                <div className="flex justify-between items-start">
                  <div className="flex-1">
                    <div className="flex items-center space-x-3 text-sm">
                      <span className="font-medium text-gray-900">{log.user}</span>
                      <span className="text-gray-500">({log.ip})</span>
                      <span className={`px-2 py-1 rounded text-xs font-medium ${
                        log.category === 'auth' ? 'bg-purple-100 text-purple-800' :
                        log.category === 'evaluation' ? 'bg-green-100 text-green-800' :
                        log.category === 'project' ? 'bg-blue-100 text-blue-800' :
                        log.category === 'user' ? 'bg-yellow-100 text-yellow-800' :
                        log.category === 'system' ? 'bg-indigo-100 text-indigo-800' :
                        'bg-gray-100 text-gray-800'
                      }`}>
                        {log.category}
                      </span>
                    </div>
                    <div className="text-sm text-gray-700 mt-1">{log.action}</div>
                    <div className="text-xs text-gray-500 mt-1 font-mono">{log.time}</div>
                  </div>
                  <span className={`px-2 py-1 rounded text-xs font-medium ${
                    log.status === 'success' ? 'bg-green-100 text-green-800' :
                    log.status === 'error' ? 'bg-red-100 text-red-800' :
                    log.status === 'warning' ? 'bg-yellow-100 text-yellow-800' :
                    'bg-blue-100 text-blue-800'
                  }`}>
                    {log.status === 'success' ? 'ì„±ê³µ' :
                     log.status === 'error' ? 'ì˜¤ë¥˜' :
                     log.status === 'warning' ? 'ê²½ê³ ' : 'ì •ë³´'}
                  </span>
                </div>
              </div>
            )) : (
              <div className="text-center py-8 text-gray-500">
                ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.
              </div>
            )}
          </div>
        </Card>
      </div>
    );
  };

  const handleSaveSettings = async () => {
    setLoading(true);
    try {
      // ì‹¤ì œ ì„¤ì • ì €ì¥ ì‹œë®¬ë ˆì´ì…˜
      await new Promise(resolve => setTimeout(resolve, 1000));
      setMessage({ type: 'success', text: 'ì‹œìŠ¤í…œ ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.' });
      
      // ê°ì‚¬ ë¡œê·¸ì— ì„¤ì • ë³€ê²½ ê¸°ë¡ ì¶”ê°€
      const newAuditLog = {
        time: new Date().toLocaleString(),
        user: 'admin@ahp-system.com',
        ip: '192.168.1.100',
        action: 'ì‹œìŠ¤í…œ ì„¤ì • ë³€ê²½ ë° ì €ì¥',
        category: 'system',
        status: 'success'
      };
      setAuditLogs(prev => [newAuditLog, ...prev]);
    } catch (error) {
      setMessage({ type: 'error', text: 'ì„¤ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' });
    } finally {
      setLoading(false);
    }
  };

  const handleResetSettings = () => {
    if (window.confirm('ëª¨ë“  ì„¤ì •ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
      setSystemSettings({
        autoBackup: true,
        emailNotifications: true,
        logRetention: '90',
        maxSessions: '100',
        securityLevel: 'high',
        maintenanceMode: false,
        sessionTimeout: '1',
        passwordMinLength: 8,
        loginAttemptLimit: 5,
        apiAccessControl: true,
        systemErrorAlerts: true,
        backupCompleteAlerts: true,
        performanceThresholdAlerts: false,
        newAdminUserSignupAlerts: true,
        evaluationCompleteAlerts: true,
        abnormalActivityAlerts: false,
        backupFrequency: 'weekly',
        backupTime: '02:00',
        backupRetention: '90'
      });
      setMessage({ type: 'success', text: 'ì„¤ì •ì´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.' });
    }
  };

  const renderSettings = () => (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <h3 className="text-lg font-semibold">ì‹œìŠ¤í…œ ì„¤ì •</h3>
        <div className="flex space-x-2">
          <Button variant="secondary" size="sm" onClick={handleResetSettings}>
            ğŸ”„ ê¸°ë³¸ê°’ ë³µì›
          </Button>
          <Button variant="secondary" size="sm">
            ğŸ“‹ ì„¤ì • ë‚´ë³´ë‚´ê¸°
          </Button>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <Card title="ğŸ”§ ì „ì—­ ì„¤ì •">
          <div className="space-y-4">
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ìë™ ë°±ì—…</span>
              <label className="inline-flex items-center">
                <input 
                  type="checkbox" 
                  className="form-checkbox" 
                  checked={systemSettings.autoBackup}
                  onChange={(e) => setSystemSettings({...systemSettings, autoBackup: e.target.checked})}
                />
                <span className="ml-2 text-sm">í™œì„±í™”</span>
              </label>
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ì´ë©”ì¼ ì•Œë¦¼</span>
              <label className="inline-flex items-center">
                <input 
                  type="checkbox" 
                  className="form-checkbox" 
                  checked={systemSettings.emailNotifications}
                  onChange={(e) => setSystemSettings({...systemSettings, emailNotifications: e.target.checked})}
                />
                <span className="ml-2 text-sm">í™œì„±í™”</span>
              </label>
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ë¡œê·¸ ë³´ê´€ ì •ì±…</span>
              <select 
                className="text-sm border border-gray-300 rounded px-2 py-1"
                value={systemSettings.logRetention}
                onChange={(e) => setSystemSettings({...systemSettings, logRetention: e.target.value})}
              >
                <option value="30">30ì¼</option>
                <option value="60">60ì¼</option>
                <option value="90">90ì¼</option>
                <option value="180">180ì¼</option>
                <option value="365">1ë…„</option>
              </select>
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ</span>
              <select 
                className="text-sm border border-gray-300 rounded px-2 py-1"
                value={systemSettings.sessionTimeout}
                onChange={(e) => setSystemSettings({...systemSettings, sessionTimeout: e.target.value})}
              >
                <option value="0.5">30ë¶„</option>
                <option value="1">1ì‹œê°„</option>
                <option value="2">2ì‹œê°„</option>
                <option value="4">4ì‹œê°„</option>
                <option value="8">8ì‹œê°„</option>
              </select>
            </div>
          </div>
        </Card>

        <Card title="ğŸ” ë³´ì•ˆ ì •ì±…">
          <div className="space-y-4">
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ë¹„ë°€ë²ˆí˜¸ ìµœì†Œ ê¸¸ì´</span>
              <input 
                type="number" 
                value={systemSettings.passwordMinLength}
                onChange={(e) => setSystemSettings({...systemSettings, passwordMinLength: parseInt(e.target.value)})}
                min="6" 
                max="20" 
                className="w-16 text-sm border border-gray-300 rounded px-2 py-1" 
              />
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ë¡œê·¸ì¸ ì‹œë„ ì œí•œ</span>
              <input 
                type="number" 
                value={systemSettings.loginAttemptLimit}
                onChange={(e) => setSystemSettings({...systemSettings, loginAttemptLimit: parseInt(e.target.value)})}
                min="3" 
                max="10" 
                className="w-16 text-sm border border-gray-300 rounded px-2 py-1" 
              />
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">API ì ‘ê·¼ ì œí•œ</span>
              <label className="inline-flex items-center">
                <input 
                  type="checkbox" 
                  className="form-checkbox" 
                  checked={systemSettings.apiAccessControl}
                  onChange={(e) => setSystemSettings({...systemSettings, apiAccessControl: e.target.checked})}
                />
                <span className="ml-2 text-sm">í™œì„±í™”</span>
              </label>
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸</span>
              <Button variant="secondary" size="sm">
                ê´€ë¦¬ (127.0.0.1, 192.168.1.*)
              </Button>
            </div>
          </div>
        </Card>
      </div>

      <Card title="ğŸ“§ ì•Œë¦¼ ì„¤ì •">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div className="space-y-3">
            <h4 className="font-medium text-sm">ì‹œìŠ¤í…œ ì•Œë¦¼</h4>
            <label className="flex items-center">
              <input 
                type="checkbox" 
                className="form-checkbox" 
                checked={systemSettings.systemErrorAlerts}
                onChange={(e) => setSystemSettings({...systemSettings, systemErrorAlerts: e.target.checked})}
              />
              <span className="ml-2 text-sm">ì‹œìŠ¤í…œ ì˜¤ë¥˜</span>
            </label>
            <label className="flex items-center">
              <input 
                type="checkbox" 
                className="form-checkbox" 
                checked={systemSettings.backupCompleteAlerts}
                onChange={(e) => setSystemSettings({...systemSettings, backupCompleteAlerts: e.target.checked})}
              />
              <span className="ml-2 text-sm">ë°±ì—… ì™„ë£Œ</span>
            </label>
            <label className="flex items-center">
              <input 
                type="checkbox" 
                className="form-checkbox" 
                checked={systemSettings.performanceThresholdAlerts}
                onChange={(e) => setSystemSettings({...systemSettings, performanceThresholdAlerts: e.target.checked})}
              />
              <span className="ml-2 text-sm">ì„±ëŠ¥ ì„ê³„ì¹˜ ì´ˆê³¼</span>
            </label>
          </div>
          <div className="space-y-3">
            <h4 className="font-medium text-sm">ì‚¬ìš©ì ì•Œë¦¼</h4>
            <label className="flex items-center">
              <input 
                type="checkbox" 
                className="form-checkbox" 
                checked={systemSettings.newAdminUserSignupAlerts}
                onChange={(e) => setSystemSettings({...systemSettings, newAdminUserSignupAlerts: e.target.checked})}
              />
              <span className="ml-2 text-sm">ìƒˆ ì‚¬ìš©ì ê°€ì…</span>
            </label>
            <label className="flex items-center">
              <input 
                type="checkbox" 
                className="form-checkbox" 
                checked={systemSettings.evaluationCompleteAlerts}
                onChange={(e) => setSystemSettings({...systemSettings, evaluationCompleteAlerts: e.target.checked})}
              />
              <span className="ml-2 text-sm">í‰ê°€ ì™„ë£Œ</span>
            </label>
            <label className="flex items-center">
              <input 
                type="checkbox" 
                className="form-checkbox" 
                checked={systemSettings.abnormalActivityAlerts}
                onChange={(e) => setSystemSettings({...systemSettings, abnormalActivityAlerts: e.target.checked})}
              />
              <span className="ml-2 text-sm">ë¹„ì •ìƒ í™œë™ ê°ì§€</span>
            </label>
          </div>
        </div>
      </Card>

      <Card title="ğŸ’¾ ë°±ì—… ì„¤ì •">
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">ë°±ì—… ì£¼ê¸°</label>
            <select 
              className="w-full text-sm border border-gray-300 rounded px-3 py-2"
              value={systemSettings.backupFrequency}
              onChange={(e) => setSystemSettings({...systemSettings, backupFrequency: e.target.value})}
            >
              <option value="daily">ë§¤ì¼</option>
              <option value="weekly">ë§¤ì£¼</option>
              <option value="monthly">ë§¤ì›”</option>
            </select>
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">ë°±ì—… ì‹œê°„</label>
            <input 
              type="time" 
              value={systemSettings.backupTime}
              onChange={(e) => setSystemSettings({...systemSettings, backupTime: e.target.value})}
              className="w-full text-sm border border-gray-300 rounded px-3 py-2" 
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">ë³´ê´€ ê¸°ê°„</label>
            <select 
              className="w-full text-sm border border-gray-300 rounded px-3 py-2"
              value={systemSettings.backupRetention}
              onChange={(e) => setSystemSettings({...systemSettings, backupRetention: e.target.value})}
            >
              <option value="7">7ì¼</option>
              <option value="30">30ì¼</option>
              <option value="90">90ì¼</option>
              <option value="365">1ë…„</option>
            </select>
          </div>
        </div>
      </Card>

      <Card title="ğŸ“Š í˜„ì¬ ì„¤ì • ìƒíƒœ">
        <div className="bg-gray-50 p-4 rounded">
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm">
            <div>
              <span className="font-medium">ìë™ ë°±ì—…:</span>
              <span className={systemSettings.autoBackup ? 'text-green-600 ml-1' : 'text-red-600 ml-1'}>
                {systemSettings.autoBackup ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}
              </span>
            </div>
            <div>
              <span className="font-medium">ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ:</span>
              <span className="ml-1">{systemSettings.sessionTimeout}ì‹œê°„</span>
            </div>
            <div>
              <span className="font-medium">ë¡œê·¸ ë³´ê´€:</span>
              <span className="ml-1">{systemSettings.logRetention}ì¼</span>
            </div>
            <div>
              <span className="font-medium">ë°±ì—… ì£¼ê¸°:</span>
              <span className="ml-1">
                {systemSettings.backupFrequency === 'daily' ? 'ë§¤ì¼' :
                 systemSettings.backupFrequency === 'weekly' ? 'ë§¤ì£¼' : 'ë§¤ì›”'}
              </span>
            </div>
          </div>
        </div>
      </Card>

      <div className="flex justify-end space-x-3">
        <Button variant="secondary" disabled={loading}>
          ì·¨ì†Œ
        </Button>
        <Button variant="primary" onClick={handleSaveSettings} disabled={loading}>
          {loading ? 'ì €ì¥ ì¤‘...' : 'ğŸ’¾ ì„¤ì • ì €ì¥ ë° ì ìš©'}
        </Button>
      </div>
    </div>
  );

  const [backupProgress, setBackupProgress] = useState(0);
  const [backupInProgress, setBackupInProgress] = useState(false);
  const [backupFiles, setBackupFiles] = useState([
    { date: '2024-02-20 02:00', size: '1.2GB', type: 'auto', status: 'success', id: 'backup-1' },
    { date: '2024-02-19 15:30', size: '1.1GB', type: 'manual', status: 'success', id: 'backup-2' },
    { date: '2024-02-19 02:00', size: '1.1GB', type: 'auto', status: 'success', id: 'backup-3' },
    { date: '2024-02-18 02:00', size: '1.0GB', type: 'auto', status: 'success', id: 'backup-4' },
    { date: '2024-02-17 02:00', size: '980MB', type: 'auto', status: 'failed', id: 'backup-5' }
  ]);

  const handleManualBackup = async () => {
    setBackupInProgress(true);
    setBackupProgress(0);
    
    try {
      // ë°±ì—… ì§„í–‰ ì‹œë®¬ë ˆì´ì…˜
      for (let i = 0; i <= 100; i += 10) {
        await new Promise(resolve => setTimeout(resolve, 200));
        setBackupProgress(i);
      }
      
      // ìƒˆ ë°±ì—… íŒŒì¼ ì¶”ê°€
      const newBackup = {
        date: new Date().toLocaleString(),
        size: `${(Math.random() * 0.5 + 1).toFixed(1)}GB`,
        type: 'manual' as const,
        status: 'success' as const,
        id: `backup-${Date.now()}`
      };
      
      setBackupFiles(prev => [newBackup, ...prev]);
      setMessage({ type: 'success', text: 'ìˆ˜ë™ ë°±ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.' });
      
      // ê°ì‚¬ ë¡œê·¸ì— ë°±ì—… ê¸°ë¡ ì¶”ê°€
      const newAuditLog = {
        time: new Date().toLocaleString(),
        user: 'admin@ahp-system.com',
        ip: '192.168.1.100',
        action: 'ìˆ˜ë™ ë°±ì—… ì‹¤í–‰ ì™„ë£Œ',
        category: 'system',
        status: 'success'
      };
      setAuditLogs(prev => [newAuditLog, ...prev]);
      
    } catch (error) {
      setMessage({ type: 'error', text: 'ë°±ì—… ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' });
    } finally {
      setBackupInProgress(false);
      setBackupProgress(0);
    }
  };

  const handleDownloadBackup = (backupId: string) => {
    const backup = backupFiles.find(b => b.id === backupId);
    if (backup) {
      setMessage({ type: 'success', text: `ë°±ì—… íŒŒì¼ ${backup.date} (${backup.size}) ë‹¤ìš´ë¡œë“œë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.` });
      
      // ì‹¤ì œ ë‹¤ìš´ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜
      const link = document.createElement('a');
      link.href = '#';
      link.download = `ahp_backup_${backup.date.replace(/[\s:]/g, '_')}.sql`;
      link.click();
    }
  };

  const handleRestoreBackup = (backupId: string) => {
    const backup = backupFiles.find(b => b.id === backupId);
    if (backup && window.confirm(`ë°±ì—… íŒŒì¼ ${backup.date}ë¡œ ì‹œìŠ¤í…œì„ ë³µì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nâš ï¸ í˜„ì¬ ë°ì´í„°ê°€ ëª¨ë‘ ì‚­ì œë˜ê³  ë°±ì—… ì‹œì ìœ¼ë¡œ ë˜ëŒì•„ê°‘ë‹ˆë‹¤.`)) {
      setMessage({ type: 'success', text: `ë°±ì—… íŒŒì¼ ${backup.date}ë¡œ ë³µì›ì„ ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ì‹œìŠ¤í…œì´ ì¬ì‹œì‘ë©ë‹ˆë‹¤.` });
      
      // ê°ì‚¬ ë¡œê·¸ì— ë³µì› ê¸°ë¡ ì¶”ê°€
      const newAuditLog = {
        time: new Date().toLocaleString(),
        user: 'admin@ahp-system.com',
        ip: '192.168.1.100',
        action: `ì‹œìŠ¤í…œ ë³µì› ì‹¤í–‰: ${backup.date}`,
        category: 'system',
        status: 'warning'
      };
      setAuditLogs(prev => [newAuditLog, ...prev]);
    }
  };

  const handleDeleteBackup = (backupId: string) => {
    const backup = backupFiles.find(b => b.id === backupId);
    if (backup && window.confirm(`ë°±ì—… íŒŒì¼ ${backup.date}ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
      setBackupFiles(prev => prev.filter(b => b.id !== backupId));
      setMessage({ type: 'success', text: 'ë°±ì—… íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.' });
    }
  };

  const renderBackup = () => (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <h3 className="text-lg font-semibold">ë°±ì—… ë° ë³µì›</h3>
        <div className="flex space-x-2">
          <Button variant="secondary" size="sm">
            ğŸ“Š ë°±ì—… í†µê³„
          </Button>
          <Button variant="secondary" size="sm">
            ğŸ“‹ ë°±ì—… ìŠ¤ì¼€ì¤„
          </Button>
        </div>
      </div>

      {backupInProgress && (
        <Card title="ğŸ”„ ë°±ì—… ì§„í–‰ ì¤‘">
          <div className="space-y-3">
            <div className="flex justify-between text-sm">
              <span>ë°±ì—… ì§„í–‰ë¥ </span>
              <span>{backupProgress}%</span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-3">
              <div 
                className="bg-blue-600 h-3 rounded-full transition-all duration-300" 
                style={{ width: `${backupProgress}%` }}
              ></div>
            </div>
            <div className="text-xs text-gray-500">
              ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ì¤‘... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.
            </div>
          </div>
        </Card>
      )}

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <Card title="âš¡ ì¦‰ì‹œ ë°±ì—…">
          <div className="space-y-4">
            <div className="text-sm text-gray-600">
              ì „ì²´ ì‹œìŠ¤í…œ ë°ì´í„°ë¥¼ ì¦‰ì‹œ ë°±ì—…í•©ë‹ˆë‹¤.
            </div>
            <div className="space-y-2">
              <label className="flex items-center">
                <input type="checkbox" className="form-checkbox" defaultChecked disabled />
                <span className="ml-2 text-sm">ì‚¬ìš©ì ë°ì´í„° (27ëª…)</span>
              </label>
              <label className="flex items-center">
                <input type="checkbox" className="form-checkbox" defaultChecked disabled />
                <span className="ml-2 text-sm">í”„ë¡œì íŠ¸ ë°ì´í„° (1ê°œ)</span>
              </label>
              <label className="flex items-center">
                <input type="checkbox" className="form-checkbox" defaultChecked disabled />
                <span className="ml-2 text-sm">í‰ê°€ ê²°ê³¼ (234ê±´)</span>
              </label>
              <label className="flex items-center">
                <input type="checkbox" className="form-checkbox" defaultChecked />
                <span className="ml-2 text-sm">ì‹œìŠ¤í…œ ì„¤ì •</span>
              </label>
              <label className="flex items-center">
                <input type="checkbox" className="form-checkbox" defaultChecked />
                <span className="ml-2 text-sm">ê°ì‚¬ ë¡œê·¸</span>
              </label>
            </div>
            <Button 
              variant="primary" 
              className="w-full" 
              onClick={handleManualBackup}
              disabled={backupInProgress}
            >
              {backupInProgress ? 'ë°±ì—… ì‹¤í–‰ ì¤‘...' : 'ğŸ’¾ ì§€ê¸ˆ ë°±ì—… ì‹¤í–‰'}
            </Button>
          </div>
        </Card>

        <Card title="â° ìë™ ë°±ì—… ì„¤ì •">
          <div className="space-y-4">
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ìë™ ë°±ì—…</span>
              <label className="inline-flex items-center">
                <input 
                  type="checkbox" 
                  className="form-checkbox" 
                  checked={systemSettings.autoBackup}
                  onChange={(e) => setSystemSettings({...systemSettings, autoBackup: e.target.checked})}
                />
                <span className="ml-2 text-sm">í™œì„±í™”</span>
              </label>
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ë°±ì—… ì£¼ê¸°</span>
              <select 
                className="text-sm border border-gray-300 rounded px-2 py-1"
                value={systemSettings.backupFrequency}
                onChange={(e) => setSystemSettings({...systemSettings, backupFrequency: e.target.value})}
              >
                <option value="daily">ë§¤ì¼</option>
                <option value="weekly">ë§¤ì£¼</option>
                <option value="monthly">ë§¤ì›”</option>
              </select>
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ë°±ì—… ì‹œê°„</span>
              <input 
                type="time" 
                value={systemSettings.backupTime}
                onChange={(e) => setSystemSettings({...systemSettings, backupTime: e.target.value})}
                className="text-sm border border-gray-300 rounded px-2 py-1" 
              />
            </div>
            <div className="flex justify-between items-center">
              <span className="text-sm text-gray-600">ë³´ê´€ ê¸°ê°„</span>
              <select 
                className="text-sm border border-gray-300 rounded px-2 py-1"
                value={systemSettings.backupRetention}
                onChange={(e) => setSystemSettings({...systemSettings, backupRetention: e.target.value})}
              >
                <option value="7">7ì¼</option>
                <option value="30">30ì¼</option>
                <option value="90">90ì¼</option>
                <option value="365">1ë…„</option>
              </select>
            </div>
            <div className="bg-blue-50 p-3 rounded text-sm">
              <div className="font-medium text-blue-800">ë‹¤ìŒ ìë™ ë°±ì—…</div>
              <div className="text-blue-600">
                {systemSettings.backupFrequency === 'daily' ? 'ë‚´ì¼' :
                 systemSettings.backupFrequency === 'weekly' ? 'ë‹¤ìŒ ì£¼ ì›”ìš”ì¼' : 'ë‹¤ìŒ ë‹¬ 1ì¼'} {systemSettings.backupTime}
              </div>
            </div>
          </div>
        </Card>
      </div>

      <Card title="ğŸ“Š ë°±ì—… í˜„í™©">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div className="text-center">
            <div className="text-2xl font-bold text-green-600">{backupFiles.filter(b => b.status === 'success').length}</div>
            <div className="text-sm text-gray-500">ì„±ê³µí•œ ë°±ì—…</div>
          </div>
          <div className="text-center">
            <div className="text-2xl font-bold text-red-600">{backupFiles.filter(b => b.status === 'failed').length}</div>
            <div className="text-sm text-gray-500">ì‹¤íŒ¨í•œ ë°±ì—…</div>
          </div>
          <div className="text-center">
            <div className="text-2xl font-bold text-blue-600">
              {backupFiles.reduce((total, backup) => total + parseFloat(backup.size.replace('GB', '').replace('MB', '0.')), 0).toFixed(1)}GB
            </div>
            <div className="text-sm text-gray-500">ì´ ë°±ì—… í¬ê¸°</div>
          </div>
          <div className="text-center">
            <div className="text-2xl font-bold text-purple-600">{backupFiles.filter(b => b.type === 'manual').length}</div>
            <div className="text-sm text-gray-500">ìˆ˜ë™ ë°±ì—…</div>
          </div>
        </div>
      </Card>

      <Card title="ğŸ“¥ ë°±ì—… íŒŒì¼ ëª©ë¡">
        <div className="space-y-3">
          {backupFiles.map((backup) => (
            <div key={backup.id} className="flex justify-between items-center p-3 border rounded hover:bg-gray-50">
              <div className="flex items-center space-x-4">
                <div className={`w-3 h-3 rounded-full ${
                  backup.status === 'success' ? 'bg-green-500' :
                  backup.status === 'failed' ? 'bg-red-500' : 'bg-yellow-500'
                }`}></div>
                <div>
                  <div className="text-sm font-medium">{backup.date}</div>
                  <div className="text-xs text-gray-500">
                    {backup.size} Â· {backup.type === 'auto' ? 'ìë™' : 'ìˆ˜ë™'} Â· 
                    {backup.status === 'success' ? ' ì„±ê³µ' : backup.status === 'failed' ? ' ì‹¤íŒ¨' : ' ì§„í–‰ì¤‘'}
                  </div>
                </div>
              </div>
              <div className="flex space-x-2">
                {backup.status === 'success' && (
                  <>
                    <Button 
                      variant="secondary" 
                      size="sm"
                      onClick={() => handleDownloadBackup(backup.id)}
                    >
                      ğŸ“¥ ë‹¤ìš´ë¡œë“œ
                    </Button>
                    <Button 
                      variant="secondary" 
                      size="sm"
                      onClick={() => handleRestoreBackup(backup.id)}
                    >
                      ğŸ”„ ë³µì›
                    </Button>
                  </>
                )}
                <Button 
                  variant="secondary" 
                  size="sm" 
                  className="text-red-600"
                  onClick={() => handleDeleteBackup(backup.id)}
                >
                  ğŸ—‘ï¸ ì‚­ì œ
                </Button>
              </div>
            </div>
          ))}
          {backupFiles.length === 0 && (
            <div className="text-center py-8 text-gray-500">
              ë°±ì—… íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ë°±ì—…ì„ ì‹¤í–‰í•´ë³´ì„¸ìš”.
            </div>
          )}
        </div>
      </Card>
    </div>
  );

  return (
    <div className="max-w-7xl mx-auto space-y-6">
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold text-gray-900">ì´ê´„ ê´€ë¦¬ì</h1>
          <p className="text-gray-600">AHP ì‹œìŠ¤í…œ ì „ì²´ ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§</p>
        </div>
        <div className="flex items-center space-x-3">
          <div className="text-sm text-gray-600">
            ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: {new Date().toLocaleString()}
          </div>
          <Button variant="secondary" size="sm">
            ìƒˆë¡œê³ ì¹¨
          </Button>
        </div>
      </div>

      {/* Navigation Menu - 2 Row Button Layout */}
      <div className="bg-white rounded-lg border border-gray-200 p-6">
        <div className="space-y-4">
          {/* First Row - Dashboard & Core Management */}
          <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
            {[
              { id: 'dashboard', label: 'ì‹œìŠ¤í…œ ëŒ€ì‹œë³´ë“œ', icon: 'ğŸ“Š', desc: 'ì „ì²´ í˜„í™© ë° í†µê³„' },
              { id: 'users', label: 'ì‚¬ìš©ì ê´€ë¦¬', icon: 'ğŸ‘¥', desc: 'ê³„ì • ë° ê¶Œí•œ ê´€ë¦¬' },
              { id: 'projects', label: 'ì „ì²´ í”„ë¡œì íŠ¸', icon: 'ğŸ“‹', desc: 'ëª¨ë“  í”„ë¡œì íŠ¸ í†µí•© ê´€ë¦¬' },
              { id: 'monitoring', label: 'ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§', icon: 'âš¡', desc: 'ì‹¤ì‹œê°„ ì„±ëŠ¥ ì¶”ì ' }
            ].map((item) => (
              <button
                key={item.id}
                onClick={() => setActiveTab(item.id as any)}
                className={`p-4 rounded-lg border-2 transition-all duration-200 text-center ${
                  activeTab === item.id
                    ? 'border-blue-500 bg-blue-50 text-blue-700'
                    : 'border-gray-200 bg-white text-gray-700 hover:border-blue-300 hover:bg-blue-50'
                }`}
              >
                <div className="text-2xl mb-2">{item.icon}</div>
                <div className="font-medium text-sm">{item.label}</div>
                <div className="text-xs text-gray-500 mt-1">{item.desc}</div>
              </button>
            ))}
          </div>

          {/* Second Row - Advanced Admin Functions */}
          <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
            {[
              { id: 'database', label: 'DB ê´€ë¦¬', icon: 'ğŸ—„ï¸', desc: 'ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ ê´€ë¦¬' },
              { id: 'audit', label: 'ê°ì‚¬ ë¡œê·¸', icon: 'ğŸ“', desc: 'í™œë™ ë‚´ì—­ ë° ë³´ì•ˆ' },
              { id: 'settings', label: 'ì‹œìŠ¤í…œ ì„¤ì •', icon: 'âš™ï¸', desc: 'ì „ì—­ ì„¤ì • ë° ì •ì±…' },
              { id: 'backup', label: 'ë°±ì—…/ë³µì›', icon: 'ğŸ’¾', desc: 'ë°ì´í„° ë°±ì—… ê´€ë¦¬' }
            ].map((item) => (
              <button
                key={item.id}
                onClick={() => setActiveTab(item.id as any)}
                className={`p-4 rounded-lg border-2 transition-all duration-200 text-center ${
                  activeTab === item.id
                    ? 'border-blue-500 bg-blue-50 text-blue-700'
                    : 'border-gray-200 bg-white text-gray-700 hover:border-blue-300 hover:bg-blue-50'
                }`}
              >
                <div className="text-2xl mb-2">{item.icon}</div>
                <div className="font-medium text-sm">{item.label}</div>
                <div className="text-xs text-gray-500 mt-1">{item.desc}</div>
              </button>
            ))}
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="bg-white rounded-lg border border-gray-200">
        <div className="p-6">
          {activeTab === 'dashboard' && renderDashboard()}
          {activeTab === 'users' && renderAdminUsers()}
          {activeTab === 'projects' && renderProjects()}
          {activeTab === 'monitoring' && renderMonitoring()}
          {activeTab === 'database' && renderDatabase()}
          {activeTab === 'audit' && renderAudit()}
          {activeTab === 'settings' && renderSettings()}
          {activeTab === 'backup' && renderBackup()}
          {activeTab === 'system' && renderSystem()}
        </div>
      </div>
    </div>
  );
};

export default SuperAdminDashboard;
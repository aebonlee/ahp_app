"use strict";(self.webpackChunkahp_research_platform=self.webpackChunkahp_research_platform||[]).push([[304,668],{1287:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(2555),r=s(5043),i=s(3593),c=s(7907),n=s(579);const l=e=>{let{items:t,values:s,onUpdate:a}=e;const r=[1,2,3,4,5,6,7,8,9],i=(e,t)=>e===t?1:s[e][t],c=e=>1===e?"1":e>1?e.toString():"1/".concat(Math.round(1/e)),l=(e,t,s)=>e===t?"bg-gray-100":e>t?"bg-gray-50":1===s?"bg-white border-gray-300":"bg-blue-50 border-blue-300";return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full border-collapse",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"w-32 p-2 bg-gray-100 border border-gray-300 text-xs font-medium text-gray-700",children:"\ube44\uad50 \ud56d\ubaa9"}),t.map((e,t)=>(0,n.jsx)("th",{className:"p-2 bg-gray-100 border border-gray-300 text-xs font-medium text-gray-700 min-w-[100px]",children:e},t))]})}),(0,n.jsx)("tbody",{children:t.map((e,d)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"p-2 bg-gray-100 border border-gray-300 text-xs font-medium text-gray-700",children:e}),t.map((t,o)=>(0,n.jsx)("td",{className:"p-1 border border-gray-300 ".concat(l(d,o,i(d,o))),children:d===o?(0,n.jsx)("div",{className:"text-center p-2 font-semibold text-gray-700",children:"1"}):d>o?(0,n.jsx)("div",{className:"text-center p-2 text-gray-500 text-xs",children:c(i(d,o))}):(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("div",{className:"text-xs text-gray-600 mb-1",children:[e," vs ",t]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1 justify-center",children:r.map(e=>(0,n.jsx)("button",{onClick:()=>((e,t,r)=>{if(e===t)return;const i=s.map(e=>[...e]);i[e][t]=r,i[t][e]=1/r,a(i)})(d,o,e),className:"w-6 h-6 text-xs rounded transition-all ".concat(i(d,o)===e?"bg-sky-400 text-white border-sky-500 shadow-md":"bg-blue-500 text-white border-blue-600 hover:bg-blue-600"," border"),children:e},e))}),(0,n.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["\ud604\uc7ac: ",(0,n.jsx)("span",{className:"font-semibold",children:c(i(d,o))})]})]})},o))]},d))})]})}),(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,n.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\ud83d\udccb \uc30d\ub300\ube44\uad50 \ubc29\ubc95"}),(0,n.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,n.jsxs)("li",{children:["\u2022 \uc0c1\ub2e8 \uc0bc\uac01\ud615 \uc601\uc5ed\uc758 ",(0,n.jsx)("span",{className:"font-semibold text-blue-800",children:"\ud30c\ub791\uc0c9 \ubc84\ud2bc"}),"\uc744 \ud074\ub9ad\ud558\uc5ec \uc911\uc694\ub3c4\ub97c \uc120\ud0dd\ud558\uc138\uc694"]}),(0,n.jsxs)("li",{children:["\u2022 \uc120\ud0dd\ub41c \uac12\uc740 ",(0,n.jsx)("span",{className:"font-semibold text-sky-600",children:"\ud558\ub298\uc0c9"}),"\uc73c\ub85c \ud45c\uc2dc\ub429\ub2c8\ub2e4"]}),(0,n.jsx)("li",{children:"\u2022 \ub300\uac01\uc120\uc740 \uc790\ub3d9\uc73c\ub85c 1(\ub3d9\ub4f1)\uc774\uba70, \ud558\ub2e8 \uc0bc\uac01\ud615\uc740 \uc790\ub3d9\uc73c\ub85c \uc5ed\uc218\uac00 \uacc4\uc0b0\ub429\ub2c8\ub2e4"}),(0,n.jsx)("li",{children:"\u2022 \uc22b\uc790\uac00 \ud074\uc218\ub85d \ud589 \ud56d\ubaa9\uc774 \uc5f4 \ud56d\ubaa9\ubcf4\ub2e4 \ub354 \uc911\uc694\ud568\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4"})]})]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:["\uc785\ub825 \uc644\ub8cc: ",(0,n.jsx)("span",{className:"font-semibold",children:t.length>1?"".concat(s.slice(0,-1).reduce((e,t,s)=>e+t.slice(s+1).filter(e=>1!==e).length,0)," / ").concat(t.length*(t.length-1)/2):"0 / 0"})]})})]})},d=e=>{let{currentMatrix:t,onClose:s}=e;const[a,c]=(0,r.useState)("guide"),l=()=>{const e=[],{items:s,values:a}=t;for(let t=0;t<s.length;t++)for(let r=t+1;r<s.length;r++)for(let i=r+1;i<s.length;i++){const c=a[t][r],n=a[r][i],l=a[t][i];c>1&&n>1&&l<c*n*.5&&e.push({row:t,col:i,suggestion:"".concat(s[t],"\uc640 ").concat(s[i],"\uc758 \ube44\uad50 \uac12\uc744 \uc7ac\uac80\ud1a0\ud574\ubcf4\uc138\uc694")})}return e.slice(0,3)};return(0,n.jsx)(i.A,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900",children:"\ud310\ub2e8 \ub3c4\uc6b0\ubbf8"}),(0,n.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,n.jsx)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[{id:"guide",label:"\uac00\uc774\ub4dc",icon:"\ud83d\udcd6"},{id:"analysis",label:"\ubd84\uc11d",icon:"\ud83d\udcca"},{id:"tips",label:"\ud301",icon:"\ud83d\udca1"}].map(e=>(0,n.jsxs)("button",{onClick:()=>c(e.id),className:"flex-1 px-3 py-2 text-xs font-medium rounded-md transition-colors ".concat(a===e.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,n.jsx)("span",{className:"mr-1",children:e.icon}),e.label]},e.id))}),(0,n.jsxs)("div",{className:"min-h-[300px]",children:["guide"===a&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\ud83c\udfaf \ud3c9\uac00 \uae30\uc900"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsxs)("div",{className:"bg-green-50 p-2 rounded border",children:[(0,n.jsx)("div",{className:"font-medium text-green-800",children:"1 - \ub3d9\ub4f1"}),(0,n.jsx)("div",{className:"text-green-600 text-xs",children:"\ub450 \uc694\uc18c\uac00 \uac19\uc740 \uc911\uc694\ub3c4"})]}),(0,n.jsxs)("div",{className:"bg-blue-50 p-2 rounded border",children:[(0,n.jsx)("div",{className:"font-medium text-blue-800",children:"3 - \uc57d\uac04 \uc911\uc694"}),(0,n.jsx)("div",{className:"text-blue-600 text-xs",children:"\ud55c\ucabd\uc774 \uc57d\uac04 \ub354 \uc911\uc694"})]}),(0,n.jsxs)("div",{className:"bg-purple-50 p-2 rounded border",children:[(0,n.jsx)("div",{className:"font-medium text-purple-800",children:"5 - \uc911\uc694"}),(0,n.jsx)("div",{className:"text-purple-600 text-xs",children:"\ud55c\ucabd\uc774 \ud655\uc2e4\ud788 \uc911\uc694"})]}),(0,n.jsxs)("div",{className:"bg-red-50 p-2 rounded border",children:[(0,n.jsx)("div",{className:"font-medium text-red-800",children:"7 - \ub9e4\uc6b0 \uc911\uc694"}),(0,n.jsx)("div",{className:"text-red-600 text-xs",children:"\ud55c\ucabd\uc774 \ub9e4\uc6b0 \uc911\uc694"})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 p-2 rounded border",children:[(0,n.jsx)("div",{className:"font-medium text-gray-800",children:"9 - \uc808\ub300\uc801\uc73c\ub85c \uc911\uc694"}),(0,n.jsx)("div",{className:"text-gray-600 text-xs",children:"\ud55c\ucabd\uc774 \uc555\ub3c4\uc801\uc73c\ub85c \uc911\uc694"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\ud83d\udca1 \ud310\ub2e8 \uc694\ub839"}),(0,n.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1",children:[(0,n.jsx)("li",{children:"\u2022 \ub450 \uc694\uc18c\ub97c \uc9c1\uc811 \ube44\uad50\ud558\uc5ec \uc0c1\ub300\uc801 \uc911\uc694\ub3c4\ub97c \ud3c9\uac00\ud558\uc138\uc694"}),(0,n.jsx)("li",{children:"\u2022 \ud655\uc2e0\uc774 \uc11c\uc9c0 \uc54a\uc73c\uba74 \ub0ae\uc740 \uc22b\uc790(1, 3)\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),(0,n.jsx)("li",{children:"\u2022 \uc804\uccb4 \uc77c\uad00\uc131\uc744 \uace0\ub824\ud558\uc5ec \ube44\uc2b7\ud55c \ud328\ud134\uc73c\ub85c \ud3c9\uac00\ud558\uc138\uc694"}),(0,n.jsx)("li",{children:"\u2022 \uc2e4\uc81c \uc5c5\ubb34 \uc0c1\ud669\uc744 \uad6c\uccb4\uc801\uc73c\ub85c \uc0c1\uc0c1\ud574\ubcf4\uc138\uc694"})]})]})]}),"analysis"===a&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\ud83d\udcca \uc77c\uad00\uc131 \ubd84\uc11d"}),void 0!==t.consistencyRatio&&(0,n.jsxs)("div",{className:"p-3 rounded border ".concat(t.consistencyRatio<=.1?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"),children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"\ud604\uc7ac CR \uac12"}),(0,n.jsx)("span",{className:"font-bold ".concat(t.consistencyRatio<=.1?"text-green-600":"text-orange-600"),children:t.consistencyRatio.toFixed(3)})]}),(0,n.jsx)("div",{className:"text-xs text-gray-600",children:t.consistencyRatio<=.1?"\u2713 \uc77c\uad00\uc131\uc774 \uc591\ud638\ud569\ub2c8\ub2e4":"\u26a0 \uc77c\uad00\uc131 \uac1c\uc120\uc774 \ud544\uc694\ud569\ub2c8\ub2e4 (\uae30\uc900: \u2264 0.1)"})]})]}),t.consistencyRatio&&t.consistencyRatio>.1&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\ud83d\udd27 \uac1c\uc120 \uc81c\uc548"}),(0,n.jsx)("div",{className:"space-y-2",children:l().map((e,t)=>(0,n.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2",children:(0,n.jsx)("div",{className:"text-sm text-yellow-800",children:e.suggestion})},t))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\ud83d\udcc8 \ud310\ub2e8 \ud604\ud669"}),(0,n.jsx)("div",{className:"space-y-2 text-sm",children:t.items.map((e,s)=>(0,n.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,n.jsx)("span",{children:e}),(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:[t.values[s].filter((e,t)=>t!==s&&1!==e).length,"\uac1c \ube44\uad50 \uc644\ub8cc"]})]},s))})]})]}),"tips"===a&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\ud83e\udd14 \ube44\uad50 \uc9c8\ubb38 \uac00\uc774\ub4dc"}),(0,n.jsx)("div",{className:"space-y-3",children:[{criteria:"\uc131\ub2a5 vs \ube44\uc6a9",questions:["\uc2dc\uc2a4\ud15c\uc758 \ube60\ub978 \ucc98\ub9ac\uc18d\ub3c4\uac00 \ucd94\uac00 \ube44\uc6a9\ubcf4\ub2e4 \uc5bc\ub9c8\ub098 \ub354 \uc911\uc694\ud55c\uac00?","\uc608\uc0b0 \uc808\uc57d\uc774 \uc131\ub2a5 \ud5a5\uc0c1\ubcf4\ub2e4 \uc6b0\uc120\uc2dc\ub418\ub294\uac00?","\uc7a5\uae30\uc801 \uad00\uc810\uc5d0\uc11c \uc131\ub2a5\uacfc \ube44\uc6a9 \uc911 \uc5b4\ub290 \uac83\uc774 \ub354 \uc911\uc694\ud55c\uac00?"]},{criteria:"\ucc98\ub9ac\uc18d\ub3c4 vs \uc548\uc815\uc131",questions:["\ube60\ub978 \uc751\ub2f5\uc2dc\uac04\uc774 \uc2dc\uc2a4\ud15c \uc548\uc815\uc131\ubcf4\ub2e4 \uc911\uc694\ud55c\uac00?","\uac00\ub054 \ub290\ub824\ub3c4 \uc548\uc815\uc801\uc778 \uc2dc\uc2a4\ud15c\uc774 \ub354 \ub098\uc740\uac00?","\uc0ac\uc6a9\uc790 \ub9cc\uc871\ub3c4 \uad00\uc810\uc5d0\uc11c \uc5b4\ub290 \uac83\uc774 \ub354 \uc911\uc694\ud55c\uac00?"]}].map((e,t)=>(0,n.jsxs)("div",{className:"border border-gray-200 rounded p-3",children:[(0,n.jsx)("h5",{className:"font-medium text-gray-800 mb-2",children:e.criteria}),(0,n.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:e.questions.map((e,t)=>(0,n.jsxs)("li",{children:["\u2022 ",e]},t))})]},t))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\u26a1 \ube60\ub978 \ud301"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,n.jsxs)("div",{className:"bg-blue-50 p-2 rounded border-l-4 border-blue-400",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-blue-800",children:"\uc6b0\uc120\uc21c\uc704 \uba85\ud655\ud654"}),(0,n.jsx)("div",{className:"text-xs text-blue-600",children:"\uac00\uc7a5 \uc911\uc694\ud55c \uac83\ubd80\ud130 \uc21c\uc11c\ub97c \uc815\ud574\ubcf4\uc138\uc694"})]}),(0,n.jsxs)("div",{className:"bg-green-50 p-2 rounded border-l-4 border-green-400",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-green-800",children:"\uc2e4\ubb34 \uacbd\ud5d8 \ud65c\uc6a9"}),(0,n.jsx)("div",{className:"text-xs text-green-600",children:"\uc2e4\uc81c \uc5c5\ubb34\uc5d0\uc11c \uacaa\uc740 \uacbd\ud5d8\uc744 \ub5a0\uc62c\ub824\ubcf4\uc138\uc694"})]}),(0,n.jsxs)("div",{className:"bg-purple-50 p-2 rounded border-l-4 border-purple-400",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-purple-800",children:"\ubaa9\ud45c \uc911\uc2ec \uc0ac\uace0"}),(0,n.jsx)("div",{className:"text-xs text-purple-600",children:"\ud504\ub85c\uc81d\ud2b8 \ubaa9\ud45c \ub2ec\uc131\uc5d0 \ub3c4\uc6c0\ub418\ub294 \uac83\uc744 \uc6b0\uc120\ud558\uc138\uc694"})]})]})]})]})]})]})})};var o=s(9304);const u=e=>{let{projectId:t,projectTitle:s,onComplete:u,onBack:x}=e;const[m,h]=(0,r.useState)([]),[p,v]=(0,r.useState)([]),[g,j]=(0,r.useState)(""),[y,b]=(0,r.useState)(null),[f,N]=(0,r.useState)(!1),[A,w]=(0,r.useState)(!0),[k,C]=(0,r.useState)(!1),[I,S]=(0,r.useState)(!1),[R,T]=(0,r.useState)(null),P=(e,t)=>{T({type:e,text:t}),setTimeout(()=>T(null),4e3)},E=(0,r.useCallback)((e,t)=>{const s=e.length,a=Array.from({length:s},(a,r)=>Array.from({length:s},(s,a)=>{if(r===a)return 1;const i=e[r].id,c=e[a].id,n=t.find(e=>e.criteriaAId===i&&e.criteriaBId===c||e.criteriaAId===c&&e.criteriaBId===i);return n&&null!=n.value?n.criteriaAId===i?n.value:1/n.value:1}));return{id:"criteria",name:"\uae30\uc900 \uc30d\ub300\ube44\uad50",items:e.map(e=>e.name),values:a,completed:!1}},[]),_=(0,r.useCallback)(async()=>{if(t){w(!0),C(!1);try{var e;const s=(await o.Ay.get("/api/service/evaluations/evaluations/?project=".concat(t,"&page_size=10"))).data,a=(null!==(e=Array.isArray(s)?s:s.results)&&void 0!==e?e:[])[0];if(!a)return void C(!0);const r=String(a.id);j(r);const[i,c]=await Promise.allSettled([o.Ay.get("/api/service/projects/criteria/?project=".concat(t,"&page_size=100")),o.Ay.get("/api/service/evaluations/comparisons/?evaluation=".concat(r,"&page_size=100"))]),n="fulfilled"===i.status?(e=>{const t=i.value.data;return(null!==(e=Array.isArray(t)?t:t.results)&&void 0!==e?e:[]).map(e=>{const t=e;return{id:String(t.id),name:t.name||t.title||"\uae30\uc900 ".concat(t.id)}})})():[],l="fulfilled"===c.status?(e=>{const t=c.value.data;return(null!==(e=Array.isArray(t)?t:t.results)&&void 0!==e?e:[]).map(e=>{var t;const s=e;return{id:String(s.id),criteriaAId:String(s.criteria_a),criteriaBId:String(s.criteria_b),value:null!==(t=s.value)&&void 0!==t?t:1}})})():[];h(n),v(l),n.length>=2?b(E(n,l)):C(!0)}catch(s){C(!0)}finally{w(!1)}}},[t,E]);(0,r.useEffect)(()=>{_()},[_]);const U=(0,r.useCallback)(e=>{b(t=>t?(0,a.A)((0,a.A)({},t),{},{values:e}):t)},[]),q=(0,r.useCallback)(()=>{if(!y)return 0;const e=y.items.length,t=e*(e-1)/2;if(0===t)return 100;let s=0;for(let a=0;a<e;a++)for(let t=a+1;t<e;t++)1!==y.values[a][t]&&s++;return Math.round(s/t*100)},[y]);return A?(0,n.jsx)("div",{className:"page-evaluator",children:(0,n.jsx)("div",{className:"page-content content-width-evaluator flex items-center justify-center",style:{minHeight:"16rem"},children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"\u23f3"}),(0,n.jsx)("p",{className:"text-lg",children:"\ud3c9\uac00 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."})]})})}):k||!y?(0,n.jsx)("div",{className:"page-evaluator",children:(0,n.jsxs)("div",{className:"page-content content-width-evaluator",children:[(0,n.jsx)("div",{className:"page-header",children:(0,n.jsx)(c.A,{variant:"secondary",onClick:x,children:"\u2190 \ub4a4\ub85c"})}),(0,n.jsxs)(i.A,{className:"text-center p-8",children:[(0,n.jsx)("div",{className:"text-5xl mb-4",children:"\u26a0\ufe0f"}),(0,n.jsx)("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--text-primary)"},children:"\ud3c9\uac00 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,n.jsx)("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:"\uc774 \ud504\ub85c\uc81d\ud2b8\uc5d0 \ubc30\uc815\ub41c \ud3c9\uac00\uac00 \uc5c6\uac70\ub098 \uae30\uc900\uc774 2\uac1c \ubbf8\ub9cc\uc785\ub2c8\ub2e4."}),(0,n.jsx)(c.A,{variant:"secondary",onClick:_,children:"\ub2e4\uc2dc \uc2dc\ub3c4"})]})]})}):(0,n.jsxs)("div",{className:"page-evaluator",children:[R&&(0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm font-medium shadow-lg ".concat("success"===R.type?"bg-green-100 text-green-800":"info"===R.type?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:R.text}),(0,n.jsxs)("div",{className:"page-content content-width-evaluator",children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h1",{className:"page-title",children:"\ub2e8\uacc4 2 \u2014 \ud3c9\uac00\ud558\uae30 / \uc30d\ub300\ube44\uad50"}),(0,n.jsxs)("p",{className:"page-subtitle",children:["\ud504\ub85c\uc81d\ud2b8: ",(0,n.jsx)("span",{className:"font-medium",children:s})]}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(c.A,{variant:"secondary",onClick:x,children:"\ud504\ub85c\uc81d\ud2b8 \uc120\ud0dd\uc73c\ub85c"})})]}),(0,n.jsxs)("div",{className:"card-enhanced p-4 mb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"\uc804\uccb4 \uc9c4\ud589\ub960"}),(0,n.jsx)("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:I?"\uc800\uc7a5 \uc911...":"".concat(q(),"% \uc644\ub8cc")})]}),(0,n.jsx)("div",{className:"w-full rounded-full h-3",style:{backgroundColor:"var(--bg-elevated)"},children:(0,n.jsx)("div",{className:"h-3 rounded-full transition-all duration-300",style:{width:"".concat(q(),"%"),background:"linear-gradient(135deg, var(--accent-primary), var(--accent-secondary))"}})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsx)("div",{className:"lg:col-span-2",children:(0,n.jsx)(i.A,{title:y.name,children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(l,{items:y.items,values:y.values,onUpdate:U}),y.items.length>=3&&void 0!==y.consistencyRatio&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)("div",{className:"p-3 rounded-lg border",style:{backgroundColor:y.consistencyRatio<=.1?"var(--status-success-light)":"var(--status-warning-light)",borderColor:y.consistencyRatio<=.1?"var(--status-success-border)":"var(--status-warning-border)"},children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"\ube44\uc77c\uad00\uc131\ube44\uc728 (CR)"}),(0,n.jsx)("span",{className:"font-semibold",style:{color:y.consistencyRatio<=.1?"var(--status-success-text)":"var(--status-warning-text)"},children:y.consistencyRatio.toFixed(3)})]}),(0,n.jsx)("div",{className:"text-xs mt-1",style:{color:"var(--text-secondary)"},children:y.consistencyRatio<=.1?"\u2713 \uc77c\uad00\uc131\uc774 \uc591\ud638\ud569\ub2c8\ub2e4":"\u26a0 \uc77c\uad00\uc131\uc744 \uac1c\uc120\ud574\uc8fc\uc138\uc694 (\uae30\uc900: \u2264 0.1)"})]})}),(0,n.jsx)("div",{className:"flex justify-end mt-6",children:(0,n.jsx)(c.A,{onClick:async()=>{if(g&&y){S(!0);try{const s=[];for(let e=0;e<m.length;e++)for(let t=e+1;t<m.length;t++){const a=p.find(s=>s.criteriaAId===m[e].id&&s.criteriaBId===m[t].id||s.criteriaAId===m[t].id&&s.criteriaBId===m[e].id);if(!a)continue;const r=a.criteriaAId===m[e].id?y.values[e][t]:y.values[t][e];s.push(o.Ay.patch("/api/service/evaluations/comparisons/".concat(a.id,"/"),{value:r}))}await Promise.allSettled(s);try{var e;const t=await o.Ay.post("/api/service/analysis/calculate/individual/",{evaluation_id:g}),s=null===t||void 0===t?void 0:t.data,r=null!==(e=null===s||void 0===s?void 0:s.consistency_ratio)&&void 0!==e?e:0;if(b(e=>e?(0,a.A)((0,a.A)({},e),{},{consistencyRatio:r,completed:!0}):e),r>.1)return N(!0),void P("error","\uc77c\uad00\uc131 \ube44\uc728 CR=".concat(r.toFixed(3)," > 0.1 \u2014 \ube44\uad50\uac12\uc744 \uc7ac\uac80\ud1a0\ud574\uc8fc\uc138\uc694."))}catch(t){}P("success","\ud3c9\uac00\uac00 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),setTimeout(()=>u(),1e3)}catch(s){P("error","\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}finally{S(!1)}}},variant:"primary",size:"lg",disabled:I,children:I?"\uc800\uc7a5 \uc911...":"\ud3c9\uac00 \uc644\ub8cc"})})]})})}),(0,n.jsx)("div",{className:"lg:col-span-1",children:(0,n.jsxs)("div",{className:"sticky top-6 space-y-4",children:[(0,n.jsx)(i.A,{children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("button",{onClick:()=>N(!f),className:"w-full p-3 rounded-lg transition-all duration-300",style:{backgroundColor:"var(--interactive-primary-light)",color:"var(--interactive-secondary)",border:"1px solid var(--interactive-primary)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--interactive-primary)",e.currentTarget.style.color="white"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--interactive-primary-light)",e.currentTarget.style.color="var(--interactive-secondary)"},children:[(0,n.jsx)("span",{className:"text-2xl",children:"\u2753"}),(0,n.jsx)("div",{className:"text-sm font-medium mt-1",children:"\ud310\ub2e8 \ub3c4\uc6b0\ubbf8"})]})})}),f&&(0,n.jsx)(d,{currentMatrix:y,onClose:()=>N(!1)}),(0,n.jsx)(i.A,{title:"\uc30d\ub300\ube44\uad50 \ucc99\ub3c4",children:(0,n.jsxs)("div",{className:"space-y-2 text-xs",children:[[[1,"\ub3d9\ub4f1\ud558\uac8c \uc911\uc694"],[3,"\uc57d\uac04 \ub354 \uc911\uc694"],[5,"\uc911\uc694"],[7,"\ub9e4\uc6b0 \uc911\uc694"],[9,"\uc808\ub300\uc801\uc73c\ub85c \uc911\uc694"]].map(e=>{let[t,s]=e;return(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{style:{color:"var(--text-primary)",fontWeight:"var(--font-weight-semibold)"},children:t}),(0,n.jsx)("span",{style:{color:"var(--text-secondary)"},children:s})]},t)}),(0,n.jsx)("div",{className:"text-center mt-2",style:{color:"var(--text-muted)"},children:"2, 4, 6, 8\uc740 \uc911\uac04\uac12"})]})})]})})]})]})]})}},9304:(e,t,s)=>{s.d(t,{Ay:()=>v});var a=s(2555),r=s(1801),i=s(1422);const c=new class{constructor(e){this.baseURL=void 0,this.baseURL=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const s=(0,a.A)({"Content-Type":"application/json"},t.headers),r=i.A.getAccessToken();r&&(s.Authorization="Bearer ".concat(r));const c=await fetch("".concat(this.baseURL).concat(e),(0,a.A)((0,a.A)({credentials:"include"},t),{},{headers:s})),n=await c.json();if(!c.ok){if(401===c.status){if((await i.A.refreshAccessToken()).success){const r=i.A.getAccessToken();if(r){s.Authorization="Bearer ".concat(r);const i=await fetch("".concat(this.baseURL).concat(e),(0,a.A)((0,a.A)({credentials:"include"},t),{},{headers:s}));if(i.ok){return{data:await i.json()}}}}else window.dispatchEvent(new CustomEvent("auth:tokenExpired"))}return{error:n.error||n.detail||"Request failed"}}return{data:n}}catch(s){return console.error("API request failed:",s),{error:"Network error"}}}get(e){return this.request(e,{method:"GET"})}post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}delete(e){return this.request(e,{method:"DELETE"})}patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}}(r.API_BASE_URL),n={login:async e=>{try{return{data:{user:(await i.A.login(e.username,e.password)).user},error:null}}catch(t){return{data:null,error:t instanceof Error?t.message:"Login failed"}}},logout:async()=>{try{const e=await i.A.logout();return{data:e.success?{message:"Logout successful"}:null,error:e.success?null:e.error}}catch(e){return{data:null,error:e instanceof Error?e.message:"Logout failed"}}},refreshToken:async()=>{try{const e=await i.A.refreshAccessToken();return{data:e.success?{message:"Token refreshed"}:null,error:e.success?null:e.error}}catch(e){return{data:null,error:e instanceof Error?e.message:"Token refresh failed"}}},verifyToken:async()=>{try{return{data:await i.A.getCurrentUser(),error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"Token verification failed"}}},isAuthenticated:()=>i.A.isAuthenticated(),getCurrentUser:async()=>{try{return{data:await i.A.getCurrentUser(),error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"Failed to get user info"}}}},l={save:e=>c.post("/api/evaluate/direct",e),fetch:e=>c.get("/api/evaluate/direct/".concat(e)),normalize:e=>c.post("/api/calculate/normalize",e)},d={save:e=>c.post("/api/evaluate/pairwise",e),fetchMatrix:(e,t)=>c.get("/api/evaluate/pairwise/".concat(e,"/").concat(t))},o={calculate:e=>c.post("/api/calculate/ahp",e),validateMatrix:e=>c.post("/api/calculate/validate-matrix",{matrix:e})},u={assign:e=>c.post("/api/service/evaluations/invitations/",e),fetchByProject:e=>c.get("/api/service/evaluations/invitations/?project=".concat(e)),list:e=>c.get("/api/service/evaluations/evaluations/?project=".concat(e)),updateWeight:(e,t)=>c.patch("/api/service/evaluations/invitations/".concat(e,"/"),t),remove:e=>c.delete("/api/service/evaluations/invitations/".concat(e,"/")),fetchProgress:e=>c.get("/api/service/evaluations/evaluations/?project=".concat(e,"&status=in_progress")),validateAccessKey:e=>c.get("/api/service/evaluations/invitations/by_token/?token=".concat(e))},x={save:e=>c.post("/api/service/analysis/calculate/individual/",e),fetchIndividual:e=>c.get("/api/service/analysis/project-summary/?project_id=".concat(e)),calculateGroup:e=>c.post("/api/service/analysis/calculate/group/",e),fetchProject:e=>c.get("/api/service/analysis/project-summary/?project_id=".concat(e)),sensitivityAnalysis:e=>c.post("/api/service/analysis/sensitivity/",e)},m={fetch:()=>c.get("/api/service/projects/projects/"),fetchById:e=>c.get("/api/service/projects/projects/".concat(e,"/")),create:e=>c.post("/api/service/projects/projects/",e),update:(e,t)=>c.patch("/api/service/projects/projects/".concat(e,"/"),t),delete:e=>c.delete("/api/service/projects/projects/".concat(e,"/"))},h={fetch:e=>c.get("/api/service/projects/criteria/?project=".concat(e)),create:e=>c.post("/api/service/projects/criteria/",e),update:(e,t)=>c.patch("/api/service/projects/criteria/".concat(e,"/"),t),delete:e=>c.delete("/api/service/projects/criteria/".concat(e,"/"))},p={fetch:e=>c.get("/api/service/projects/criteria/?project=".concat(e,"&type=alternative")),create:e=>c.post("/api/service/projects/criteria/",(0,a.A)((0,a.A)({},e),{},{type:"alternative"})),update:(e,t)=>c.patch("/api/service/projects/criteria/".concat(e,"/"),t),delete:e=>c.delete("/api/service/projects/criteria/".concat(e,"/"))},v={get:c.get.bind(c),post:c.post.bind(c),put:c.put.bind(c),delete:c.delete.bind(c),patch:c.patch.bind(c),authAPI:n,directEvaluationAPI:l,pairwiseEvaluationAPI:d,ahpCalculationAPI:o,evaluatorAPI:u,resultsAPI:x,projectAPI:m,criteriaAPI:h,alternativesAPI:p,apiHelpers:{generateMatrixKey:(e,t)=>"criteria"===e?"C:".concat(t||"root"):"A:".concat(t),generateTargetKey:(e,t,s)=>"criterion"===e?"criterion:".concat(t):"alternative:".concat(t,"@criterion:").concat(s),extractErrorMessage:e=>e.error?e.error:"Unknown error occurred",extractSuccessMessage:e=>e.message?e.message:"Operation completed successfully"}}}}]);
//# sourceMappingURL=668.66990a61.chunk.js.map
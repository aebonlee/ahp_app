"use strict";(self.webpackChunkahp_research_platform=self.webpackChunkahp_research_platform||[]).push([[304,381],{4381(e,t,r){r.r(t),r.d(t,{default:()=>i});var s=r(5043),a=r(9304),c=r(579);const i=e=>{let{currentUser:t,targetRole:r,onRoleSwitch:i,onBack:o}=e;const[l,n]=(0,s.useState)(!1),[d,p]=(0,s.useState)(""),[u,v]=(0,s.useState)(!1),[x,h]=(0,s.useState)(null),m=(e,t)=>{h({type:e,text:t}),setTimeout(()=>h(null),3e3)},y={service_admin:{title:"\uc11c\ube44\uc2a4 \uad00\ub9ac\uc790",icon:"\ud83d\udc68\u200d\ud83d\udcbc",color:"blue",description:"\ud504\ub85c\uc81d\ud2b8\uc640 \uc0ac\uc6a9\uc790\ub97c \uad00\ub9ac\ud560 \uc218 \uc788\ub294 \uad8c\ud55c",permissions:["\ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131/\uc218\uc815/\uc0ad\uc81c","\uc0ac\uc6a9\uc790 \uad00\ub9ac","\ud3c9\uac00\uc790 \ud560\ub2f9","\uacb0\uacfc \ubd84\uc11d \ubc0f \ubcf4\uace0\uc11c \uc0dd\uc131","\uc2dc\uc2a4\ud15c \uc124\uc815 \uc77c\ubd80 \uc811\uadfc"]},service_user:{title:"\uc11c\ube44\uc2a4 \uc0ac\uc6a9\uc790",icon:"\ud83d\udc64",color:"green",description:"\uc77c\ubc18 \uc0ac\uc6a9\uc790 \uad8c\ud55c\uc73c\ub85c \ud504\ub85c\uc81d\ud2b8 \ucc38\uc5ec",permissions:["\ud560\ub2f9\ub41c \ud504\ub85c\uc81d\ud2b8 \uc870\ud68c","\ud3c9\uac00 \ucc38\uc5ec","\uac1c\uc778 \uc124\uc815 \uad00\ub9ac","\uacb0\uacfc \uc870\ud68c (\uc81c\ud55c\uc801)"]},evaluator:{title:"\ud3c9\uac00\uc790",icon:"\u2696\ufe0f",color:"purple",description:"\ud3c9\uac00 \uc791\uc5c5\uc5d0\ub9cc \uc9d1\uc911\ud558\ub294 \uc81c\ud55c\ub41c \uad8c\ud55c",permissions:["\ud560\ub2f9\ub41c \ud3c9\uac00 \uc218\ud589","\uc30d\ub300\ube44\uad50 \ud3c9\uac00","\uc9c1\uc811\uc785\ub825 \ud3c9\uac00","\uc77c\uad00\uc131 \uac80\uc99d","\ud3c9\uac00 \uc774\ub825 \uc870\ud68c"]},super_admin:{title:"\uc288\ud37c \uad00\ub9ac\uc790",icon:"\ud83d\udc51",color:"red",description:"\uc2dc\uc2a4\ud15c \uc804\uccb4\ub97c \uad00\ub9ac\ud558\ub294 \ucd5c\uace0 \uad8c\ud55c",permissions:["\ubaa8\ub4e0 \uae30\ub2a5 \uc811\uadfc","\uc2dc\uc2a4\ud15c \ucd08\uae30\ud654","\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uad00\ub9ac","\uc5ed\ud560 \uc804\ud658","\uc2dc\uc2a4\ud15c \ubaa8\ub2c8\ud130\ub9c1"]}}[r];return(0,c.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[x&&(0,c.jsx)("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm font-medium shadow-lg ".concat("success"===x.type?"bg-green-100 text-green-800":"info"===x.type?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:x.text}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-3xl font-bold",style:{color:"var(--text-primary)"},children:"\uc5ed\ud560 \uc804\ud658"}),(0,c.jsx)("p",{className:"text-lg mt-2",style:{color:"var(--text-secondary)"},children:"\ub2e4\ub978 \uc0ac\uc6a9\uc790 \uc5ed\ud560\ub85c \uc804\ud658\ud558\uc5ec \uc2dc\uc2a4\ud15c\uc744 \ud14c\uc2a4\ud2b8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"})]}),(0,c.jsx)("button",{onClick:o,className:"px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-light)"},children:"\u2190 \ub3cc\uc544\uac00\uae30"})]}),(0,c.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:"var(--bg-secondary)",border:"2px solid var(--accent-primary)"},children:[(0,c.jsx)("h3",{className:"text-sm font-semibold mb-3",style:{color:"var(--text-muted)"},children:"\ud604\uc7ac \uc5ed\ud560"}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)("div",{className:"text-5xl",children:"\ud83d\udc51"}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"\uc288\ud37c \uad00\ub9ac\uc790"}),(0,c.jsxs)("p",{className:"mt-1",style:{color:"var(--text-secondary)"},children:[t.email," \u2022 \ucd5c\uace0 \uad8c\ud55c \ubcf4\uc720"]})]})]})]}),(0,c.jsxs)("div",{className:"p-6 rounded-xl border-2",style:{backgroundColor:"var(--bg-primary)",borderColor:"blue"===y.color?"#3B82F6":"green"===y.color?"#10B981":"purple"===y.color?"#8B5CF6":"#EF4444"},children:[(0,c.jsx)("h3",{className:"text-sm font-semibold mb-3",style:{color:"var(--text-muted)"},children:"\uc804\ud658\ud560 \uc5ed\ud560"}),(0,c.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,c.jsx)("div",{className:"text-5xl",children:y.icon}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:"var(--text-primary)"},children:y.title}),(0,c.jsx)("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:y.description}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("h4",{className:"font-semibold text-sm",style:{color:"var(--text-primary)"},children:"\uc0ac\uc6a9 \uac00\ub2a5\ud55c \uad8c\ud55c:"}),(0,c.jsx)("ul",{className:"space-y-1",children:y.permissions.map((e,t)=>(0,c.jsxs)("li",{className:"flex items-start space-x-2 text-sm",style:{color:"var(--text-secondary)"},children:[(0,c.jsx)("span",{className:"text-green-500 mt-0.5",children:"\u2713"}),(0,c.jsx)("span",{children:e})]},t))})]})]})]})]}),(0,c.jsx)("div",{className:"p-4 rounded-lg bg-yellow-50 border border-yellow-200",children:(0,c.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,c.jsx)("span",{className:"text-2xl",children:"\u26a0\ufe0f"}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"font-semibold text-yellow-900",children:"\uc8fc\uc758\uc0ac\ud56d"}),(0,c.jsxs)("ul",{className:"mt-2 space-y-1 text-sm text-yellow-800",children:[(0,c.jsx)("li",{children:"\u2022 \uc5ed\ud560 \uc804\ud658 \uc2dc \ud604\uc7ac \uc791\uc5c5 \uc911\uc778 \ub0b4\uc6a9\uc774 \uc800\uc7a5\ub418\uc9c0 \uc54a\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),(0,c.jsx)("li",{children:"\u2022 \uc804\ud658\ub41c \uc5ed\ud560\uc758 \uad8c\ud55c\uc73c\ub85c\ub9cc \uc2dc\uc2a4\ud15c\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),(0,c.jsx)("li",{children:"\u2022 \uc6d0\ub798 \uc5ed\ud560\ub85c \ub3cc\uc544\uc624\ub824\uba74 \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc57c \ud569\ub2c8\ub2e4"})]})]})]})}),l?(0,c.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:"var(--bg-secondary)"},children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:"\ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,c.jsx)("p",{className:"mb-4 text-sm",style:{color:"var(--text-secondary)"},children:"\ubcf4\uc548\uc744 \uc704\ud574 \uc288\ud37c \uad00\ub9ac\uc790 \ube44\ubc00\ubc88\ud638\ub97c \ub2e4\uc2dc \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,c.jsxs)("div",{className:"flex space-x-3",children:[(0,c.jsx)("input",{type:"password",value:d,onChange:e=>p(e.target.value),placeholder:"\ube44\ubc00\ubc88\ud638 \uc785\ub825",className:"flex-1 px-4 py-2 rounded-lg border",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-light)",color:"var(--text-primary)"},autoFocus:!0}),(0,c.jsx)("button",{onClick:async()=>{if(d){v(!0);try{const e=await a.Ay.post("/api/service/accounts/verify-password/",{password:d});e.data&&e.data.valid?(i(r),m("success","".concat(y.title," \ubaa8\ub4dc\ub85c \uc804\ud658\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),n(!1)):m("error","\ube44\ubc00\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}catch(e){m("error","\ube44\ubc00\ubc88\ud638 \ud655\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{v(!1),p("")}}else m("error","\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},disabled:u,className:"px-6 py-2 rounded-lg font-semibold text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"\ud655\uc778 \uc911...":"\ud655\uc778"}),(0,c.jsx)("button",{onClick:()=>{n(!1),p("")},className:"px-6 py-2 rounded-lg font-semibold",style:{backgroundColor:"var(--bg-subtle)",color:"var(--text-primary)"},children:"\ucde8\uc18c"})]})]}):(0,c.jsx)("div",{className:"flex justify-center",children:(0,c.jsxs)("button",{onClick:()=>n(!0),className:"px-8 py-3 rounded-lg font-semibold text-white transition-transform hover:scale-105",style:{backgroundColor:"blue"===y.color?"#3B82F6":"green"===y.color?"#10B981":"purple"===y.color?"#8B5CF6":"#EF4444"},children:[y.icon," ",y.title,"\ub85c \uc804\ud658\ud558\uae30"]})})]})}},9304(e,t,r){r.d(t,{Ay:()=>y});var s=r(2555),a=r(1801),c=r(1422),i=r(8018);const o=new class{constructor(e){this.baseURL=void 0,this.baseURL=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const r=(0,s.A)({"Content-Type":"application/json"},t.headers),a=c.A.getAccessToken();a&&(r.Authorization="Bearer ".concat(a));const i=await fetch("".concat(this.baseURL).concat(e),(0,s.A)((0,s.A)({credentials:"include"},t),{},{headers:r})),o=await i.json();if(!i.ok){if(401===i.status){if((await c.A.refreshAccessToken()).success){const a=c.A.getAccessToken();if(a){r.Authorization="Bearer ".concat(a);const c=await fetch("".concat(this.baseURL).concat(e),(0,s.A)((0,s.A)({credentials:"include"},t),{},{headers:r}));if(c.ok){return{data:await c.json()}}}}else window.dispatchEvent(new CustomEvent("auth:tokenExpired"))}return{error:o.error||o.detail||"Request failed"}}return{data:o}}catch(r){return i.A.error("API request failed:",r),{error:"Network error"}}}get(e){return this.request(e,{method:"GET"})}post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}delete(e){return this.request(e,{method:"DELETE"})}patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}}(a.API_BASE_URL),l={login:async e=>{try{return{data:{user:(await c.A.login(e.username,e.password)).user},error:null}}catch(t){return{data:null,error:t instanceof Error?t.message:"Login failed"}}},logout:async()=>{try{const e=await c.A.logout();return{data:e.success?{message:"Logout successful"}:null,error:e.success?null:e.error}}catch(e){return{data:null,error:e instanceof Error?e.message:"Logout failed"}}},refreshToken:async()=>{try{const e=await c.A.refreshAccessToken();return{data:e.success?{message:"Token refreshed"}:null,error:e.success?null:e.error}}catch(e){return{data:null,error:e instanceof Error?e.message:"Token refresh failed"}}},verifyToken:async()=>{try{return{data:await c.A.getCurrentUser(),error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"Token verification failed"}}},isAuthenticated:()=>c.A.isAuthenticated(),getCurrentUser:async()=>{try{return{data:await c.A.getCurrentUser(),error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"Failed to get user info"}}}},n={save:e=>o.post("/api/service/evaluations/direct-input/",e),fetch:e=>o.get("/api/service/evaluations/direct-input/?project=".concat(e)),normalize:e=>o.post("/api/service/analysis/normalize/",e)},d={save:e=>o.post("/api/service/evaluations/comparisons/",e),fetchMatrix:(e,t)=>o.get("/api/service/evaluations/comparisons/?project=".concat(e,"&matrix_key=").concat(t))},p={calculate:e=>o.post("/api/service/analysis/calculate/individual/",e),validateMatrix:e=>o.post("/api/service/analysis/validate-matrix/",{matrix:e})},u={assign:e=>o.post("/api/service/evaluations/invitations/",e),fetchByProject:e=>o.get("/api/service/evaluations/invitations/?project=".concat(e)),list:e=>o.get("/api/service/evaluations/evaluations/?project=".concat(e)),updateWeight:(e,t)=>o.patch("/api/service/evaluations/invitations/".concat(e,"/"),t),remove:e=>o.delete("/api/service/evaluations/invitations/".concat(e,"/")),fetchProgress:e=>o.get("/api/service/evaluations/evaluations/?project=".concat(e,"&status=in_progress")),validateAccessKey:e=>o.get("/api/service/evaluations/invitations/by_token/?token=".concat(e))},v={save:e=>o.post("/api/service/analysis/calculate/individual/",e),fetchIndividual:e=>o.get("/api/service/analysis/project-summary/?project_id=".concat(e)),calculateGroup:e=>o.post("/api/service/analysis/calculate/group/",e),fetchProject:e=>o.get("/api/service/analysis/project-summary/?project_id=".concat(e)),sensitivityAnalysis:e=>o.post("/api/service/analysis/sensitivity/",e)},x={fetch:()=>o.get("/api/service/projects/projects/"),fetchById:e=>o.get("/api/service/projects/projects/".concat(e,"/")),create:e=>o.post("/api/service/projects/projects/",e),update:(e,t)=>o.patch("/api/service/projects/projects/".concat(e,"/"),t),delete:e=>o.delete("/api/service/projects/projects/".concat(e,"/"))},h={fetch:e=>o.get("/api/service/projects/criteria/?project=".concat(e)),create:e=>o.post("/api/service/projects/criteria/",e),update:(e,t)=>o.patch("/api/service/projects/criteria/".concat(e,"/"),t),delete:e=>o.delete("/api/service/projects/criteria/".concat(e,"/"))},m={fetch:e=>o.get("/api/service/projects/criteria/?project=".concat(e,"&type=alternative")),create:e=>o.post("/api/service/projects/criteria/",(0,s.A)((0,s.A)({},e),{},{type:"alternative"})),update:(e,t)=>o.patch("/api/service/projects/criteria/".concat(e,"/"),t),delete:e=>o.delete("/api/service/projects/criteria/".concat(e,"/"))},y={get:o.get.bind(o),post:o.post.bind(o),put:o.put.bind(o),delete:o.delete.bind(o),patch:o.patch.bind(o),authAPI:l,directEvaluationAPI:n,pairwiseEvaluationAPI:d,ahpCalculationAPI:p,evaluatorAPI:u,resultsAPI:v,projectAPI:x,criteriaAPI:h,alternativesAPI:m,apiHelpers:{generateMatrixKey:(e,t)=>"criteria"===e?"C:".concat(t||"root"):"A:".concat(t),generateTargetKey:(e,t,r)=>"criterion"===e?"criterion:".concat(t):"alternative:".concat(t,"@criterion:").concat(r),extractErrorMessage:e=>e.error?e.error:"Unknown error occurred",extractSuccessMessage:e=>e.message?e.message:"Operation completed successfully"}}}}]);
//# sourceMappingURL=381.612d9648.chunk.js.map
"use strict";(self.webpackChunkahp_research_platform=self.webpackChunkahp_research_platform||[]).push([[319],{1673:(e,s,t)=>{t.d(s,{A:()=>m});var r=t(2555),n=t(5043),l=t(3593),i=t(7907),a=t(795),c=t(8100),d=t(3138),o=t(1614),x=t(579);const m=e=>{let{projectId:s,onComplete:t,onEvaluatorsChange:m,maxEvaluators:h=50,currentPlan:p="Standard Plan"}=e;const[u,g]=(0,n.useState)([]),[v,j]=(0,n.useState)(null),[b,f]=(0,n.useState)(null),y=(e,s)=>{f({type:e,text:s}),setTimeout(()=>f(null),3e3)},[N,w]=(0,n.useState)({total:0,pending:0,active:0,completed:0});(0,n.useEffect)(()=>{s&&(async()=>{const e=window.location.href.split("?")[0].replace(/\/$/,"");try{const t=(await d.A.getEvaluators(s)).map(t=>{const r=t.access_key?"".concat(e,"/?project=").concat(s,"&key=").concat(t.access_key):void 0;return{id:t.id,project_id:t.project_id,name:t.name,email:t.email,access_key:t.access_key,status:t.status,progress:0,code:t.access_key||"EVL".concat(String(Math.floor(999*Math.random())+1).padStart(3,"0")),inviteLink:r,demographicSurveyCompleted:!1}});g(t),E(t),m&&m(t.length)}catch(t){g([]),m&&m(0)}})()},[s]);const[A,C]=(0,n.useState)({name:"",email:""}),[k,_]=(0,n.useState)({}),S=()=>{const e=new Uint8Array(8);crypto.getRandomValues(e);return"KEY_"+Array.from(e,e=>"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[e%36]).join("")},E=e=>{const s={total:e.length,pending:e.filter(e=>"pending"===e.status).length,active:e.filter(e=>"active"===e.status).length,completed:e.filter(e=>"completed"===e.status).length};w(s),m&&m(e.length)};return(0,x.jsxs)("div",{className:"space-y-6",children:[b&&(0,x.jsx)("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm font-medium shadow-lg ".concat("success"===b.type?"bg-green-100 text-green-800":"info"===b.type?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:b.text}),(0,x.jsx)(c.A,{isOpen:null!==v,onClose:()=>j(null),title:"\ud3c9\uac00\uc790 \uc0ad\uc81c",size:"sm",footer:(0,x.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,x.jsx)(i.A,{variant:"secondary",onClick:()=>j(null),children:"\ucde8\uc18c"}),(0,x.jsx)(i.A,{variant:"error",onClick:async()=>{if(!v)return;const e=v;j(null);try{await d.A.deleteEvaluator(e,s);const t=u.filter(s=>s.id!==e);g(t),m&&m(t.length)}catch(t){y("error","\ud3c9\uac00\uc790 \uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},children:"\uc0ad\uc81c"})]}),children:(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"\uc815\ub9d0\ub85c \uc774 \ud3c9\uac00\uc790\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"})}),(0,x.jsx)(l.A,{title:"\ud3c9\uac00\uc790 \ubc30\uc815",children:(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,x.jsx)("h4",{className:"font-medium text-purple-900 mb-2",children:"\ud83d\udc65 \ud3c9\uac00\uc790 \ubc30\uc815 \uac00\uc774\ub4dc"}),(0,x.jsxs)("ul",{className:"text-sm text-purple-700 space-y-1",children:[(0,x.jsx)("li",{children:"\u2022 \uac01 \ud3c9\uac00\uc790\uc5d0\uac8c \uace0\uc720\ud55c \ucf54\ub4dc\uc640 \ucd08\ub300 \ub9c1\ud06c\uac00 \ubd80\uc5ec\ub429\ub2c8\ub2e4"}),(0,x.jsx)("li",{children:"\u2022 QR\ucf54\ub4dc\ub97c \ud1b5\ud574 \ubaa8\ubc14\uc77c\uc5d0\uc11c\ub3c4 \uc27d\uac8c \ud3c9\uac00\uc5d0 \ucc38\uc5ec\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),(0,x.jsx)("li",{children:"\u2022 \uc778\uad6c\ud1b5\uacc4\ud559\uc801 \uc124\ubb38\uc870\uc0ac\uc640 \ud3c9\uac00 \ub9c1\ud06c\uac00 \ud568\uaed8 \uc81c\uacf5\ub429\ub2c8\ub2e4"}),(0,x.jsx)("li",{children:"\u2022 \uc774\uba54\uc77c\uc744 \ud1b5\ud574 \ud3c9\uac00 \ucc38\uc5ec \ucd08\ub300\ub97c \ubcf4\ub0bc \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),(0,x.jsx)("li",{children:"\u2022 \ud3c9\uac00\uc790\ubcc4 \uc9c4\ud589\ub960\uc744 \uc2e4\uc2dc\uac04\uc73c\ub85c \ubaa8\ub2c8\ud130\ub9c1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,x.jsxs)("div",{className:"bg-white border rounded-lg p-3",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:N.total}),(0,x.jsx)("div",{className:"text-sm text-gray-500",children:"\uc804\uccb4 \ud3c9\uac00\uc790"})]}),(0,x.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:N.pending}),(0,x.jsx)("div",{className:"text-sm text-yellow-700",children:"\ub300\uae30\uc911"})]}),(0,x.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-blue-800",children:N.active}),(0,x.jsx)("div",{className:"text-sm text-blue-700",children:"\uc9c4\ud589\uc911"})]}),(0,x.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-green-800",children:N.completed}),(0,x.jsx)("div",{className:"text-sm text-green-700",children:"\uc644\ub8cc"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"\ud83d\udc64 \ubc30\uc815\ub41c \ud3c9\uac00\uc790 \ubaa9\ub85d"}),0===u.length?(0,x.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\uc544\uc9c1 \ubc30\uc815\ub41c \ud3c9\uac00\uc790\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,x.jsx)("div",{className:"space-y-3",children:u.map(e=>{var t,n,l;return(0,x.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50",children:[(0,x.jsxs)("div",{className:"flex items-center flex-1",children:[(0,x.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 text-blue-800 rounded-full text-sm font-medium mr-4",children:e.code||(null===(t=e.access_key)||void 0===t?void 0:t.substring(0,3))||"EVL"}),(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(l=e.status,(0,x.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({pending:"bg-gray-100 text-gray-800",active:"bg-green-100 text-green-800",completed:"bg-purple-100 text-purple-800"}[l]),children:{pending:"\ub300\uae30",active:"\uc9c4\ud589\uc911",completed:"\uc644\ub8cc"}[l]})),(n=e.progress||0,(0,x.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(0===n?"bg-gray-100 text-gray-800":n<50?"bg-red-100 text-red-800":n<100?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[n,"%"]}))]}),e.email&&(0,x.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.email}),(e.department||e.experience)&&(0,x.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[e.department&&(0,x.jsx)("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:e.department}),e.experience&&(0,x.jsxs)("span",{className:"text-xs bg-green-50 text-green-700 px-2 py-1 rounded",children:["\uacbd\ub825 ",e.experience]})]}),e.inviteLink&&(0,x.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-xs text-gray-500",children:"\ud3c9\uac00 \ub9c1\ud06c:"}),(0,x.jsx)("code",{className:"text-xs bg-green-50 text-green-700 px-2 py-1 rounded border border-green-200",children:e.inviteLink})]}),e.demographicSurveyUrl&&(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-xs text-gray-500",children:"\uc124\ubb38\uc870\uc0ac:"}),(0,x.jsx)("code",{className:"text-xs bg-yellow-50 text-yellow-700 px-2 py-1 rounded border border-yellow-200",children:e.demographicSurveyUrl})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("button",{onClick:()=>window.open(e.inviteLink,"_blank"),className:"text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors",children:"\ud83d\udd17 \ud3c9\uac00 \uc2dc\uc791\ud558\uae30"}),(0,x.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e.inviteLink||""),className:"text-xs bg-gray-500 text-white px-3 py-1 rounded hover:bg-gray-600 transition-colors",children:"\ud83d\udccb \ub9c1\ud06c \ubcf5\uc0ac"}),(0,x.jsx)("button",{onClick:()=>{var s,t;return t=null!==(s=e.id)&&void 0!==s?s:"",void g(e=>e.map(e=>e.id===t?(0,r.A)((0,r.A)({},e),{},{showQR:!e.showQR}):e))},className:"text-xs bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition-colors",children:e.showQR?"\ud83d\udd12 QR \uc228\uae30\uae30":"\ud83d\udcf1 QR \ubcf4\uae30"})]}),e.showQR&&e.inviteLink&&(0,x.jsx)("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"\ud3c9\uac00 \uc815\ubcf4 QR \ucf54\ub4dc"}),(0,x.jsx)("div",{className:"inline-block p-2 bg-white rounded border border-gray-200",children:(0,x.jsx)(o.h,{value:JSON.stringify({evaluationUrl:e.inviteLink,surveyUrl:e.demographicSurveyUrl,projectId:s,evaluatorId:e.id,accessKey:e.access_key}),size:200,level:"M",includeMargin:!0})}),(0,x.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"QR \ucf54\ub4dc\ub97c \uc2a4\uce94\ud558\uc5ec \uc124\ubb38\uc870\uc0ac \ud6c4 \ud3c9\uac00 \uc2dc\uc791"}),(0,x.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,x.jsx)("p",{className:"text-xs text-blue-600",children:"1. \uc778\uad6c\ud1b5\uacc4\ud559\uc801 \uc124\ubb38\uc870\uc0ac"}),(0,x.jsx)("p",{className:"text-xs text-green-600",children:"2. AHP \ud3c9\uac00 \uc9c4\ud589"})]})]})})]})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:["pending"===e.status&&(0,x.jsx)(i.A,{size:"sm",variant:"primary",onClick:()=>{var s;return(async e=>{const s=u.map(s=>s.id===e?(0,r.A)((0,r.A)({},s),{},{status:"active"}):s);g(s)})(null!==(s=e.id)&&void 0!==s?s:"")},children:"\ud83d\udce7 \ucd08\ub300 \ubc1c\uc1a1"}),(0,x.jsx)("button",{onClick:()=>{var s,t;return t=null!==(s=e.id)&&void 0!==s?s:"",void j(t)},className:"text-red-500 hover:text-red-700 text-sm",title:"\uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})]})]},e.id)})})]}),(0,x.jsxs)("div",{className:"border-t pt-6",children:[(0,x.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"\u2795 \uc0c8 \ud3c9\uac00\uc790 \ucd94\uac00"}),k.general&&(0,x.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("span",{className:"text-red-600 mr-2",children:"\u274c"}),(0,x.jsx)("span",{className:"text-red-800 text-sm",children:k.general})]})}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,x.jsx)(a.A,{id:"evaluatorName",label:"\ud3c9\uac00\uc790 \uc774\ub984",placeholder:"\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694",value:A.name,onChange:e=>C(s=>(0,r.A)((0,r.A)({},s),{},{name:e})),error:k.name,required:!0}),(0,x.jsx)(a.A,{id:"evaluatorEmail",label:"\uc774\uba54\uc77c",placeholder:"email@example.com",value:A.email,onChange:e=>C(s=>(0,r.A)((0,r.A)({},s),{},{email:e})),error:k.email,required:!0})]}),(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsx)(i.A,{onClick:async()=>{if(u.length>=h)y("error","\ud3c9\uac00\uc790 \ubc30\uc815 \ud55c\ub3c4(".concat(h,"\uba85)\uc5d0 \ub3c4\ub2ec\ud588\uc2b5\ub2c8\ub2e4. ").concat(p,"\uc5d0\uc11c\ub294 \ud504\ub85c\uc81d\ud2b8\ub2f9 \ucd5c\ub300 ").concat(h,"\uba85\uae4c\uc9c0 \ubc30\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."));else if((e=>{const s={};return e.name.trim()?e.name.length<2&&(s.name="\uc774\ub984\uc740 2\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."):s.name="\ud3c9\uac00\uc790 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)?u.some(s=>s.email===e.email)&&(s.email="\uc774\ubbf8 \ub4f1\ub85d\ub41c \uc774\uba54\uc77c\uc785\ub2c8\ub2e4."):s.email="\uc62c\ubc14\ub978 \uc774\uba54\uc77c \ud615\uc2dd\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.":s.email="\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",_(s),0===Object.keys(s).length})(A))try{const e={project_id:s,name:A.name,email:A.email,access_key:S(),status:"pending"},t=await d.A.createEvaluator(e);if(t){const e=window.location.href.split("?")[0].replace(/\/$/,""),r="".concat(e,"/?project=").concat(s,"&key=").concat(t.access_key),n={id:t.id,project_id:t.project_id,name:t.name,email:t.email,access_key:t.access_key,status:t.status,progress:0,code:t.access_key,inviteLink:r,demographicSurveyCompleted:!1},l=[...u,n];g(l),C({name:"",email:""}),_({}),m&&m(l.length)}else _({general:"\ud3c9\uac00\uc790 \uc0dd\uc131\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."})}catch(e){_({general:e instanceof Error?e.message:"\ud3c9\uac00\uc790 \ucd94\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."})}},variant:"primary",children:"\ud3c9\uac00\uc790 \ucd94\uac00"})})]}),(0,x.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,x.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:u.length}),(0,x.jsx)("div",{className:"text-sm text-gray-600",children:"\ucd1d \ud3c9\uac00\uc790"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:u.filter(e=>"pending"===e.status).length}),(0,x.jsx)("div",{className:"text-sm text-gray-600",children:"\ub300\uae30\uc911"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-green-600",children:u.filter(e=>"active"===e.status).length}),(0,x.jsx)("div",{className:"text-sm text-gray-600",children:"\ud65c\uc131 \ucc38\uc5ec"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:u.filter(e=>"completed"===e.status).length}),(0,x.jsx)("div",{className:"text-sm text-gray-600",children:"\ud3c9\uac00 \uc644\ub8cc"})]})]})}),(0,x.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t",children:[(0,x.jsx)("div",{className:"text-sm text-gray-600",children:0===u.length&&(0,x.jsx)("span",{className:"text-blue-600",children:"\ud83d\udc65 \ud3c9\uac00\uc790 \uc5c6\uc774 \uc5f0\uad6c\uc790\uac00 \uc9c1\uc811 \ud14c\uc2a4\ud2b8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})}),(0,x.jsxs)("div",{className:"flex space-x-3",children:[(0,x.jsx)(i.A,{variant:"secondary",onClick:()=>y("success","\ud3c9\uac00\uc790 \ubaa9\ub85d\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),children:"\uc800\uc7a5"}),(0,x.jsx)(i.A,{variant:"primary",onClick:t,children:"\ub2e4\uc74c \ub2e8\uacc4\ub85c"})]})]})]})})]})}},4956:(e,s,t)=>{t.d(s,{A:()=>a});var r=t(2555),n=t(5043),l=t(8100),i=t(579);const a=e=>{let{nodes:s,title:t="\uacc4\uce35\uad6c\uc870",showWeights:a=!1,interactive:c=!1,onNodeClick:d,onNodeDelete:o,layout:x="vertical",onLayoutChange:m,allowDelete:h=!1}=e;const[p,u]=(0,n.useState)(null),g=(e=>{const s=new Map,t=[];return e.forEach(e=>{s.set(e.id,(0,r.A)((0,r.A)({},e),{},{children:[]}))}),e.forEach(e=>{const r=s.get(e.id);if(r)if(e.parent_id&&s.has(e.parent_id)){const t=s.get(e.parent_id);if(!t)return;t.children||(t.children=[]),t.children.push(r)}else t.push(r)}),t})(s),v=e=>{switch(e.level){case 1:return"\ud83c\udfaf";case 2:return"\ud83d\udccb";case 3:return"\ud83c\udfaa";case 4:return"\ud83d\udcdd";case 5:return"\ud83d\udd39";default:return"\ud83d\udcc4"}},j=e=>{switch(e){case 1:return"bg-blue-100 border-blue-300 text-blue-800";case 2:return"bg-green-100 border-green-300 text-green-800";case 3:return"bg-purple-100 border-purple-300 text-purple-800";case 4:return"bg-yellow-100 border-yellow-300 text-yellow-800";case 5:return"bg-pink-100 border-pink-300 text-pink-800";default:return"bg-gray-100 border-gray-300 text-gray-800"}},b=function(e,s){var t,r,n;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const x=e.children&&e.children.length>0,m=c&&d;return(0,i.jsxs)("div",{className:"relative",children:[e.level>1&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"absolute w-px bg-gray-300 -left-6 top-0",style:{height:"24px"}}),(0,i.jsx)("div",{className:"absolute h-px bg-gray-300 -left-6 top-6",style:{width:"24px"}})]}),(0,i.jsx)("div",{className:"\n            mb-3 p-3 rounded-lg border-2 transition-all duration-200 \n            ".concat(j(e.level),"\n            ").concat(m?"cursor-pointer hover:shadow-md hover:scale-105":"","\n            ").concat(x?"font-medium":"","\n          "),onClick:()=>m&&d(e),style:{marginLeft:"".concat(32*(e.level-1),"px")},children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"text-lg",children:v(e)}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium",children:e.name}),e.description&&(0,i.jsx)("div",{className:"text-xs opacity-75 mt-1",children:e.description})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[a&&e.weight&&(0,i.jsxs)("div",{className:"text-xs font-mono bg-white bg-opacity-50 px-2 py-1 rounded",children:[(100*e.weight).toFixed(1),"%"]}),h&&o&&(0,i.jsx)("button",{onClick:s=>{s.stopPropagation(),u(e)},className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-md transition-colors duration-200",title:"".concat(e.name," \uc0ad\uc81c"),children:(0,i.jsx)("span",{className:"text-sm",children:"\ud83d\uddd1\ufe0f"})})]})]})}),x&&(0,i.jsxs)("span",{className:"text-xs text-gray-600",children:["(",null!==(t=null===(r=e.children)||void 0===r?void 0:r.length)&&void 0!==t?t:0,"\uac1c \ud558\uc704)"]})]})}),x&&(0,i.jsx)("div",{className:"relative",children:null===(n=e.children)||void 0===n?void 0:n.map((s,t)=>{var r,n;const i=[...l,t===(null!==(r=null===(n=e.children)||void 0===n?void 0:n.length)&&void 0!==r?r:0)-1];return b(s,t,i)})})]},e.id)},f=e=>{var s,t,r,n,l;const x=e.children&&e.children.length>0,m=c&&d;return(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsxs)("div",{className:"\n            relative p-3 rounded-lg border-2 transition-all duration-200 min-w-[120px] text-center\n            ".concat(j(e.level),"\n            ").concat(m?"cursor-pointer hover:shadow-md hover:scale-105":"","\n            ").concat(x?"font-medium":"","\n          "),onClick:()=>m&&d(e),children:[h&&o&&(0,i.jsx)("button",{onClick:s=>{s.stopPropagation(),u(e)},className:"absolute top-1 right-1 p-1 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-md transition-colors duration-200",title:"".concat(e.name," \uc0ad\uc81c"),children:(0,i.jsx)("span",{className:"text-xs",children:"\ud83d\uddd1\ufe0f"})}),(0,i.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,i.jsx)("span",{className:"text-lg",children:v(e)}),(0,i.jsx)("div",{className:"font-medium text-sm",children:e.name}),e.description&&(0,i.jsx)("div",{className:"text-xs opacity-75",children:e.description}),a&&e.weight&&(0,i.jsxs)("div",{className:"text-xs font-mono bg-white bg-opacity-50 px-2 py-1 rounded",children:[(100*e.weight).toFixed(1),"%"]})]})]}),x&&(0,i.jsxs)("div",{className:"relative mt-8",children:[(0,i.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2",children:(0,i.jsx)("div",{className:"w-px h-4 bg-gray-300 -mt-8"})}),(null!==(s=null===(t=e.children)||void 0===t?void 0:t.length)&&void 0!==s?s:0)>1&&(0,i.jsx)("div",{className:"absolute top-0 left-0 right-0 flex justify-center -mt-4",children:(0,i.jsx)("div",{className:"h-px bg-gray-300",style:{width:"".concat(150*((null!==(r=null===(n=e.children)||void 0===n?void 0:n.length)&&void 0!==r?r:0)-1),"px"),marginLeft:"75px",marginRight:"75px"}})}),(0,i.jsx)("div",{className:"flex space-x-6 justify-center",children:null===(l=e.children)||void 0===l?void 0:l.map((s,t)=>{var r,n;return(0,i.jsxs)("div",{className:"relative",children:[(null!==(r=null===(n=e.children)||void 0===n?void 0:n.length)&&void 0!==r?r:0)>1&&(0,i.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-px h-4 bg-gray-300 -mt-4"}),f(s)]},s.id)})})]})]},e.id)},y=(0,i.jsxs)(l.A,{isOpen:null!==p,onClose:()=>u(null),title:"\uae30\uc900 \uc0ad\uc81c \ud655\uc778",size:"sm",footer:(0,i.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,i.jsx)("button",{onClick:()=>u(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"\ucde8\uc18c"}),(0,i.jsx)("button",{onClick:()=>{p&&o&&o(p),u(null)},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700",children:"\uc0ad\uc81c"})]}),children:[(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:['"',null===p||void 0===p?void 0:p.name,'" \uae30\uc900\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?']}),(0,i.jsx)("p",{className:"text-sm text-red-600 mt-2",children:"\u26a0\ufe0f \ud558\uc704 \uae30\uc900\ub4e4\ub3c4 \ud568\uaed8 \uc0ad\uc81c\ub429\ub2c8\ub2e4."})]});return 0===g.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,i.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udf33"}),(0,i.jsx)("p",{className:"text-lg",children:"\uacc4\uce35\uad6c\uc870\uac00 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4"}),(0,i.jsx)("p",{className:"text-sm",children:"\uae30\uc900\uc744 \ucd94\uac00\ud558\uc5ec \uacc4\uce35\uad6c\uc870\ub97c \ub9cc\ub4e4\uc5b4\ubcf4\uc138\uc694"})]}),y]}):(0,i.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,i.jsx)("span",{className:"text-2xl mr-2",children:"\ud83c\udf33"}),t]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["\ucd1d ",s.length,"\uac1c \ub178\ub4dc"]}),m&&(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"\ub808\uc774\uc544\uc6c3:"}),(0,i.jsx)("button",{onClick:()=>m("vertical"),className:"px-3 py-1 text-xs rounded-md transition-colors ".concat("vertical"===x?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\ud83d\udccb \uc138\ub85c\ud615"}),(0,i.jsx)("button",{onClick:()=>m("horizontal"),className:"px-3 py-1 text-xs rounded-md transition-colors ".concat("horizontal"===x?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\ud83d\udcca \uac00\ub85c\ud615"})]})]})]}),(0,i.jsx)("div",{className:"horizontal"===x?"overflow-x-auto pb-8":"space-y-2",children:"vertical"===x?(0,i.jsx)("div",{className:"space-y-2",children:g.map((e,s)=>b(e,s))}):(0,i.jsx)("div",{className:"flex justify-center min-w-max py-8",children:(0,i.jsx)("div",{className:"inline-block",children:1===g.length?f(g[0]):(0,i.jsx)("div",{className:"flex space-x-8",children:g.map(e=>f(e))})})})}),(0,i.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"\ubc94\ub840"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"text-lg",children:"\ud83c\udfaf"}),(0,i.jsx)("span",{children:"\ubaa9\ud45c (L1)"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"text-lg",children:"\ud83d\udccb"}),(0,i.jsx)("span",{children:"\uae30\uc900 (L2)"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"text-lg",children:"\ud83c\udfaa"}),(0,i.jsx)("span",{children:"\ub300\uc548 (L3)"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"text-lg",children:"\ud83d\udcdd"}),(0,i.jsx)("span",{children:"\ud558\uc704\uae30\uc900 (L4)"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"text-lg",children:"\ud83d\udd39"}),(0,i.jsx)("span",{children:"\uc138\ubd80\uae30\uc900 (L5)"})]})]})]}),y]})}},6811:(e,s,t)=>{t.d(s,{A:()=>v});var r=t(2555),n=t(5043),l=t(3593),i=t(7907),a=t(8100),c=t(4956);const d=class{static parseText(e){const s=e.split("\n").filter(e=>e.trim().length>0),t=[],r=[],n=new Map;if(0===s.length)return{success:!1,criteria:[],errors:["\uc785\ub825\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."]};try{for(let l=0;l<s.length;l++){const e=s[l],i=this.parseLine(e,l+1);if(i){const e=i.name.toLowerCase();if(n.has(e)){r.push("\ub77c\uc778 ".concat(l+1,': \uc911\ubcf5\ub41c \uae30\uc900\uba85 "').concat(i.name,'"'));continue}if(n.set(e,!0),i.name.length<2){r.push("\ub77c\uc778 ".concat(l+1,": \uae30\uc900\uba85\uc740 2\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."));continue}if(i.level>5){r.push("\ub77c\uc778 ".concat(l+1,": \ucd5c\ub300 5\ub2e8\uacc4\uae4c\uc9c0\ub9cc \uc9c0\uc6d0\ub429\ub2c8\ub2e4."));continue}t.push(i)}else r.push("\ub77c\uc778 ".concat(l+1,': \ud30c\uc2f1\ud560 \uc218 \uc5c6\ub294 \ud615\uc2dd\uc785\ub2c8\ub2e4. "').concat(e,'"'))}const e=this.validateHierarchy(t);return r.push(...e),{success:0===r.length,criteria:t,errors:r}}catch(l){return{success:!1,criteria:[],errors:["\ud30c\uc2f1 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(l)]}}}static parseLine(e,s){const t=e.match(/^\s*(\d+(?:[.-]\d+)*)\.?\s+(.+)$/);if(t){const[,e,s]=t;let r=1;if(e.includes(".")||e.includes("-")){r=e.split(/[.-]/).filter(e=>""!==e.trim()).length}const[n,l]=this.extractNameAndDescription(s);return{name:n.trim(),description:l,level:r}}const r=e.match(/^(\s*)([-*+])\s+(.+)$/);if(r){const[,e,,s]=r;let t=1;if(e.length>0){const s=e.replace(/\t/g,"    ").length;s>=2&&(t=Math.floor(s/2)+1)}const[n,l]=this.extractNameAndDescription(s);return{name:n.trim(),description:l,level:t}}const n=e.match(/^(\s+)(.+)$/);if(n){const[,e,s]=n,t=e.replace(/\t/g,"    ").length,r=Math.floor(t/4)+1,[l,i]=this.extractNameAndDescription(s);return{name:l.trim(),description:i,level:r}}const l=e.match(/^(.+)$/);if(l){const[,e]=l,[s,t]=this.extractNameAndDescription(e);return{name:s.trim(),description:t,level:1}}return null}static extractNameAndDescription(e){const s=e.match(/^([^-]+?)\s*-\s*(.+)$/);if(s)return[s[1].trim(),s[2].trim()];const t=e.match(/^([^:]+?)\s*:\s*(.+)$/);if(t)return[t[1].trim(),t[2].trim()];const r=e.match(/^([^(]+?)\s*\(([^)]+)\)\s*$/);return r?[r[1].trim(),r[2].trim()]:[e.trim()]}static validateHierarchy(e){const s=[];if(0===e.length)return["\ucd5c\uc18c 1\uac1c \uc774\uc0c1\uc758 \uae30\uc900\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."];0===e.filter(e=>1===e.level).length&&s.push("\ucd5c\uc0c1\uc704 \ub808\ubca8(\ub808\ubca8 1) \uae30\uc900\uc774 \ucd5c\uc18c 1\uac1c \ud544\uc694\ud569\ub2c8\ub2e4.");const t=new Set(e.map(e=>e.level)),r=Array.from(t).sort((e,s)=>e-s);for(let n=0;n<r.length-1;n++)r[n+1]-r[n]>1&&s.push("\ub808\ubca8 ".concat(r[n],"\uc5d0\uc11c \ub808\ubca8 ").concat(r[n+1],"\ub85c \uac74\ub108\ub6f8 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc5f0\uc18d\ub41c \ub808\ubca8\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."));return s}static getExampleTexts(){return{markdown:"- \uc7ac\ubb34 \uc131\uacfc\n  - \uc218\uc775\uc131 - \ub9e4\ucd9c\uc561\uacfc \uc21c\uc774\uc775 \uc99d\uac00\uc728\n  - \uc548\uc815\uc131 - \ubd80\ucc44\ube44\uc728\uacfc \uc720\ub3d9\ube44\uc728  \n  - \uc131\uc7a5\uc131 - \uc804\ub144 \ub300\ube44 \uc131\uc7a5\ub960\n- \uc6b4\uc601 \ud6a8\uc728\uc131\n  - \uc0dd\uc0b0\uc131 - \uc778\ub2f9 \ub9e4\ucd9c\uc561\uacfc \uc124\ube44 \uac00\ub3d9\ub960\n  - \ud488\uc9c8 \uad00\ub9ac - \ubd88\ub7c9\ub960\uacfc \uace0\uac1d \ub9cc\uc871\ub3c4\n  - \ud601\uc2e0 \uc5ed\ub7c9 - R&D \ud22c\uc790\uc640 \uc2e0\uc81c\ud488 \uac1c\ubc1c\n- \uc9c0\uc18d\uac00\ub2a5\uc131\n  - \ud658\uacbd \uacbd\uc601 - \uce5c\ud658\uacbd \uc815\ucc45\uacfc \ud0c4\uc18c \ubc30\ucd9c\n  - \uc0ac\ud68c\uc801 \ucc45\uc784 - \uc0ac\ud68c\uacf5\ud5cc\uacfc \uc724\ub9ac \uacbd\uc601\n  - \uac70\ubc84\ub10c\uc2a4 - \ud22c\uba85 \uacbd\uc601\uacfc \uc18c\ud1b5",numbered:"1. \uc7ac\ubb34 \uc131\uacfc\n  1.1. \uc218\uc775\uc131 - \ub9e4\ucd9c\uc561\uacfc \uc21c\uc774\uc775 \uc99d\uac00\uc728\n  1.2. \uc548\uc815\uc131 - \ubd80\ucc44\ube44\uc728\uacfc \uc720\ub3d9\ube44\uc728\n  1.3. \uc131\uc7a5\uc131 - \uc804\ub144 \ub300\ube44 \uc131\uc7a5\ub960\n2. \uc6b4\uc601 \ud6a8\uc728\uc131\n  2.1. \uc0dd\uc0b0\uc131 - \uc778\ub2f9 \ub9e4\ucd9c\uc561\uacfc \uc124\ube44 \uac00\ub3d9\ub960\n  2.2. \ud488\uc9c8 \uad00\ub9ac - \ubd88\ub7c9\ub960\uacfc \uace0\uac1d \ub9cc\uc871\ub3c4\n  2.3. \ud601\uc2e0 \uc5ed\ub7c9 - R&D \ud22c\uc790\uc640 \uc2e0\uc81c\ud488 \uac1c\ubc1c\n3. \uc9c0\uc18d\uac00\ub2a5\uc131\n  3.1. \ud658\uacbd \uacbd\uc601 - \uce5c\ud658\uacbd \uc815\ucc45\uacfc \ud0c4\uc18c \ubc30\ucd9c\n  3.2. \uc0ac\ud68c\uc801 \ucc45\uc784 - \uc0ac\ud68c\uacf5\ud5cc\uacfc \uc724\ub9ac \uacbd\uc601\n  3.3. \uac70\ubc84\ub10c\uc2a4 - \ud22c\uba85 \uacbd\uc601\uacfc \uc18c\ud1b5",indented:"\uc7ac\ubb34 \uc131\uacfc\n    \uc218\uc775\uc131 - \ub9e4\ucd9c\uc561\uacfc \uc21c\uc774\uc775 \uc99d\uac00\uc728\n    \uc548\uc815\uc131 - \ubd80\ucc44\ube44\uc728\uacfc \uc720\ub3d9\ube44\uc728\n    \uc131\uc7a5\uc131 - \uc804\ub144 \ub300\ube44 \uc131\uc7a5\ub960\n\uc6b4\uc601 \ud6a8\uc728\uc131\n    \uc0dd\uc0b0\uc131 - \uc778\ub2f9 \ub9e4\ucd9c\uc561\uacfc \uc124\ube44 \uac00\ub3d9\ub960\n    \ud488\uc9c8 \uad00\ub9ac - \ubd88\ub7c9\ub960\uacfc \uace0\uac1d \ub9cc\uc871\ub3c4\n    \ud601\uc2e0 \uc5ed\ub7c9 - R&D \ud22c\uc790\uc640 \uc2e0\uc81c\ud488 \uac1c\ubc1c\n\uc9c0\uc18d\uac00\ub2a5\uc131\n    \ud658\uacbd \uacbd\uc601 - \uce5c\ud658\uacbd \uc815\ucc45\uacfc \ud0c4\uc18c \ubc30\ucd9c\n    \uc0ac\ud68c\uc801 \ucc45\uc784 - \uc0ac\ud68c\uacf5\ud5cc\uacfc \uc724\ub9ac \uacbd\uc601\n    \uac70\ubc84\ub10c\uc2a4 - \ud22c\uba85 \uacbd\uc601\uacfc \uc18c\ud1b5"}}};var o=t(579);const x=e=>{let{onImport:s,onCancel:t,existingCriteria:r}=e;const[a,c]=(0,n.useState)(""),[x,m]=(0,n.useState)("input"),[h,p]=(0,n.useState)(null),[u,g]=(0,n.useState)(!1),[v,j]=(0,n.useState)(null),b=e=>{const s=[],t=new Map;return e.forEach((e,r)=>{const n="temp_".concat(Date.now(),"_").concat(r,"_").concat(Math.floor(1e3*Math.random()));let l=null;if(e.level>1){const s=e.level-1,r=t.get(s);r&&(l=r.id)}const i={id:n,name:e.name,description:e.description,parent_id:l,level:e.level,children:void 0,weight:1,order:r+1};s.push(i),t.set(e.level,i);for(let s=e.level+1;s<=10;s++)t.delete(s)}),s},f=e=>{const s=[],t=e=>{e.forEach(e=>{s.push(e),e.children&&e.children.length>0&&t(e.children)})};return t(e),s},y=d.getExampleTexts();return(0,o.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[v&&(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm font-medium shadow-lg ".concat("success"===v.type?"bg-green-100 text-green-800":"info"===v.type?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:v.text}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:(0,o.jsx)(l.A,{title:"\ud83d\uddc2\ufe0f \uacc4\uce35\uad6c\uc870 \uc77c\uad04 \uc785\ub825",children:(0,o.jsxs)("div",{className:"flex flex-col h-full max-h-[80vh]",children:[(0,o.jsxs)("div",{className:"flex border-b flex-shrink-0",children:[(0,o.jsx)("button",{className:"px-4 py-2 font-medium ".concat("input"===x?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>m("input"),children:"\ud14d\uc2a4\ud2b8 \uc785\ub825"}),(0,o.jsx)("button",{className:"px-4 py-2 font-medium ".concat("examples"===x?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>m("examples"),children:"\uc785\ub825 \uc608\uc81c"})]}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-scroll p-6 space-y-6 pb-20",children:["input"===x&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,o.jsx)("h4",{className:"font-medium text-blue-900 mb-3",children:"\ud83d\udccb \uacc4\uce35\uad6c\uc870 \uc785\ub825 \uac00\uc774\ub4dc"}),(0,o.jsxs)("div",{className:"text-sm text-blue-700 space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"\ud83d\udcdd \ub9c8\ud06c\ub2e4\uc6b4 \ub9ac\uc2a4\ud2b8 \ud615\uc2dd"}),(0,o.jsxs)("div",{className:"ml-4 mt-1 font-mono text-xs bg-white p-2 rounded",children:["- \uc0c1\uc704\uae30\uc900",(0,o.jsx)("br",{}),"\xa0\xa0- \ud558\uc704\uae30\uc900 (2\uce78 \ub4e4\uc5ec\uc4f0\uae30)",(0,o.jsx)("br",{}),"\xa0\xa0\xa0\xa0- \uc138\ubd80\uae30\uc900 (4\uce78 \ub4e4\uc5ec\uc4f0\uae30)"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"\ud83d\udd22 \ubc88\ud638 \ub9e4\uae30\uae30 \ud615\uc2dd"}),(0,o.jsxs)("div",{className:"ml-4 mt-1 font-mono text-xs bg-white p-2 rounded",children:["1. \uc0c1\uc704\uae30\uc900",(0,o.jsx)("br",{}),"\xa0\xa01.1. \ud558\uc704\uae30\uc900",(0,o.jsx)("br",{}),"\xa0\xa01.2. \ud558\uc704\uae30\uc900"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"\ud83d\udcd0 \ub4e4\uc5ec\uc4f0\uae30 \ud615\uc2dd"}),(0,o.jsxs)("div",{className:"ml-4 mt-1 font-mono text-xs bg-white p-2 rounded",children:["\uc0c1\uc704\uae30\uc900",(0,o.jsx)("br",{}),"\xa0\xa0\xa0\xa0\ud558\uc704\uae30\uc900 (4\uce78 \ub4e4\uc5ec\uc4f0\uae30)",(0,o.jsx)("br",{}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\uc138\ubd80\uae30\uc900 (8\uce78 \ub4e4\uc5ec\uc4f0\uae30)"]})]}),(0,o.jsxs)("div",{className:"text-yellow-700 bg-yellow-50 p-2 rounded",children:["\ud83d\udca1 ",(0,o.jsx)("strong",{children:"\uc911\uc694:"})," \ub4e4\uc5ec\uc4f0\uae30\ub294 \uc815\ud655\ud55c \uacf5\ubc31 \uc218\uac00 \uc911\uc694\ud569\ub2c8\ub2e4!",(0,o.jsx)("br",{}),"\u2022 \ub9c8\ud06c\ub2e4\uc6b4: 2\uce78\uc529 \uc99d\uac00",(0,o.jsx)("br",{}),"\u2022 \ub4e4\uc5ec\uc4f0\uae30: 4\uce78\uc529 \uc99d\uac00"]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uacc4\uce35\uad6c\uc870 \ud14d\uc2a4\ud2b8 \uc785\ub825"}),(0,o.jsx)("textarea",{className:"w-full h-64 p-3 border border-gray-300 rounded-lg font-mono text-sm resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uc5ec\uae30\uc5d0 \uacc4\uce35\uad6c\uc870\ub97c \uc785\ub825\ud558\uc138\uc694...\r \uc608\uc2dc:\r\n- \uae30\uc220 \ud488\uc9c8\r - \uc131\ub2a5 - \uc2dc\uc2a4\ud15c \ucc98\ub9ac \uc18d\ub3c4\uc640 \uc751\ub2f5 \uc2dc\uac04\r - \uc548\uc815\uc131 - \uc624\ub958 \ubc1c\uc0dd\ub960\uacfc \ubcf5\uad6c \ub2a5\ub825\r - \ud655\uc7a5\uc131 - \ud5a5\ud6c4 \uae30\ub2a5 \ucd94\uac00 \ubc0f \uaddc\ubaa8 \ud655\ub300 \uac00\ub2a5\uc131\r\n- \uacbd\uc81c\uc131\r - \ucd08\uae30 \ube44\uc6a9 - \ub3c4\uc785 \ubc0f \uad6c\ucd95\uc5d0 \ud544\uc694\ud55c \ud22c\uc790 \ube44\uc6a9\r - \uc6b4\uc601 \ube44\uc6a9 - \uc6d4\ubcc4 \uc720\uc9c0\ubcf4\uc218 \ubc0f \uad00\ub9ac \ube44\uc6a9",value:a,onChange:e=>c(e.target.value)})]}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(i.A,{variant:"primary",onClick:()=>{if(a.trim()){g(!0);try{const e=d.parseText(a);if(r&&r.length>0){const s=f(r).map(e=>e.name.toLowerCase()),t=e.criteria.filter(e=>s.includes(e.name.toLowerCase()));t.length>0&&(e.errors.push("\uae30\uc874 \uae30\uc900\uacfc \uc911\ubcf5: ".concat(t.map(e=>e.name).join(", "))),e.success=!1)}p(e)}catch(e){p({success:!1,criteria:[],errors:["\ud30c\uc2f1 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(e)]})}finally{g(!1)}}else p({success:!1,criteria:[],errors:["\uc785\ub825\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."]})},disabled:!a.trim()||u,children:u?"\ubd84\uc11d \uc911...":"\ud83d\udcca \uad6c\uc870 \ubd84\uc11d"})}),h&&(0,o.jsx)("div",{className:"space-y-4",children:h.success?(0,o.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,o.jsxs)("h4",{className:"font-medium text-green-900 mb-3",children:["\u2705 \ubd84\uc11d \uc644\ub8cc (",h.criteria.length,"\uac1c \uae30\uc900)"]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"text-sm text-green-700 mb-3",children:(()=>{const e=h.criteria.reduce((e,s)=>(e[s.level]=(e[s.level]||0)+1,e),{});return Object.entries(e).map(e=>{let[s,t]=e;return(0,o.jsx)("span",{className:"inline-block mr-4",children:"\ub808\ubca8 ".concat(s,": ").concat(t,"\uac1c")},s)})})()}),(0,o.jsx)("div",{className:"bg-white rounded p-3 text-sm",children:h.criteria.map((e,s)=>(0,o.jsx)("div",{className:"py-1",children:(0,o.jsxs)("span",{style:{paddingLeft:"".concat(20*(e.level-1),"px")},children:[1===e.level&&"\ud83d\udcc1 ",2===e.level&&"\ud83d\udcc2 ",3===e.level&&"\ud83d\udcc4 ",4===e.level&&"\ud83d\udcdd ",e.level>=5&&"\ud83d\udd39 ",(0,o.jsx)("span",{className:"font-medium",children:e.name}),e.description&&(0,o.jsxs)("span",{className:"ml-2 text-gray-600",children:["- ",e.description]})]})},s))})]})]}):(0,o.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,o.jsx)("h4",{className:"font-medium text-red-900 mb-2",children:"\u274c \ubd84\uc11d \uc2e4\ud328"}),(0,o.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:h.errors.map((e,s)=>(0,o.jsxs)("li",{children:["\u2022 ",e]},s))})]})})]}),"examples"===x&&(0,o.jsxs)("div",{className:"space-y-6 pb-8",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\uc785\ub825 \ud615\uc2dd \uc608\uc81c"}),(0,o.jsx)("p",{className:"text-gray-600 text-sm",children:"\uc544\ub798 \uc608\uc81c\ub97c \ud074\ub9ad\ud558\uba74 \uc785\ub825\ucc3d\uc5d0 \uc790\ub3d9\uc73c\ub85c \ubcf5\uc0ac\ub429\ub2c8\ub2e4."})]}),(0,o.jsx)("div",{className:"grid gap-4 mb-8",children:Object.entries(y).map(e=>{let[s,t]=e;return(0,o.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsxs)("h4",{className:"font-medium text-gray-900",children:["markdown"===s&&"\ud83d\udcdd \ub9c8\ud06c\ub2e4\uc6b4 \ub9ac\uc2a4\ud2b8 \ud615\uc2dd (2\uce78\uc529 \ub4e4\uc5ec\uc4f0\uae30)","numbered"===s&&"\ud83d\udd22 \ubc88\ud638 \ub9e4\uae30\uae30 \ud615\uc2dd","indented"===s&&"\ud83d\udcd0 \ub4e4\uc5ec\uc4f0\uae30 \ud615\uc2dd (4\uce78\uc529 \ub4e4\uc5ec\uc4f0\uae30)"]}),(0,o.jsx)(i.A,{size:"sm",variant:"outline",onClick:()=>(c(y[s]),m("input"),void p(null)),children:"\uc0ac\uc6a9\ud558\uae30"})]}),(0,o.jsx)("pre",{className:"text-xs bg-gray-50 p-3 rounded border overflow-x-auto whitespace-pre",children:t})]},s)})}),(0,o.jsx)("div",{className:"h-16"})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 px-6 pb-6 border-t flex-shrink-0 bg-white",children:[(0,o.jsx)(i.A,{variant:"secondary",onClick:t,children:"\ucde8\uc18c"}),h&&h.success&&(0,o.jsxs)(i.A,{variant:"primary",onClick:()=>{if(!h||!h.success)return;const e=b(h.criteria),t=[];e.forEach((e,s)=>{e.id||t.push("".concat(s+1,"\ubc88\uc9f8 \uae30\uc900: ID\uac00 \ube44\uc5b4\uc788\uc74c")),e.name&&""!==e.name.trim()||t.push("".concat(s+1,"\ubc88\uc9f8 \uae30\uc900: \uc774\ub984\uc774 \ube44\uc5b4\uc788\uc74c")),(!e.level||e.level<1)&&t.push("".concat(s+1,"\ubc88\uc9f8 \uae30\uc900: \ub808\ubca8\uc774 \uc798\ubabb\ub428 (").concat(e.level,")"))});const r=new Set(e.map(e=>e.id));if(e.forEach((e,s)=>{e.parent_id&&!r.has(e.parent_id)&&t.push("".concat(s+1,"\ubc88\uc9f8 \uae30\uc900 '").concat(e.name,"': \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ubd80\ubaa8 ID (").concat(e.parent_id,")"))}),t.length>0)return n="error",l="\ub370\uc774\ud130 \uac80\uc99d \uc624\ub958: ".concat(t.join(", ")),j({type:n,text:l}),void setTimeout(()=>j(null),3e3);var n,l;s(e)},children:["\u2728 ",h.criteria.length,"\uac1c \uae30\uc900 \ucd94\uac00"]})]})]})})})]})},m=[{id:"3x3",name:"3x3 \uae30\ubcf8 \uad6c\uc870",description:"3\uac1c \uae30\uc900, \uac01 3\uac1c \ud558\uc704\uae30\uc900",icon:"\ud83d\udcca",structure:[{name:"\uae30\uc900 1",description:"\uccab \ubc88\uc9f8 \ud3c9\uac00 \uae30\uc900",children:[{name:"\ud558\uc704\uae30\uc900 1-1",description:"\uc0c1\uc138 \ud3c9\uac00 \ud56d\ubaa9"},{name:"\ud558\uc704\uae30\uc900 1-2",description:"\uc0c1\uc138 \ud3c9\uac00 \ud56d\ubaa9"},{name:"\ud558\uc704\uae30\uc900 1-3",description:"\uc0c1\uc138 \ud3c9\uac00 \ud56d\ubaa9"}]},{name:"\uae30\uc900 2",description:"\ub450 \ubc88\uc9f8 \ud3c9\uac00 \uae30\uc900",children:[{name:"\ud558\uc704\uae30\uc900 2-1",description:"\uc0c1\uc138 \ud3c9\uac00 \ud56d\ubaa9"},{name:"\ud558\uc704\uae30\uc900 2-2",description:"\uc0c1\uc138 \ud3c9\uac00 \ud56d\ubaa9"},{name:"\ud558\uc704\uae30\uc900 2-3",description:"\uc0c1\uc138 \ud3c9\uac00 \ud56d\ubaa9"}]},{name:"\uae30\uc900 3",description:"\uc138 \ubc88\uc9f8 \ud3c9\uac00 \uae30\uc900",children:[{name:"\ud558\uc704\uae30\uc900 3-1",description:"\uc0c1\uc138 \ud3c9\uac00 \ud56d\ubaa9"},{name:"\ud558\uc704\uae30\uc900 3-2",description:"\uc0c1\uc138 \ud3c9\uac00 \ud56d\ubaa9"},{name:"\ud558\uc704\uae30\uc900 3-3",description:"\uc0c1\uc138 \ud3c9\uac00 \ud56d\ubaa9"}]}]},{id:"4x2",name:"4x2 \uad6c\uc870",description:"4\uac1c \uae30\uc900, \uac01 2\uac1c \ud558\uc704\uae30\uc900",icon:"\ud83d\udcc8",structure:[{name:"\ud488\uc9c8",description:"\uc81c\ud488/\uc11c\ube44\uc2a4 \ud488\uc9c8 \ud3c9\uac00",children:[{name:"\uae30\ub2a5\uc131",description:"\ud575\uc2ec \uae30\ub2a5 \uc218\ud589 \ub2a5\ub825"},{name:"\uc2e0\ub8b0\uc131",description:"\uc548\uc815\uc131\uacfc \uc77c\uad00\uc131"}]},{name:"\ube44\uc6a9",description:"\uacbd\uc81c\uc131 \ud3c9\uac00",children:[{name:"\ucd08\uae30\ube44\uc6a9",description:"\ub3c4\uc785 \ubc0f \uad6c\ucd95 \ube44\uc6a9"},{name:"\uc6b4\uc601\ube44\uc6a9",description:"\uc720\uc9c0\ubcf4\uc218 \ubc0f \uad00\ub9ac \ube44\uc6a9"}]},{name:"\uae30\uc220",description:"\uae30\uc220\uc801 \uc6b0\uc218\uc131 \ud3c9\uac00",children:[{name:"\ud601\uc2e0\uc131",description:"\ucd5c\uc2e0 \uae30\uc220 \uc801\uc6a9 \uc218\uc900"},{name:"\ud655\uc7a5\uc131",description:"\ud5a5\ud6c4 \ubc1c\uc804 \uac00\ub2a5\uc131"}]},{name:"\uc9c0\uc6d0",description:"\uc9c0\uc6d0 \uccb4\uacc4 \ud3c9\uac00",children:[{name:"\uae30\uc220\uc9c0\uc6d0",description:"\uae30\uc220 \uc9c0\uc6d0 \uc11c\ube44\uc2a4 \ud488\uc9c8"},{name:"\uad50\uc721\ud6c8\ub828",description:"\uc0ac\uc6a9\uc790 \uad50\uc721 \ud504\ub85c\uadf8\ub7a8"}]}]},{id:"2x4",name:"2x4 \uc2ec\ud654 \uad6c\uc870",description:"2\uac1c \uae30\uc900, \uac01 4\uac1c \ud558\uc704\uae30\uc900",icon:"\ud83c\udfaf",structure:[{name:"\uc815\ub7c9\uc801 \ud3c9\uac00",description:"\uce21\uc815 \uac00\ub2a5\ud55c \uc9c0\ud45c",children:[{name:"\uc131\uacfc \uc9c0\ud45c",description:"KPI \ub2ec\uc131\ub3c4"},{name:"\ud6a8\uc728\uc131",description:"\uc790\uc6d0 \ud65c\uc6a9 \ud6a8\uc728"},{name:"\uc0dd\uc0b0\uc131",description:"\uc0b0\ucd9c\ubb3c \ub300\ube44 \ud22c\uc785"},{name:"\uc218\uc775\uc131",description:"\uc7ac\ubb34\uc801 \uc131\uacfc"}]},{name:"\uc815\uc131\uc801 \ud3c9\uac00",description:"\uc8fc\uad00\uc801 \ud3c9\uac00 \uc694\uc18c",children:[{name:"\ub9cc\uc871\ub3c4",description:"\uc0ac\uc6a9\uc790 \ub9cc\uc871 \uc218\uc900"},{name:"\ud601\uc2e0\uc131",description:"\ucc3d\uc758\uc131\uacfc \ub3c5\ucc3d\uc131"},{name:"\ud611\uc5c5",description:"\ud300\uc6cc\ud06c\uc640 \uc18c\ud1b5"},{name:"\uc9c0\uc18d\uac00\ub2a5\uc131",description:"\uc7a5\uae30\uc801 \ubc1c\uc804 \uac00\ub2a5\uc131"}]}]},{id:"simple3",name:"\ub2e8\uc21c 3\ub2e8\uacc4",description:"3\uac1c \uae30\uc900\ub9cc (\ud558\uc704\uae30\uc900 \uc5c6\uc74c)",icon:"\u26a1",structure:[{name:"\ud6a8\uacfc\uc131",description:"\ubaa9\ud45c \ub2ec\uc131 \uc815\ub3c4"},{name:"\ud6a8\uc728\uc131",description:"\uc790\uc6d0 \ud65c\uc6a9 \uc815\ub3c4"},{name:"\ub9cc\uc871\ub3c4",description:"\uc774\ud574\uad00\uacc4\uc790 \ub9cc\uc871 \uc218\uc900"}]},{id:"complex",name:"\ubcf5\ud569 \uacc4\uce35\uad6c\uc870",description:"\ub2e4\uce35 \uad6c\uc870 (3\ub2e8\uacc4)",icon:"\ud83c\udfd7\ufe0f",structure:[{name:"\uc804\ub7b5\uc801 \uc801\ud569\uc131",description:"\uc870\uc9c1 \uc804\ub7b5\uacfc\uc758 \uc815\ub82c",children:[{name:"\ube44\uc804 \uc815\ud569\uc131",description:"\uc870\uc9c1 \ube44\uc804\uacfc\uc758 \uc77c\uce58",children:[{name:"\uc7a5\uae30 \ubaa9\ud45c",description:"\uc7a5\uae30 \ubaa9\ud45c \uae30\uc5ec\ub3c4"},{name:"\ud575\uc2ec \uac00\uce58",description:"\ud575\uc2ec \uac00\uce58 \ubd80\ud569\ub3c4"}]},{name:"\uc2dc\uc7a5 \uacbd\uc7c1\ub825",description:"\uc2dc\uc7a5\uc5d0\uc11c\uc758 \uc704\uce58",children:[{name:"\ucc28\ubcc4\ud654",description:"\uacbd\uc7c1\uc0ac \ub300\ube44 \ucc28\ubcc4\uc810"},{name:"\uc2dc\uc7a5 \uc810\uc720\uc728",description:"\uc2dc\uc7a5 \uc9c0\ubc30\ub825"}]}]},{name:"\uc6b4\uc601 \uc6b0\uc218\uc131",description:"\uc6b4\uc601 \ud6a8\uc728\uc131\uacfc \ud488\uc9c8",children:[{name:"\ud504\ub85c\uc138\uc2a4",description:"\uc5c5\ubb34 \ud504\ub85c\uc138\uc2a4 \ucd5c\uc801\ud654",children:[{name:"\ud45c\uc900\ud654",description:"\ud504\ub85c\uc138\uc2a4 \ud45c\uc900\ud654 \uc218\uc900"},{name:"\uc790\ub3d9\ud654",description:"\uc790\ub3d9\ud654 \uc801\uc6a9 \ubc94\uc704"}]},{name:"\ud488\uc9c8 \uad00\ub9ac",description:"\ud488\uc9c8 \ubcf4\uc99d \uccb4\uacc4",children:[{name:"\ud488\uc9c8 \uae30\uc900",description:"\ud488\uc9c8 \uae30\uc900 \ucda9\uc871\ub3c4"},{name:"\uac1c\uc120 \ud65c\ub3d9",description:"\uc9c0\uc18d\uc801 \uac1c\uc120 \ub178\ub825"}]}]}]},{id:"it_project",name:"IT \ud504\ub85c\uc81d\ud2b8 \ud3c9\uac00",description:"SW/\uc2dc\uc2a4\ud15c \ub3c4\uc785 \ud3c9\uac00 (3\xd73 \uad6c\uc870)",icon:"\ud83d\udcbb",structure:[{name:"\uae30\uc220\uc801 \uc694\uad6c\uc0ac\ud56d",description:"\uae30\uc220 \uc2a4\ud399 \ucda9\uc871\ub3c4",children:[{name:"\uc131\ub2a5",description:"\ucc98\ub9ac \uc18d\ub3c4\uc640 \uc6a9\ub7c9"},{name:"\ubcf4\uc548",description:"\ubcf4\uc548 \uc694\uad6c\uc0ac\ud56d \ucda9\uc871"},{name:"\ud638\ud658\uc131",description:"\uae30\uc874 \uc2dc\uc2a4\ud15c\uacfc\uc758 \uc5f0\ub3d9"}]},{name:"\ube44\uc988\ub2c8\uc2a4 \uac00\uce58",description:"\uc0ac\uc5c5\uc801 \ud6a8\uacfc",children:[{name:"ROI",description:"\ud22c\uc790 \ub300\ube44 \uc218\uc775"},{name:"\ud504\ub85c\uc138\uc2a4 \uac1c\uc120",description:"\uc5c5\ubb34 \ud6a8\uc728 \ud5a5\uc0c1\ub3c4"},{name:"\uc0ac\uc6a9\uc790 \uacbd\ud5d8",description:"UX/UI \ud488\uc9c8"}]},{name:"\ubca4\ub354 \uc5ed\ub7c9",description:"\uacf5\uae09\uc0ac \ud3c9\uac00",children:[{name:"\uae30\uc220\ub825",description:"\uae30\uc220 \uc804\ubb38\uc131\uacfc \uacbd\ud5d8"},{name:"\uc9c0\uc6d0 \uccb4\uacc4",description:"\uc720\uc9c0\ubcf4\uc218 \ubc0f \uc9c0\uc6d0"},{name:"\uc548\uc815\uc131",description:"\uae30\uc5c5 \uc2e0\ub8b0\ub3c4\uc640 \uc9c0\uc18d\uc131"}]}]}],h=e=>{let{onSelectTemplate:s,onClose:t}=e;return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"p-6 border-b",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\uae30\ubcf8 \ud15c\ud50c\ub9bf \uc120\ud0dd"}),(0,o.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,o.jsx)("p",{className:"text-gray-600 mt-2",children:"\ud504\ub85c\uc81d\ud2b8\uc5d0 \ub9de\ub294 \uae30\uc900 \uad6c\uc870\ub97c \uc120\ud0dd\ud558\uc138\uc694. \uc120\ud0dd \ud6c4 \uc218\uc815 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]}),(0,o.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(e=>(0,o.jsx)("div",{className:"border rounded-lg p-4 hover:border-blue-500 hover:shadow-md transition-all cursor-pointer",onClick:()=>s(e),children:(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("div",{className:"text-3xl",children:e.icon}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,o.jsxs)("div",{className:"bg-gray-50 rounded p-2 text-xs space-y-1",children:[e.structure.slice(0,3).map((e,s)=>(0,o.jsxs)("div",{className:"text-gray-700",children:[(0,o.jsxs)("span",{className:"font-medium",children:["\u2022 ",e.name]}),e.children&&(0,o.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",e.children.length,"\uac1c \ud558\uc704)"]})]},s)),e.structure.length>3&&(0,o.jsxs)("div",{className:"text-gray-500",children:["... \uc678 ",e.structure.length-3,"\uac1c"]})]})]})]})},e.id))})}),(0,o.jsx)("div",{className:"p-4 border-t bg-gray-50",children:(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)(i.A,{variant:"secondary",onClick:t,children:"\ucde8\uc18c"})})})]})})},p=e=>{let{initialCriteria:s=[],onSave:t,onClose:l,isInline:c=!0}=e;const[d,x]=(0,n.useState)(()=>s.length>0?s.map(e=>(0,r.A)((0,r.A)({},e),{},{isExpanded:!0})):[{id:"temp_".concat(Date.now()),name:"\ud3c9\uac00 \ubaa9\ud45c",description:"\ucd5c\uc0c1\uc704 \ud3c9\uac00 \ubaa9\ud45c",level:1,parent_id:null,children:[],isExpanded:!0}]),[m,h]=(0,n.useState)(null),[p,u]=(0,n.useState)(null),[g,v]=(0,n.useState)(null),j=(e,s)=>{for(const t of e){if(t.id===s)return t;const e=j(t.children,s);if(e)return e}return null},b=(e,s,t)=>e.map(e=>e.id===s?(0,r.A)((0,r.A)({},e),t):(0,r.A)((0,r.A)({},e),{},{children:b(e.children,s,t)})),f=e=>{var s;const t={id:"temp_".concat(Date.now(),"_").concat(Math.floor(1e3*Math.random())),name:"\uc0c8 \uae30\uc900",description:"",level:e?((null===(s=j(d,e))||void 0===s?void 0:s.level)||0)+1:1,parent_id:e,children:[],isEditing:!0,isExpanded:!0};x(e?s=>{const n=s=>s.map(s=>s.id===e?(0,r.A)((0,r.A)({},s),{},{children:[...s.children,t],isExpanded:!0}):(0,r.A)((0,r.A)({},s),{},{children:n(s.children)}));return n(s)}:e=>[...e,t]),h(t.id)},y=()=>{if(!g)return;const e=g,s=t=>t.filter(t=>t.id!==e&&(t.children=s(t.children),!0));x(e=>s(e)),h(null),v(null)},N=e=>{x(s=>{var t;return b(s,e,{isEditing:!(null!==(t=j(s,e))&&void 0!==t&&t.isEditing)})})},w=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},A=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const t=e.children&&e.children.length>0,n=m===e.id;return(0,o.jsxs)("div",{className:"mb-2",children:[(0,o.jsxs)("div",{className:"\n            flex items-center p-2 rounded-lg border transition-all\n            ".concat(n?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300","\n            ").concat(s>0?"ml-8":"","\n          "),onClick:()=>h(e.id),draggable:!0,onDragStart:s=>((e,s)=>{u(s),e.dataTransfer.effectAllowed="move"})(s,e.id),onDragOver:w,onDrop:s=>((e,s)=>{e.preventDefault(),p&&p!==s&&(x(e=>{const t=j(e,p);if(!t)return e;if(((s,t)=>{const r=j(e,s);if(!r)return!1;const n=e=>e.some(e=>e.id===t||n(e.children));return n(r.children)})(p,s))return e;const n=e=>e.filter(e=>e.id!==p).map(e=>(0,r.A)((0,r.A)({},e),{},{children:n(e.children)})),l=(e,s,t)=>(0,r.A)((0,r.A)({},e),{},{level:s+1,parent_id:t,children:e.children.map(t=>l(t,s+1,e.id))}),i=e=>e.map(e=>{if(e.id===s){const n=l(t,e.level,s);return(0,r.A)((0,r.A)({},e),{},{children:[...e.children,n],isExpanded:!0})}return(0,r.A)((0,r.A)({},e),{},{children:i(e.children)})});return i(n(e))}),u(null))})(s,e.id),children:[t&&(0,o.jsx)("button",{onClick:s=>{var t;s.stopPropagation(),t=e.id,x(e=>{var s;return b(e,t,{isExpanded:!(null!==(s=j(e,t))&&void 0!==s&&s.isExpanded)})})},className:"mr-2 text-gray-500 hover:text-gray-700",children:e.isExpanded?"\u25bc":"\u25b6"}),(0,o.jsx)("div",{className:"\n            w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold mr-2\n            ".concat(0===s?"bg-purple-500 text-white":1===s?"bg-blue-500 text-white":2===s?"bg-green-500 text-white":"bg-gray-500 text-white","\n          "),children:e.level}),(0,o.jsx)("div",{className:"flex-1",children:e.isEditing?(0,o.jsxs)("div",{className:"space-y-2",onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("input",{value:e.name,onChange:s=>{return t=e.id,r=s.target.value,void x(e=>b(e,t,{name:r}));var t,r},placeholder:"\uae30\uc900 \uc774\ub984",className:"w-full px-2 py-1 text-sm border rounded focus:outline-none focus:border-blue-500",autoFocus:!0}),(0,o.jsx)("input",{value:e.description||"",onChange:s=>{return t=e.id,r=s.target.value,void x(e=>b(e,t,{description:r}));var t,r},placeholder:"\uc124\uba85 (\uc120\ud0dd\uc0ac\ud56d)",className:"w-full px-2 py-1 text-xs border rounded focus:outline-none focus:border-blue-500"}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsx)("button",{className:"px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>N(e.id),children:"\ud655\uc778"}),(0,o.jsx)("button",{className:"px-3 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300",onClick:()=>{N(e.id)},children:"\ucde8\uc18c"})]})]}):(0,o.jsxs)("div",{className:"cursor-pointer",onDoubleClick:()=>N(e.id),children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),e.description&&(0,o.jsx)("div",{className:"text-xs text-gray-500",children:e.description}),(0,o.jsx)("div",{className:"text-xs text-blue-500 mt-1",children:"\ub354\ube14\ud074\ub9ad\uc73c\ub85c \ud3b8\uc9d1"})]})}),!e.isEditing&&(0,o.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[(0,o.jsx)("button",{onClick:s=>{s.stopPropagation(),f(e.id)},className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"\ud558\uc704 \uae30\uc900 \ucd94\uac00",children:"\u2795"}),(0,o.jsx)("button",{onClick:s=>{s.stopPropagation(),N(e.id)},className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"\ud3b8\uc9d1",children:"\u270f\ufe0f"}),(0,o.jsx)("button",{onClick:s=>{var t;s.stopPropagation(),t=e.id,v(t)},className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"\uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})]})]}),e.isExpanded&&t&&(0,o.jsx)("div",{className:"mt-1",children:e.children.map(e=>A(e,s+1))})]},e.id)},C=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const t=[];return e.forEach((e,r)=>{t.push({id:e.id,name:e.name,description:e.description,level:e.level,parent_id:s,order:r+1}),e.children&&e.children.length>0&&t.push(...C(e.children,e.id))}),t},k=(()=>{const e=C(d),s=e.reduce((e,s)=>(e[s.level]=(e[s.level]||0)+1,e),{});return{total:e.length,levels:s}})();return c?(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"\uc2dc\uac01\uc801 \uacc4\uce35\uad6c\uc870 \ube4c\ub354"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"\ub4dc\ub798\uadf8 \uc564 \ub4dc\ub86d\uc73c\ub85c \uad6c\uc870\ub97c \uc870\uc815\ud558\uace0, \ub354\ube14\ud074\ub9ad\ud558\uc5ec \ud3b8\uc9d1\ud558\uc138\uc694"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:["\uc804\uccb4 \uae30\uc900: ",(0,o.jsxs)("span",{className:"font-semibold",children:[k.total,"\uac1c"]})]}),(0,o.jsx)(i.A,{variant:"outline",size:"sm",onClick:()=>f(null),children:"\u2795 \ucd5c\uc0c1\uc704 \uae30\uc900 \ucd94\uac00"})]})]}),(0,o.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white max-h-[500px] overflow-y-auto",children:[(0,o.jsx)("div",{className:"space-y-2",children:d.map(e=>A(e))}),0===d.length&&(0,o.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\uc704 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc5ec \uccab \ubc88\uc9f8 \uae30\uc900\uc744 \ucd94\uac00\ud558\uc138\uc694"})]}),(0,o.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[l&&(0,o.jsx)(i.A,{variant:"secondary",onClick:l,children:"\ucde8\uc18c"}),(0,o.jsx)(i.A,{variant:"primary",onClick:()=>t(d),disabled:0===k.total,children:"\uc801\uc6a9\ud558\uae30"})]}),(0,o.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg text-xs text-gray-600",children:[(0,o.jsx)("strong",{children:"\ud83d\udca1 \uc0ac\uc6a9 \ud301:"}),"\u2795 \ud558\uc704 \uae30\uc900 \ucd94\uac00 | \u270f\ufe0f \uc774\ub984\uacfc \uc124\uba85 \ud3b8\uc9d1 | \ud83d\uddd1\ufe0f \uc0ad\uc81c (\ud558\uc704 \ud3ec\ud568) | \ub354\ube14\ud074\ub9ad\uc73c\ub85c \uc9c1\uc811 \ud3b8\uc9d1 | \u25bc/\u25b6 \uc811\uae30/\ud3bc\uce58\uae30"]}),(0,o.jsx)(a.A,{isOpen:null!==g,onClose:()=>v(null),title:"\uae30\uc900 \uc0ad\uc81c",size:"sm",footer:(0,o.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,o.jsx)(i.A,{size:"sm",variant:"secondary",onClick:()=>v(null),children:"\ucde8\uc18c"}),(0,o.jsx)(i.A,{size:"sm",variant:"primary",onClick:y,children:"\uc0ad\uc81c"})]}),children:(0,o.jsx)("p",{className:"text-sm text-gray-700",children:"\uc774 \uae30\uc900\uacfc \ubaa8\ub4e0 \ud558\uc704 \uae30\uc900\uc774 \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uacc4\uc18d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"})})]}):(0,o.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl h-[90vh] flex flex-col",children:[(0,o.jsx)("div",{className:"p-4 border-b",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\uc2dc\uac01\uc801 \uacc4\uce35\uad6c\uc870 \ube4c\ub354"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"\ub4dc\ub798\uadf8 \uc564 \ub4dc\ub86d\uc73c\ub85c \uad6c\uc870\ub97c \uc870\uc815\ud558\uace0, \ud074\ub9ad\ud558\uc5ec \ud3b8\uc9d1\ud558\uc138\uc694"})]}),l&&(0,o.jsx)("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-xl",children:"\u2715"})]})}),(0,o.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto",children:[(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)(i.A,{variant:"outline",onClick:()=>f(null),className:"w-full",children:"\u2795 \ucd5c\uc0c1\uc704 \uae30\uc900 \ucd94\uac00"})}),(0,o.jsx)("div",{className:"space-y-2",children:d.map(e=>A(e))}),0===d.length&&(0,o.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\uc704 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc5ec \uccab \ubc88\uc9f8 \uae30\uc900\uc744 \ucd94\uac00\ud558\uc138\uc694"})]}),(0,o.jsxs)("div",{className:"w-80 border-l bg-gray-50 p-4 overflow-y-auto",children:[(0,o.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"\uad6c\uc870 \uc694\uc57d"}),(0,o.jsx)("div",{className:"bg-white rounded-lg p-4 mb-4",children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-gray-600",children:"\uc804\uccb4 \uae30\uc900"}),(0,o.jsxs)("span",{className:"font-semibold",children:[k.total,"\uac1c"]})]}),Object.entries(k.levels).map(e=>{let[s,t]=e;return(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsxs)("span",{className:"text-gray-500",children:["\ub808\ubca8 ",s]}),(0,o.jsxs)("span",{children:[String(t),"\uac1c"]})]},s)})]})}),(0,o.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"\uacc4\uce35\uad6c\uc870 \ubbf8\ub9ac\ubcf4\uae30"}),(0,o.jsx)("div",{className:"bg-white rounded-lg p-3 text-sm",children:C(d).map((e,s)=>(0,o.jsx)("div",{className:"py-1",style:{paddingLeft:"".concat(16*(e.level-1),"px")},children:(0,o.jsxs)("span",{className:"text-gray-700",children:[e.level>1&&"\u2514 ",e.name]})},s))}),(0,o.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:[(0,o.jsx)("h5",{className:"font-medium mb-1",children:"\ub3c4\uc6c0\ub9d0"}),(0,o.jsxs)("ul",{className:"space-y-1",children:[(0,o.jsx)("li",{children:"\u2022 \u2795 \ubc84\ud2bc\uc73c\ub85c \ud558\uc704 \uae30\uc900 \ucd94\uac00"}),(0,o.jsx)("li",{children:"\u2022 \u270f\ufe0f \ubc84\ud2bc\uc73c\ub85c \uc774\ub984\uacfc \uc124\uba85 \ud3b8\uc9d1"}),(0,o.jsx)("li",{children:"\u2022 \ud83d\uddd1\ufe0f \ubc84\ud2bc\uc73c\ub85c \uc0ad\uc81c (\ud558\uc704 \ud3ec\ud568)"}),(0,o.jsx)("li",{children:"\u2022 \ub4dc\ub798\uadf8\ub85c \ub178\ub4dc\ub97c \ub2e4\ub978 \ubd80\ubaa8\uc5d0 \uc774\ub3d9"}),(0,o.jsx)("li",{children:"\u2022 \u25bc/\u25b6 \ubc84\ud2bc\uc73c\ub85c \uc811\uae30/\ud3bc\uce58\uae30"})]})]})]})]}),(0,o.jsx)("div",{className:"p-4 border-t bg-gray-50",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:[k.total,"\uac1c \uae30\uc900 \uad6c\uc131\ub428"]}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[l&&(0,o.jsx)(i.A,{variant:"secondary",onClick:l,children:"\ucde8\uc18c"}),(0,o.jsx)(i.A,{variant:"primary",onClick:()=>t(d),disabled:0===k.total,children:"\uc800\uc7a5\ud558\uae30"})]})]})})]}),(0,o.jsx)(a.A,{isOpen:null!==g,onClose:()=>v(null),title:"\uae30\uc900 \uc0ad\uc81c",size:"sm",footer:(0,o.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,o.jsx)(i.A,{size:"sm",variant:"secondary",onClick:()=>v(null),children:"\ucde8\uc18c"}),(0,o.jsx)(i.A,{size:"sm",variant:"primary",onClick:y,children:"\uc0ad\uc81c"})]}),children:(0,o.jsx)("p",{className:"text-sm text-gray-700",children:"\uc774 \uae30\uc900\uacfc \ubaa8\ub4e0 \ud558\uc704 \uae30\uc900\uc774 \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uacc4\uc18d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"})})]})};var u=t(3138),g=t(5297);const v=e=>{let{projectId:s,onCriteriaChange:t,onComplete:d}=e;const[m,v]=(0,n.useState)([]),[j,b]=(0,n.useState)([]),[f,y]=(0,n.useState)([]),[N,w]=(0,n.useState)(!1),A=e=>/^(\uae30\uc900|\ud558\uc704\uae30\uc900|\uc138\ubd80\uae30\uc900)\s*\d+(-\d+)*$/.test(e),C=e=>!!e&&("\uc138 \ubc88\uc9f8 \ud3c9\uac00 \uae30\uc900"===e||"\uc0c1\uc138 \ud3c9\uac00 \ud56d\ubaa9"===e||e.includes("\ubc88\uc9f8 \ud3c9\uac00 \uae30\uc900")||"\ud3c9\uac00 \ud56d\ubaa9"===e),[k,_]=(0,n.useState)(null),[S,E]=(0,n.useState)(null),L=(e,s)=>{_({type:e,text:s}),setTimeout(()=>_(null),3e3)},[z,D]=(0,n.useState)(!1),[I,M]=(0,n.useState)(!1),[R,O]=(0,n.useState)(null),[T,P]=(0,n.useState)(!1),[F,$]=(0,n.useState)(!1),[Q,U]=(0,n.useState)("vertical"),[H,q]=(0,n.useState)(!1),[K,V]=(0,n.useState)({}),W=(0,n.useCallback)(async()=>{try{P(!0);const e=(await u.A.getCriteria(s)||[]).map((e,s)=>{const t=e.parent||e.parent_id||null;return{id:String(e.id||(0,g.lk)()),name:e.name,description:e.description,parent_id:t?String(t):null,level:e.level||1,order:e.order||e.position||s+1,weight:e.weight||1,type:"criteria",children:[]}}),t=B(e);v(t),b(t),y([]),w(!1)}catch(e){L("error","\uae30\uc900 \ub85c\ub4dc \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),v([]),b([])}finally{P(!1)}},[s]),B=e=>{const s=new Map,t=[];e.forEach(e=>{const t=String(e.id);s.set(t,(0,r.A)((0,r.A)({},e),{},{id:t,children:[]}))}),e.forEach(e=>{const r=String(e.id),n=s.get(r);if(!n)return;const l=e.parent_id?String(e.parent_id):null;if(l&&s.has(l)){const e=s.get(l);if(e){e.children=e.children||[],e.children.push(n);const s=e.level||1;n.level=s+1}}else n.level=1,n.parent_id=null,t.push(n)});const n=e=>{e.sort((e,s)=>(e.order||0)-(s.order||0)),e.forEach(e=>{e.children&&e.children.length>0&&n(e.children)})};return n(t),t},G=e=>{const s=[],t=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e.forEach((e,i)=>{s.push((0,r.A)((0,r.A)({},e),{},{parent_id:n,level:l,order:i+1,children:void 0})),e.children&&e.children.length>0&&t(e.children,e.id,l+1)})};return t(e),s};(0,n.useEffect)(()=>{s&&W()},[s,W]),(0,n.useEffect)(()=>{const e=G(j).length;t(e)},[j,t]);const J=async()=>{const e=G(N?f:m);if(0!==e.length){$(!0);try{const r=await u.A.getCriteria(s);for(const e of r)e.id&&await u.A.deleteCriteria(s,e.id);let n=!0;const l=new Map,i=e.sort((e,s)=>e.level!==s.level?e.level-s.level:(e.order||0)-(s.order||0));for(const e of i){var t;let r=null,i=e.level||1;if(e.parent_id)if(l.has(e.parent_id)){const s=l.get(e.parent_id);r=null===s||void 0===s?void 0:s.id,void 0!==(null===s||void 0===s?void 0:s.level)&&(i=s.level+1)}else(0,g.qf)(e.parent_id)?(r=null,i=1):r=e.parent_id;const a={project_id:s,project:s,name:e.name,description:e.description||"",level:i,order:e.order||0,position:e.order||0,weight:e.weight||1,type:"criteria",parent:r,parent_id:r,is_active:!0},c=await u.A.createCriteria(a);if(!c){n=!1;break}const d={id:null!==(t=null===c||void 0===c?void 0:c.id)&&void 0!==t?t:e.id,level:i,name:(null===c||void 0===c?void 0:c.name)||e.name};l.set(e.id,d)}if(!n)throw new Error("\uc77c\ubd80 \uae30\uc900 \uc800\uc7a5 \uc2e4\ud328");await W(),L("success","\uae30\uc900\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(r){L("error","\uae30\uc900 \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(r))}finally{$(!1)}}else L("error","\uc800\uc7a5\ud560 \uae30\uc900\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")},X=(e,s)=>{const t=n=>{const l=[...n],i=l.findIndex(s=>s.id===e);if(-1===i)return l.map(e=>(0,r.A)((0,r.A)({},e),{},{children:e.children?t(e.children):void 0}));const a="up"===s?i-1:i+1;return a>=0&&a<l.length&&([l[i],l[a]]=[l[a],l[i]],l.forEach((e,s)=>{e.order=s})),l},n=t(N?f:m);N?y(n):(v(n),y(n),w(!0))},Y=e=>e.map(e=>({id:e.id,name:e.name,description:e.description,level:e.level,parent_id:e.parent_id||null,children:e.children?Y(e.children):[],isExpanded:!0})),Z=e=>G(e);return(0,o.jsxs)("div",{className:"space-y-6",children:[k&&(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm font-medium shadow-lg ".concat("success"===k.type?"bg-green-100 text-green-800":"info"===k.type?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:k.text}),(0,o.jsx)(l.A,{title:"\ud3c9\uac00 \uae30\uc900 \uc124\uc815",children:(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,o.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\ud83d\udcca \ud3c9\uac00 \uae30\uc900 \uc124\uc815"}),(0,o.jsx)("p",{className:"text-sm text-blue-700",children:"\ud3c9\uac00 \ubaa9\ud45c\ub97c \ub2ec\uc131\ud558\uae30 \uc704\ud55c \uacc4\uce35\uad6c\uc870\uc758 \uae30\uc900\uc744 \uc124\uc815\ud569\ub2c8\ub2e4. \ud15c\ud50c\ub9bf\uc744 \uc0ac\uc6a9\ud558\uac70\ub098 \uc9c1\uc811 \uc785\ub825\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),N&&(0,o.jsx)("div",{className:"mt-2 p-2 bg-yellow-100 border border-yellow-300 rounded",children:(0,o.jsx)("p",{className:"text-sm text-yellow-800",children:"\u26a0\ufe0f \uc800\uc7a5\ub418\uc9c0 \uc54a\uc740 \ubcc0\uacbd\uc0ac\ud56d\uc774 \uc788\uc2b5\ub2c8\ub2e4. '\uc800\uc7a5\ud558\uae30' \ubc84\ud2bc\uc744 \ub20c\ub7ec \uc800\uc7a5\ud558\uc138\uc694."})})]}),(0,o.jsxs)("div",{className:"border-b pb-4",children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"\uc785\ub825 \ubc29\ubc95 \uc120\ud0dd"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,o.jsx)("div",{className:"relative",children:(0,o.jsxs)(i.A,{variant:"template"===R?"primary":"outline",onClick:()=>{O("template"),D(!0),M(!1)},className:"flex items-center justify-center w-full",title:"\ubbf8\ub9ac \uc815\uc758\ub41c \ud15c\ud50c\ub9bf\uc744 \uc0ac\uc6a9\ud558\uc5ec \ube60\ub974\uac8c \uacc4\uce35\uad6c\uc870\ub97c \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",children:[(0,o.jsx)("span",{className:"mr-2",children:"\ud83d\udccb"}),"\uae30\ubcf8 \ud15c\ud50c\ub9bf \uc0ac\uc6a9"]})}),(0,o.jsx)("div",{className:"relative",children:(0,o.jsxs)(i.A,{variant:"bulk"===R?"primary":"outline",onClick:()=>{O("bulk"),M(!0),D(!1)},className:"flex items-center justify-center w-full",title:"\ud14d\uc2a4\ud2b8\ub85c \uc791\uc131\ub41c \uacc4\uce35\uad6c\uc870\ub97c \ud55c \ubc88\uc5d0 \uc785\ub825\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub9c8\ud06c\ub2e4\uc6b4, \ubc88\ud638, \ub4e4\uc5ec\uc4f0\uae30 \ud615\uc2dd\uc744 \uc9c0\uc6d0\ud569\ub2c8\ub2e4.",children:[(0,o.jsx)("span",{className:"mr-2",children:"\ud83d\udcdd"}),"\ud14d\uc2a4\ud2b8 \uc77c\uad04 \uc785\ub825"]})}),(0,o.jsx)("div",{className:"relative",children:(0,o.jsxs)(i.A,{variant:"visual"===R?"primary":"outline",onClick:()=>{O("visual"===R?null:"visual"),D(!1),M(!1)},className:"flex items-center justify-center w-full",title:"\ub4dc\ub798\uadf8 \uc564 \ub4dc\ub86d\uc73c\ub85c \uacc4\uce35\uad6c\uc870\ub97c \uc2dc\uac01\uc801\uc73c\ub85c \uc124\uacc4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",children:[(0,o.jsx)("span",{className:"mr-2",children:"\ud83c\udfa8"}),"\uc2dc\uac01\uc801 \ube4c\ub354"]})})]})]}),(0,o.jsx)("div",{className:"min-h-[300px]",children:"visual"===R?(0,o.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,o.jsx)(p,{initialCriteria:Y(m),onSave:e=>{const s=(e=>{const s=[],t=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e.forEach((e,l)=>{const i={id:e.id||(0,g.lk)(),name:e.name,description:e.description,parent_id:r,level:n,order:l+1,weight:1,type:"criteria",children:[]};e.children&&e.children.length>0&&(i.children=t(e.children,i.id,n+1)),s.push(i)}),s};return t(e)})(e);y(s),v(s),w(!0),L("success","".concat(s.length,"\uac1c\uc758 \uae30\uc900\uc774 \uc2dc\uac01\uc801 \ube4c\ub354\uc5d0\uc11c \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4. '\uc800\uc7a5\ud558\uae30' \ubc84\ud2bc\uc744 \ub20c\ub7ec \ucd5c\uc885 \uc800\uc7a5\ud558\uc138\uc694."))},onClose:()=>O(null)})}):m.length>0?(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900",children:"\ud604\uc7ac \uacc4\uce35\uad6c\uc870"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>q(!H),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(H?"bg-green-100 text-green-700 border border-green-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:H?"\u2705 \ud3b8\uc9d1 \ubaa8\ub4dc":"\u270f\ufe0f \ud3b8\uc9d1\ud558\uae30"}),!H&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>U("vertical"),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat("vertical"===Q?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\ud83d\udccb \uc138\ub85c\ud615"}),(0,o.jsx)("button",{onClick:()=>U("horizontal"),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat("horizontal"===Q?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\ud83d\udcca \uac00\ub85c\ud615"})]})]})]}),H?(0,o.jsx)("div",{className:"space-y-4",children:(e=>{const s=Z(e);return(0,o.jsx)("div",{className:"space-y-3",children:s.map(e=>{var s,t;const n=K[e.id],l=24*(e.level-1);return(0,o.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",style:{marginLeft:"".concat(l,"px")},children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("div",{className:"flex-1 mr-4",children:n?(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("input",{type:"text",value:(null===(s=K[e.id])||void 0===s?void 0:s.name)||"",onChange:s=>{V((0,r.A)((0,r.A)({},K),{},{[e.id]:(0,r.A)((0,r.A)({},K[e.id]),{},{name:s.target.value})}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-medium",placeholder:A(e.name)?e.name:1===e.level?"\uc608\uc2dc: \uae30\uc220\uc801 \uc5ed\ub7c9":2===e.level?"\uc608\uc2dc: \ud504\ub85c\uadf8\ub798\ubc0d \ub2a5\ub825":"\uc608\uc2dc: \uc54c\uace0\ub9ac\uc998 \uc774\ud574\ub3c4"}),(0,o.jsx)("input",{type:"text",value:(null===(t=K[e.id])||void 0===t?void 0:t.description)||"",onChange:s=>{V((0,r.A)((0,r.A)({},K),{},{[e.id]:(0,r.A)((0,r.A)({},K[e.id]),{},{description:s.target.value})}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:C(e.description)?e.description:1===e.level?"\uc608\uc2dc: \uc9c1\ubb34 \uc218\ud589\uc5d0 \ud544\uc694\ud55c \uc804\ubb38 \uae30\uc220 \uc218\uc900":2===e.level?"\uc608\uc2dc: \ucf54\ub529 \ubc0f \uac1c\ubc1c \uc5ed\ub7c9":"\uc608\uc2dc: \ubb38\uc81c\ud574\uacb0\uc744 \uc704\ud55c \uc54c\uace0\ub9ac\uc998 \uc124\uacc4 \ub2a5\ub825"})]}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"text-lg",children:1===e.level?"\ud83c\udfaf":2===e.level?"\ud83d\udccb":3===e.level?"\ud83c\udfaa":4===e.level?"\ud83d\udcdd":"\ud83d\udd39"}),(0,o.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,o.jsxs)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:["L",e.level]})]}),e.description&&(0,o.jsx)("div",{className:"text-sm text-gray-600 mt-1 ml-7",children:e.description})]})}),(0,o.jsx)("div",{className:"flex items-center space-x-1",children:n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>(async e=>{if(!K[e])return;const s=t=>t.map(t=>t.id===e?(0,r.A)((0,r.A)({},t),{},{name:K[e].name,description:K[e].description}):t.children?(0,r.A)((0,r.A)({},t),{},{children:s(t.children)}):t),t=s(N?f:m);N?y(t):(v(t),y(t),w(!0));const n=(0,r.A)({},K);delete n[e],V(n);try{await J()}catch(l){L("error","\uc790\ub3d9 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc218\ub3d9\uc73c\ub85c \uc800\uc7a5\ud574\uc8fc\uc138\uc694.")}})(e.id),className:"p-2 text-green-600 hover:bg-green-100 rounded-md transition-colors",title:"\uc800\uc7a5",children:"\u2705"}),(0,o.jsx)("button",{onClick:()=>(e=>{const s=(0,r.A)({},K);delete s[e],V(s)})(e.id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-md transition-colors",title:"\ucde8\uc18c",children:"\u274c"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{return s=e.id,t=e.name,n=e.description||"",void V((0,r.A)((0,r.A)({},K),{},{[s]:{name:A(t)?"":t,description:C(n)?"":n}}));var s,t,n},className:"p-2 text-blue-600 hover:bg-blue-100 rounded-md transition-colors",title:"\ud3b8\uc9d1",children:"\u270f\ufe0f"}),(0,o.jsx)("button",{onClick:()=>X(e.id,"up"),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-md transition-colors",title:"\uc704\ub85c \uc774\ub3d9",children:"\u2b06\ufe0f"}),(0,o.jsx)("button",{onClick:()=>X(e.id,"down"),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-md transition-colors",title:"\uc544\ub798\ub85c \uc774\ub3d9",children:"\u2b07\ufe0f"}),(0,o.jsx)("button",{onClick:()=>{return s=e.id,void E({type:"deleteCriterion",criterionId:s});var s},className:"p-2 text-red-600 hover:bg-red-100 rounded-md transition-colors",title:"\uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})]})})]})},e.id)})})})(N?f:m)}):(0,o.jsx)(c.A,{nodes:Z(m),title:"",showWeights:!1,interactive:!0,layout:Q,onLayoutChange:U})]}):(0,o.jsx)("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:(0,o.jsxs)("div",{className:"text-gray-500",children:[(0,o.jsx)("div",{className:"text-4xl mb-3",children:"\ud83c\udf33"}),(0,o.jsx)("p",{className:"text-lg font-medium",children:"\uacc4\uce35\uad6c\uc870\uac00 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4"}),(0,o.jsx)("p",{className:"text-sm mt-2",children:"\uc704\uc758 \uc785\ub825 \ubc29\ubc95 \uc911 \ud558\ub098\ub97c \uc120\ud0dd\ud558\uc5ec \uae30\uc900\uc744 \ucd94\uac00\ud558\uc138\uc694"})]})})}),m.length>0&&(0,o.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:Z(m).length}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"\uc804\uccb4 \uae30\uc900"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:m.filter(e=>1===e.level).length}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"\uc0c1\uc704 \uae30\uc900"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:Z(m).filter(e=>e.level>1).length}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"\ud558\uc704 \uae30\uc900"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:Math.max(...Z(m).map(e=>e.level),0)}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"\ucd5c\ub300 \uae4a\uc774"})]})]})}),(0,o.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t",children:[(0,o.jsx)(i.A,{variant:"secondary",onClick:()=>{E({type:"reset"})},disabled:T||0===m.length,className:"bg-red-50 text-red-600 hover:bg-red-100 border border-red-200",children:"\ud83d\uddd1\ufe0f \ucd08\uae30\ud654"}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[d&&(0,o.jsx)(i.A,{variant:"outline",onClick:d,disabled:T||0===j.length,children:"\ub2e4\uc74c \ub2e8\uacc4"}),(0,o.jsx)(i.A,{variant:"primary",onClick:J,disabled:T||F||0===m.length,children:F?"\uc800\uc7a5 \uc911...":"\uc800\uc7a5\ud558\uae30"})]})]})]})}),z&&(0,o.jsx)(h,{onSelectTemplate:e=>{const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=[];return e.forEach((e,l)=>{const i=(0,g.lk)(),a={id:i,name:e.name,description:e.description,parent_id:t,level:r,order:l+1,weight:1,type:"criteria",children:[]};e.children&&e.children.length>0&&(a.children=s(e.children,i,r+1)),n.push(a)}),n},t=s(e.structure);y(t),v(t),w(!0),D(!1),O(null),L("success","'".concat(e.name,"' \ud15c\ud50c\ub9bf\uc774 \uc801\uc6a9\ub418\uc5c8\uc2b5\ub2c8\ub2e4. '\uc800\uc7a5\ud558\uae30' \ubc84\ud2bc\uc744 \ub20c\ub7ec \ucd5c\uc885 \uc800\uc7a5\ud558\uc138\uc694."))},onClose:()=>{D(!1),O(null)}}),I&&(0,o.jsx)(x,{onImport:e=>{if(!e||0===e.length)return void L("error","\uac00\uc838\uc62c \ub370\uc774\ud130\uac00 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4.");const s=e.map((e,s)=>(0,r.A)((0,r.A)({},e),{},{id:e.id||(0,g.lk)(),level:e.level||1,order:e.order||s+1,parent_id:e.parent_id||null,type:"criteria"})),t=B(s);if(0===t.length&&s.length>0){const e=s.map(e=>(0,r.A)((0,r.A)({},e),{},{level:1,parent_id:null,children:[]}));return y(e),v(e),w(!0),M(!1),O(null),void L("info","\uacc4\uce35 \uad6c\uc870 \uad6c\uc131\uc5d0 \ubb38\uc81c\uac00 \uc788\uc5b4 \ubaa8\ub4e0 \uae30\uc900\uc744 \ub8e8\ud2b8 \ub808\ubca8\ub85c \ucd94\uac00\ud588\uc2b5\ub2c8\ub2e4. (".concat(s.length,"\uac1c)\n\uc218\ub3d9\uc73c\ub85c \uacc4\uce35 \uad6c\uc870\ub97c \uc870\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."))}y(t),v(t),w(!0),M(!1),O(null);const n=G(t).reduce((e,s)=>(e[s.level]=(e[s.level]||0)+1,e),{}),l=Object.entries(n).map(e=>{let[s,t]=e;return"\ub808\ubca8 ".concat(s,": ").concat(t,"\uac1c")}).join(", ");L("success","".concat(s.length,"\uac1c\uc758 \uae30\uc900\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4. ").concat(l," '\uc800\uc7a5\ud558\uae30' \ubc84\ud2bc\uc744 \ub20c\ub7ec \ucd5c\uc885 \uc800\uc7a5\ud558\uc138\uc694."))},onCancel:()=>{M(!1),O(null)},existingCriteria:m}),(0,o.jsxs)(a.A,{isOpen:null!==S,onClose:()=>E(null),title:"reset"===(null===S||void 0===S?void 0:S.type)?"\uc804\uccb4 \ucd08\uae30\ud654":"\uae30\uc900 \uc0ad\uc81c",size:"sm",footer:(0,o.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,o.jsx)("button",{onClick:()=>E(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"\ucde8\uc18c"}),(0,o.jsx)("button",{onClick:"reset"===(null===S||void 0===S?void 0:S.type)?async()=>{E(null);try{P(!0);const e=await u.A.getCriteria(s);for(const t of e)t.id&&await u.A.deleteCriteria(s,t.id);v([]),b([]),y([]),w(!1),L("success","\ubaa8\ub4e0 \uae30\uc900\uc774 \ucd08\uae30\ud654\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){L("error","\uae30\uc900 \ucd08\uae30\ud654 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{P(!1)}}:()=>{if(null===S||void 0===S||!S.criterionId)return;const e=S.criterionId;E(null);const s=t=>t.filter(s=>s.id!==e).map(e=>(0,r.A)((0,r.A)({},e),{},{children:e.children?s(e.children):void 0})),t=s(N?f:m);N?y(t):(v(t),y(t),w(!0))},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md",children:"reset"===(null===S||void 0===S?void 0:S.type)?"\ucd08\uae30\ud654":"\uc0ad\uc81c"})]}),children:["reset"===(null===S||void 0===S?void 0:S.type)&&(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("p",{className:"text-sm text-gray-700",children:"\ubaa8\ub4e0 \uae30\uc900\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),(0,o.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),"deleteCriterion"===(null===S||void 0===S?void 0:S.type)&&(0,o.jsx)("p",{className:"text-sm text-gray-700",children:"\uc774 \uae30\uc900\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"})]})]})}},9405:(e,s,t)=>{t.d(s,{A:()=>x});var r=t(2555),n=t(5043),l=t(3593),i=t(7907),a=t(795),c=t(3138),d=t(6291),o=t(579);const x=e=>{let{projectId:s,onComplete:t,onAlternativesChange:x}=e;const[m,h]=(0,n.useState)([]),p=e=>({id:e.id||"alt_".concat(Date.now(),"_").concat(Math.random()),name:e.name,description:e.description,order:e.position||0,cost:e.cost,weight:0,rank:0});(0,n.useEffect)(()=>{s&&(async()=>{try{const e=(await c.A.getAlternatives(s)||[]).map(p);h(e),x&&x(e.length)}catch(e){h([]),x&&x(0)}})()},[s,x]),(0,n.useEffect)(()=>{x&&x(m.length)},[m,x]);const[u,g]=(0,n.useState)({name:"",description:""}),[v,j]=(0,n.useState)(null),[b,f]=(0,n.useState)({name:"",description:""}),[y,N]=(0,n.useState)({}),[w,A]=(0,n.useState)(null),C=(e,s)=>{A({type:e,text:s}),setTimeout(()=>A(null),3e3)},k=(e,s)=>{const t={};if(e.trim())if(e.length<2)t.name="\ub300\uc548\uba85\uc740 2\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.";else{m.some(t=>t.name.toLowerCase()===e.toLowerCase()&&t.id!==s)&&(t.name="\ub3d9\uc77c\ud55c \ub300\uc548\uba85\uc774 \uc774\ubbf8 \uc874\uc7ac\ud569\ub2c8\ub2e4.")}else t.name="\ub300\uc548\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.";return N(t),0===Object.keys(t).length},_=async()=>{if(v&&k(b.name,v))try{const e=await d.GI.updateCriteria(v,{name:b.name,description:b.description,project_id:s});if(!e.success)return void N({general:e.error||"\ub300\uc548 \uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."});h(e=>e.map(e=>e.id===v?(0,r.A)((0,r.A)({},e),{},{name:b.name,description:b.description}):e)),j(null),f({name:"",description:""}),N({})}catch(e){N({general:(e instanceof Error?e.message:"")||"\ub300\uc548 \uc218\uc815 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."})}},S=()=>{j(null),f({name:"",description:""}),N({})};return(0,o.jsxs)("div",{className:"space-y-6",children:[w&&(0,o.jsx)("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm font-medium shadow-lg ".concat("success"===w.type?"bg-green-100 text-green-800":"info"===w.type?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:w.text}),(0,o.jsx)(l.A,{title:"\ub300\uc548 \ucd94\uac00",children:(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-400 p-4 rounded-r-lg mb-4",children:(0,o.jsxs)("div",{className:"flex items-start",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("svg",{className:"h-5 w-5 text-green-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-green-800",children:"\ud83c\udfaf \ub17c\ubb38 \uc791\uc131 \uad8c\uc7a5: \uae30\ubcf8 3\uac1c \ub300\uc548"}),(0,o.jsxs)("div",{className:"mt-2 text-sm text-green-700",children:[(0,o.jsxs)("p",{className:"mb-2",children:["\ud559\uc220 \ub17c\ubb38\uc744 \uc704\ud574 ",(0,o.jsx)("strong",{children:"3\uac1c \ub300\uc548"}),"\uc73c\ub85c \uc2dc\uc791\ud558\ub294 \uac83\uc744 \uad8c\uc7a5\ud569\ub2c8\ub2e4. (\ud544\uc694\uc2dc \ucd5c\ub300 5\uac1c\uae4c\uc9c0 \ucd94\uac00 \uac00\ub2a5)"]}),(0,o.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[(0,o.jsx)("li",{children:"\uc30d\ub300\ube44\uad50 \ud69f\uc218: 3\uac1c \ub300\uc548 = 3\ud68c, 4\uac1c \ub300\uc548 = 6\ud68c, 5\uac1c \ub300\uc548 = 10\ud68c"}),(0,o.jsx)("li",{children:"3\uac1c \uae30\uc900 \xd7 3\uac1c \ub300\uc548 = \ucd1d 12\ud68c \uc30d\ub300\ub9cc\uc73c\ub85c \uc644\ub8cc \uac00\ub2a5"}),(0,o.jsx)("li",{children:"\uba85\ud655\ud55c \uc21c\uc704 \uacb0\uc815 \ubc0f \ud574\uc11d\uc774 \uc6a9\uc774\ud569\ub2c8\ub2e4"})]})]})]})]})}),(0,o.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,o.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"\ud83d\udcdd \ud504\ub85c\uc81d\ud2b8 \ub300\uc548 \uc124\uc815 \uac00\uc774\ub4dc"}),(0,o.jsxs)("ul",{className:"text-sm text-green-700 space-y-1",children:[(0,o.jsx)("li",{children:"\u2022 \ud504\ub85c\uc81d\ud2b8 \ubaa9\ud45c\uc5d0 \ub9de\ub294 \ube44\uad50 \ub300\uc548\uc744 \ucd94\uac00\ud558\uc138\uc694"}),(0,o.jsx)("li",{children:"\u2022 \ub300\uc548\uba85\uc740 \uc911\ubcf5\ub420 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,o.jsx)("li",{children:"\u2022 \u2191\u2193 \ubc84\ud2bc\uc73c\ub85c \ud3c9\uac00 \uc21c\uc11c\ub97c \uc870\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),(0,o.jsx)("li",{children:"\u2022 \u270f\ufe0f \ubc84\ud2bc\uc73c\ub85c \ub300\uc548\uc744 \uc218\uc815, \ud83d\uddd1\ufe0f \ubc84\ud2bc\uc73c\ub85c \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),(0,o.jsx)("li",{children:"\u2022 \ub300\uc548\uc774 \uc5c6\ub294 \uacbd\uc6b0 \uae30\uc900 \uac04 \uc911\uc694\ub3c4 \ube44\uad50\ub9cc\uc73c\ub85c \ubd84\uc11d \uac00\ub2a5\ud569\ub2c8\ub2e4"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"\ud83d\udccb \ub4f1\ub85d\ub41c \ub300\uc548 \ubaa9\ub85d"}),0===m.length?(0,o.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\uc544\uc9c1 \ucd94\uac00\ub41c \ub300\uc548\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,o.jsx)("div",{className:"space-y-3",children:m.sort((e,s)=>e.order-s.order).map((e,t)=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50",children:[(0,o.jsxs)("div",{className:"flex items-center flex-1",children:[(0,o.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-800 rounded-full text-sm font-medium mr-4",children:e.order}),v===e.id?(0,o.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,o.jsx)(a.A,{id:"edit-name-".concat(e.id),label:"",placeholder:"\ub300\uc548\uba85\uc744 \uc785\ub825\ud558\uc138\uc694",value:b.name,onChange:e=>f(s=>(0,r.A)((0,r.A)({},s),{},{name:e})),error:y.name}),(0,o.jsx)(a.A,{id:"edit-desc-".concat(e.id),label:"",placeholder:"\ub300\uc548 \uc124\uba85 (\uc120\ud0dd)",value:b.description,onChange:e=>f(s=>(0,r.A)((0,r.A)({},s),{},{description:e}))})]}):(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),e.description&&(0,o.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[e.rank&&(0,o.jsx)("div",{className:"text-xs font-semibold",children:(0,o.jsxs)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:["#",e.rank,"\uc704"]})}),e.weight&&(0,o.jsxs)("div",{className:"text-xs font-mono bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[(100*e.weight).toFixed(3),"%"]})]})]})})]}),(0,o.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:v===e.id?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:_,className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"\uc800\uc7a5"}),(0,o.jsx)("button",{onClick:S,className:"text-gray-600 hover:text-gray-800 text-sm",children:"\ucde8\uc18c"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>(e=>{const s=m.findIndex(s=>s.id===e);if(s>0){const e=[...m];[e[s],e[s-1]]=[e[s-1],e[s]],e.forEach((e,s)=>{e.order=s+1}),h(e)}})(e.id),disabled:0===t,className:"text-sm ".concat(0===t?"text-gray-300":"text-blue-600 hover:text-blue-800"),title:"\uc704\ub85c \uc774\ub3d9",children:"\u2191"}),(0,o.jsx)("button",{onClick:()=>(e=>{const s=m.findIndex(s=>s.id===e);if(s<m.length-1){const e=[...m];[e[s],e[s+1]]=[e[s+1],e[s]],e.forEach((e,s)=>{e.order=s+1}),h(e)}})(e.id),disabled:t===m.length-1,className:"text-sm ".concat(t===m.length-1?"text-gray-300":"text-blue-600 hover:text-blue-800"),title:"\uc544\ub798\ub85c \uc774\ub3d9",children:"\u2193"}),(0,o.jsx)("button",{onClick:()=>(e=>{const s=m.find(s=>s.id===e);s&&(j(e),f({name:s.name,description:s.description||""}))})(e.id),className:"text-blue-600 hover:text-blue-800 text-sm",title:"\ud3b8\uc9d1",children:"\u270f\ufe0f"}),(0,o.jsx)("button",{onClick:()=>(async e=>{try{if(!await c.A.deleteAlternative(e,s))return;const t=(await c.A.getAlternatives(s)||[]).map(p);h(t),x&&x(t.length)}catch(t){C("error","\ub300\uc548 \uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}})(e.id),className:"text-red-500 hover:text-red-700 text-sm",title:"\uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})]})})]},e.id))})]}),(0,o.jsxs)("div",{className:"border-t pt-6",children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"\u2795 \uc0c8 \ub300\uc548 \ucd94\uac00"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,o.jsx)(a.A,{id:"alternativeName",label:"\ub300\uc548\uba85",placeholder:"\ub300\uc548\uba85\uc744 \uc785\ub825\ud558\uc138\uc694",value:u.name,onChange:e=>g(s=>(0,r.A)((0,r.A)({},s),{},{name:e})),error:y.name,required:!0}),(0,o.jsx)(a.A,{id:"alternativeDescription",label:"\ub300\uc548 \uc124\uba85 (\uc120\ud0dd)",placeholder:"\ub300\uc548\uc5d0 \ub300\ud55c \uc124\uba85",value:u.description,onChange:e=>g(s=>(0,r.A)((0,r.A)({},s),{},{description:e}))})]}),(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)(i.A,{onClick:async()=>{if(!k(u.name))return;const e=Math.max(...m.map(e=>e.order),0);try{const r=(t={name:u.name,description:u.description||"",order:e+1},{project_id:s,name:t.name||"",description:t.description||"",position:t.order||0,cost:t.cost});if(!await c.A.createAlternative(r))return void N({name:"\ub300\uc548 \ucd94\uac00\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."});const n=(await c.A.getAlternatives(s)||[]).map(p);h(n),g({name:"",description:""}),N({}),x&&x(n.length)}catch(r){N({name:"\ub300\uc548 \ucd94\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uad8c\ud55c\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694."})}var t},variant:"primary",children:"\ub300\uc548 \ucd94\uac00"})})]}),(0,o.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"font-medium text-gray-900",children:"\ub300\uc548 \uc694\uc57d"}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["\ucd1d ",m.length,"\uac1c \ub300\uc548 \ub4f1\ub85d\ub428",3===m.length&&(0,o.jsx)("span",{className:"ml-2 text-green-600 font-semibold",children:"\u2705 \ub17c\ubb38 \uad8c\uc7a5 \uad6c\uc870"}),m.length>0&&m.length<3&&(0,o.jsx)("span",{className:"ml-2 text-yellow-600",children:"\u26a0\ufe0f 3\uac1c \uad8c\uc7a5"}),m.length>5&&(0,o.jsx)("span",{className:"ml-2 text-orange-600",children:"\u26a0\ufe0f \ud3c9\uac00 \ud69f\uc218 \uc99d\uac00"})]})]}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:m.length>0&&(0,o.jsxs)("span",{children:["\ud3c9\uac00 \uc21c\uc11c: ",m.map(e=>e.name).join(" \u2192 ")]})})]})}),(0,o.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t",children:[(0,o.jsx)("div",{className:"text-sm text-gray-600",children:0===m.length&&(0,o.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"text-blue-600",children:"\ud83d\udca1"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-blue-900",children:"\ub300\uc548 \uc5c6\uc774 \uc9c4\ud589\ud558\uae30"}),(0,o.jsx)("div",{className:"text-sm text-blue-700",children:"\uae30\uc900 \uac04 \uc911\uc694\ub3c4 \ube44\uad50\ub9cc\uc73c\ub85c\ub3c4 AHP \ubd84\uc11d\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]})]})})}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsx)(i.A,{variant:"secondary",onClick:async()=>{C("success","\ub300\uc548 \ubaa9\ub85d\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")},children:"\uc800\uc7a5"}),(0,o.jsx)(i.A,{variant:"primary",onClick:t,children:"\ub2e4\uc74c \ub2e8\uacc4\ub85c"})]})]})]})})]})}}}]);
//# sourceMappingURL=319.23a58eb6.chunk.js.map
"use strict";(self.webpackChunkahp_research_platform=self.webpackChunkahp_research_platform||[]).push([[918],{4918(e,t,s){s.r(t),s.d(t,{default:()=>u});var a=s(5043),n=s(3593),r=s(7907),o=s(9722),c=s(1801);const l=new class{constructor(){this.results=[]}async checkFrontend(){const e=Date.now();try{const t={version:{NODE_ENV:"production",PUBLIC_URL:"/ahp_app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VERSION||"1.0.0",buildTime:{NODE_ENV:"production",PUBLIC_URL:"/ahp_app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BUILD_TIME||(new Date).toISOString(),environment:"production"};return{component:"Frontend (React)",status:"healthy",responseTime:Date.now()-e,message:"React application is running",details:t}}catch(t){return{component:"Frontend (React)",status:"error",message:"Frontend check failed: ".concat(t)}}}async checkBackendServer(){const e=Date.now();try{const t=await o.A.get("".concat(c.API_BASE_URL,"/health/"),{timeout:5e3,validateStatus:()=>!0});return 200===t.status?{component:"Backend Server (Django)",status:"healthy",responseTime:Date.now()-e,message:"Django server is responding",details:t.data}:{component:"Backend Server (Django)",status:"degraded",responseTime:Date.now()-e,message:"Server returned status ".concat(t.status),details:t.data}}catch(t){const e=t instanceof Error?t.message:String(t);return{component:"Backend Server (Django)",status:"error",message:"Cannot connect to backend: ".concat(e),details:{url:c.API_BASE_URL,error:e}}}}async checkDatabase(){const e=Date.now();try{const t=await o.A.get("".concat(c.API_BASE_URL,"/db-status/"),{timeout:5e3,validateStatus:()=>!0});return 200===t.status&&t.data?{component:"Database (PostgreSQL)",status:"healthy",responseTime:Date.now()-e,message:"Database connection is active",details:t.data}:{component:"Database (PostgreSQL)",status:"degraded",responseTime:Date.now()-e,message:"Database status check returned unexpected response",details:t.data}}catch(t){try{if(200===(await o.A.get("".concat(c.API_BASE_URL,"/api/service/status/"),{timeout:5e3})).status)return{component:"Database (PostgreSQL)",status:"degraded",message:"Database likely connected (indirect check)",responseTime:Date.now()-e,details:{indirect:!0}}}catch(s){}const a=t instanceof Error?t.message:String(t);return{component:"Database (PostgreSQL)",status:"error",message:"Database check failed: ".concat(a)}}}async checkAPIEndpoints(){const e=Date.now(),t=["/api/service/projects/projects/","/api/service/status/","/api/service/auth/token/verify/"],s=[];let a=0;for(const r of t)try{const e=Date.now(),t=await o.A.get("".concat(c.API_BASE_URL).concat(r),{timeout:3e3,validateStatus:()=>!0,headers:{"Content-Type":"application/json"}}),n=Date.now()-e,l=t.status<500;l&&a++,s.push({endpoint:r,status:t.status,responseTime:n,healthy:l})}catch(n){const e=n instanceof Error?n.message:String(n);s.push({endpoint:r,status:0,error:e,healthy:!1})}return{component:"API Endpoints",status:a===t.length?"healthy":a>0?"degraded":"error",responseTime:Date.now()-e,message:"".concat(a,"/").concat(t.length," endpoints responding"),details:s}}async checkCORS(){const e=Date.now();try{const t=(await o.A.options("".concat(c.API_BASE_URL,"/api/service/status/"),{timeout:5e3,validateStatus:()=>!0})).headers,s={"access-control-allow-origin":t["access-control-allow-origin"],"access-control-allow-methods":t["access-control-allow-methods"],"access-control-allow-headers":t["access-control-allow-headers"]},a=void 0!==s["access-control-allow-origin"];return{component:"CORS Configuration",status:a?"healthy":"error",responseTime:Date.now()-e,message:a?"CORS properly configured":"CORS not configured",details:s}}catch(t){const e=t instanceof Error?t.message:String(t);return{component:"CORS Configuration",status:"error",message:"CORS check failed: ".concat(e)}}}async checkAuthentication(){const e=Date.now();try{const t=await o.A.post("".concat(c.API_BASE_URL,"/api/auth/token/verify/"),{token:"test-token"},{timeout:5e3,validateStatus:()=>!0}),s=t.status<500;return{component:"Authentication System",status:s?"healthy":"error",responseTime:Date.now()-e,message:s?"Auth system is operational":"Auth system error",details:{endpoint:"/api/auth/token/verify/",status:t.status}}}catch(t){const e=t instanceof Error?t.message:String(t);return{component:"Authentication System",status:"error",message:"Auth check failed: ".concat(e)}}}async runFullHealthCheck(){console.log("\ud83d\udd0d Starting system health check..."),this.results=[];const e=[this.checkFrontend(),this.checkBackendServer(),this.checkDatabase(),this.checkAPIEndpoints(),this.checkCORS(),this.checkAuthentication()],t=await Promise.all(e);this.results=t;const s={total:t.length,healthy:t.filter(e=>"healthy"===e.status).length,degraded:t.filter(e=>"degraded"===e.status).length,error:t.filter(e=>"error"===e.status).length};let a;a=s.error>0?"error":s.degraded>0?"degraded":"healthy";const n={timestamp:(new Date).toISOString(),overallStatus:a,results:t,summary:s};return this.printReport(n),n}printReport(e){console.log("\n"+"=".repeat(60)),console.log("\ud83c\udfe5 SYSTEM HEALTH CHECK REPORT"),console.log("=".repeat(60)),console.log("\ud83d\udcc5 Timestamp: ".concat(e.timestamp)),console.log("\ud83d\udcca Overall Status: ".concat(this.getStatusEmoji(e.overallStatus)," ").concat(e.overallStatus.toUpperCase())),console.log("\n\ud83d\udcc8 Summary:"),console.log("  Total Checks: ".concat(e.summary.total)),console.log("  \u2705 Healthy: ".concat(e.summary.healthy)),console.log("  \u26a0\ufe0f  Degraded: ".concat(e.summary.degraded)),console.log("  \u274c Error: ".concat(e.summary.error)),console.log("\n\ud83d\udccb Detailed Results:"),console.log("-".repeat(60)),e.results.forEach(e=>{console.log("\n".concat(this.getStatusEmoji(e.status)," ").concat(e.component)),console.log("  Status: ".concat(e.status)),e.responseTime&&console.log("  Response Time: ".concat(e.responseTime,"ms")),e.message&&console.log("  Message: ".concat(e.message)),e.details&&console.log("  Details:",e.details)}),console.log("\n"+"=".repeat(60))}getStatusEmoji(e){switch(e){case"healthy":return"\u2705";case"degraded":return"\u26a0\ufe0f";case"error":return"\u274c";default:return"\u2753"}}},i=l;var d=s(579);const u=()=>{const[e,t]=(0,a.useState)(!1),[s,o]=(0,a.useState)(null),[c,l]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{h()},[]),(0,a.useEffect)(()=>{if(c&&!e){const e=setInterval(()=>{h()},3e4);return()=>clearInterval(e)}},[c,e]);const h=async()=>{t(!0);try{const e=await i.runFullHealthCheck();o(e)}catch(e){m({type:"error",text:"\uc2dc\uc2a4\ud15c \uc810\uac80\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."}),setTimeout(()=>m(null),3e3)}finally{t(!1)}},g=e=>{switch(e){case"healthy":return"green";case"degraded":return"yellow";case"error":return"red";default:return"gray"}},p=e=>{switch(e){case"healthy":return"\u2705";case"degraded":return"\u26a0\ufe0f";case"error":return"\u274c";default:return"\u2753"}};return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[u&&(0,d.jsx)("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm font-medium shadow-lg ".concat("success"===u.type?"bg-green-100 text-green-800":"info"===u.type?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:u.text}),(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\ud83c\udfe5 \uc2dc\uc2a4\ud15c \uc0c1\ud0dc \uc810\uac80"}),(0,d.jsx)("p",{className:"text-gray-600",children:"\ud504\ub860\ud2b8\uc5d4\ub4dc, \ubc31\uc5d4\ub4dc, \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\ub3d9 \uc0c1\ud0dc\ub97c \uc810\uac80\ud569\ub2c8\ub2e4."})]}),(0,d.jsx)(n.A,{title:"\uc81c\uc5b4\ud310",className:"mb-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsx)(r.A,{variant:"primary",onClick:h,disabled:e,children:e?"\uc810\uac80 \uc911...":"\uc2dc\uc2a4\ud15c \uc810\uac80 \uc2e4\ud589"}),(0,d.jsxs)("label",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",checked:c,onChange:e=>l(e.target.checked),className:"mr-2"}),"30\ucd08\ub9c8\ub2e4 \uc790\ub3d9 \uc810\uac80"]})]}),s&&(0,d.jsxs)("div",{className:"text-sm text-gray-600",children:["\ub9c8\uc9c0\ub9c9 \uc810\uac80: ",new Date(s.timestamp).toLocaleString("ko-KR")]})]})}),s&&(0,d.jsx)(n.A,{title:"\uc804\uccb4 \uc0c1\ud0dc",className:"mb-6",children:(0,d.jsxs)("div",{className:"text-center p-8 rounded-lg bg-".concat(g(s.overallStatus),"-50 border-2 border-").concat(g(s.overallStatus),"-200"),children:[(0,d.jsx)("div",{className:"text-5xl mb-4",children:p(s.overallStatus)}),(0,d.jsx)("div",{className:"text-2xl font-bold text-".concat(g(s.overallStatus),"-700"),children:s.overallStatus.toUpperCase()}),(0,d.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.summary.healthy}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"\uc815\uc0c1"})]}),(0,d.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:s.summary.degraded}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"\ubd80\ubd84 \uc7a5\uc560"})]}),(0,d.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-red-600",children:s.summary.error}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"\uc624\ub958"})]})]})]})}),s&&(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.results.map((e,t)=>(0,d.jsx)(n.A,{title:e.component,children:(0,d.jsx)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-2xl",children:p(e.status)}),(0,d.jsx)("span",{className:"font-bold text-".concat(g(e.status),"-600"),children:e.status.toUpperCase()})]}),e.responseTime&&(0,d.jsxs)("span",{className:"text-sm text-gray-600",children:[e.responseTime,"ms"]})]},"status"),e.message?(0,d.jsx)("div",{className:"text-sm text-gray-700 bg-gray-50 p-2 rounded",children:e.message},"message"):null,e.details?(0,d.jsxs)("details",{className:"text-xs",children:[(0,d.jsx)("summary",{className:"cursor-pointer text-blue-600 hover:text-blue-800",children:"\uc0c1\uc138 \uc815\ubcf4 \ubcf4\uae30"}),(0,d.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded overflow-auto max-h-40",children:JSON.stringify(e.details,null,2)})]},"details"):null]})},t))}),e&&(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd04"}),(0,d.jsx)("div",{className:"text-lg text-gray-600",children:"\uc2dc\uc2a4\ud15c \uc810\uac80 \uc911..."})]})]})]})}}}]);
//# sourceMappingURL=918.d141f6c5.chunk.js.map
"use strict";(self.webpackChunkahp_research_platform=self.webpackChunkahp_research_platform||[]).push([[94],{2094:(e,i,r)=>{r.r(i),r.d(i,{default:()=>N});var t=r(9950),c=r(1095),d=r(294),s=r(3245),a=r(158),n=r(4813),o=r(6335),l=r(5706),x=r(2671),m=r(4203),h=r(2528),j=r(1188),p=r(2932),u=r(3822);const v=[{id:"criteria-1",name:"\uac1c\ubc1c \uc0dd\uc0b0\uc131 \ud6a8\uc728\ud654",description:"\uac1c\ubc1c \uc18d\ub3c4 \ubc0f \uc0dd\uc0b0\uc131 \ud5a5\uc0c1\uc5d0 \uae30\uc5ec\ud558\ub294 \uc694\uc18c\ub4e4",project_id:"demo-project-1",parent_id:null,level:1,order_index:1,weight:.40386},{id:"criteria-2",name:"\ucf54\ub529 \uc2e4\ubb34 \ud488\uc9c8 \uc801\ud569\ud654",description:"\ucf54\ub4dc \ud488\uc9c8 \ubc0f \uc2e4\ubb34 \uc801\ud569\uc131 \uad00\ub828 \uc694\uc18c\ub4e4",project_id:"demo-project-1",parent_id:null,level:1,order_index:2,weight:.30101},{id:"criteria-3",name:"\uac1c\ubc1c \ud504\ub85c\uc138\uc2a4 \uc790\ub3d9\ud654",description:"\uac1c\ubc1c \ud504\ub85c\uc138\uc2a4\uc758 \uc790\ub3d9\ud654 \ubc0f \ud6a8\uc728\uc131 \uad00\ub828 \uc694\uc18c\ub4e4",project_id:"demo-project-1",parent_id:null,level:1,order_index:3,weight:.29513}],g=[{id:"alt-1",name:"\ucf54\ub529 \uc791\uc131 \uc18d\ub3c4 \ud5a5\uc0c1",description:"\ucf54\ub4dc \uc791\uc131 \uc18d\ub3c4 \uac1c\uc120\uc744 \uc704\ud55c AI \ub3c4\uad6c \ud65c\uc6a9",project_id:"demo-project-1",order_index:1,weight:.16959,rank:1},{id:"alt-2",name:"\ucf54\ub4dc \ud488\uc9c8 \uac1c\uc120 \ubc0f \ucd5c\uc801\ud654",description:"\ucf54\ub4dc\uc758 \ud488\uc9c8 \ud5a5\uc0c1 \ubc0f \uc131\ub2a5 \ucd5c\uc801\ud654",project_id:"demo-project-1",order_index:2,weight:.15672,rank:2},{id:"alt-3",name:"\ubc18\ubcf5 \uc791\uc5c5 \ucd5c\uc18c\ud654",description:"\ubc18\ubcf5\uc801\uc778 \ucf54\ub529 \uc791\uc5c5 \uc790\ub3d9\ud654",project_id:"demo-project-1",order_index:3,weight:.13382,rank:3},{id:"alt-4",name:"\ud615\uc0c1\uad00\ub9ac \ubc0f \ubc30\ud3ec \uc9c0\uc6d0",description:"\ud615\uc0c1\uad00\ub9ac \ubc0f \uc790\ub3d9 \ubc30\ud3ec \ud504\ub85c\uc138\uc2a4 \uc9c0\uc6d0",project_id:"demo-project-1",order_index:4,weight:.11591,rank:4},{id:"alt-5",name:"\ub514\ubc84\uae45 \uc2dc\uac04 \ub2e8\ucd95",description:"\ubc84\uadf8 \ubc1c\uacac \ubc0f \uc218\uc815 \uc2dc\uac04 \ub2e8\ucd95",project_id:"demo-project-1",order_index:5,weight:.10044,rank:5},{id:"alt-6",name:"\uae30\uc220 \ubb38\uc11c/\uc8fc\uc11d \uc790\ub3d9\ud654",description:"\uae30\uc220 \ubb38\uc11c \ubc0f \ucf54\ub4dc \uc8fc\uc11d \uc790\ub3d9 \uc0dd\uc131",project_id:"demo-project-1",order_index:6,weight:.0927,rank:6},{id:"alt-7",name:"\ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4 \uc790\ub3d9 \uc0dd\uc131",description:"\uc790\ub3d9\ud654\ub41c \ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4 \uc0dd\uc131",project_id:"demo-project-1",order_index:7,weight:.08653,rank:7},{id:"alt-8",name:"\uc2e0\uaddc \uae30\uc220/\uc5b8\uc5b4 \ud559\uc2b5\uc9c0\uc6d0",description:"\uc0c8\ub85c\uc6b4 \uae30\uc220 \ubc0f \ud504\ub85c\uadf8\ub798\ubc0d \uc5b8\uc5b4 \ud559\uc2b5 \uc9c0\uc6d0",project_id:"demo-project-1",order_index:8,weight:.07723,rank:8},{id:"alt-9",name:"AI\uc0dd\uc131 \ucf54\ub529\uc758 \uc2e0\ub8b0\uc131",description:"AI\uac00 \uc0dd\uc131\ud55c \ucf54\ub4dc\uc758 \uc2e0\ub8b0\uc131 \ubc0f \uc548\uc804\uc131",project_id:"demo-project-1",order_index:9,weight:.06706,rank:9}],_=[{criterion1_id:"criteria-1",criterion2_id:"criteria-2",value:1.403,project_id:"demo-project-1",criterion_id:"root"},{criterion1_id:"criteria-2",criterion2_id:"criteria-3",value:1.0665,project_id:"demo-project-1",criterion_id:"root"},{criterion1_id:"criteria-1",criterion2_id:"criteria-3",value:1.3086,project_id:"demo-project-1",criterion_id:"root"},{criterion1_id:"sub-criteria-1-1",criterion2_id:"sub-criteria-1-2",value:1.6944,project_id:"demo-project-1",criterion_id:"criteria-1"},{criterion1_id:"sub-criteria-1-2",criterion2_id:"sub-criteria-1-3",value:.753182195,project_id:"demo-project-1",criterion_id:"criteria-1"},{criterion1_id:"sub-criteria-1-1",criterion2_id:"sub-criteria-1-3",value:1.2629,project_id:"demo-project-1",criterion_id:"criteria-1"},{criterion1_id:"sub-criteria-2-1",criterion2_id:"sub-criteria-2-2",value:2.3097,project_id:"demo-project-1",criterion_id:"criteria-2"},{criterion1_id:"sub-criteria-2-2",criterion2_id:"sub-criteria-2-3",value:.858148116,project_id:"demo-project-1",criterion_id:"criteria-2"},{criterion1_id:"sub-criteria-2-1",criterion2_id:"sub-criteria-2-3",value:2.0531,project_id:"demo-project-1",criterion_id:"criteria-2"},{criterion1_id:"sub-criteria-3-1",criterion2_id:"sub-criteria-3-2",value:.91954023,project_id:"demo-project-1",criterion_id:"criteria-3"},{criterion1_id:"sub-criteria-3-2",criterion2_id:"sub-criteria-3-3",value:.787773751,project_id:"demo-project-1",criterion_id:"criteria-3"},{criterion1_id:"sub-criteria-3-1",criterion2_id:"sub-criteria-3-3",value:.757862827,project_id:"demo-project-1",criterion_id:"criteria-3"}];var b=r(4414);const f=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#F97316","#EC4899"],N=e=>{let{projectId:i,projectTitle:r,demoMode:N=!1}=e;const[y,w]=(0,t.useState)(!0),[k,A]=(0,t.useState)([]),[F,C]=(0,t.useState)([]),[E,S]=(0,t.useState)([]),[R,I]=(0,t.useState)({}),[B,K]=(0,t.useState)({}),[W,D]=(0,t.useState)(null),[O,P]=(0,t.useState)(""),T=(0,t.useCallback)(async()=>{try{var e,r,t,c,d,s;if(w(!0),P(""),N)return A(v),C(g),void S(_);const a=await p.Ay.get("/api/service/projects/criteria/?project=".concat(i));if(!a.success)throw new Error("\uae30\uc900 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const n=(null===(e=a.data)||void 0===e?void 0:e.criteria)||(null===(r=a.data)||void 0===r?void 0:r.results)||a.data||[],o=await p.Ay.get("/api/service/projects/alternatives/?project=".concat(i));if(!o.success)throw new Error("\ub300\uc548 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const l=(null===(t=o.data)||void 0===t?void 0:t.alternatives)||(null===(c=o.data)||void 0===c?void 0:c.results)||o.data||[],x=await p.Ay.get("/api/service/evaluations/comparisons/?project=".concat(i));if(!x.success)throw new Error("\ube44\uad50 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const m=(null===(d=x.data)||void 0===d?void 0:d.comparisons)||(null===(s=x.data)||void 0===s?void 0:s.results)||x.data||[];A(n),C(l),S(m)}catch(O){P((O instanceof Error?O.message:"")||"Failed to fetch data")}finally{w(!1)}},[i,N]),$=(0,t.useCallback)(()=>{try{if(0===k.length||0===F.length)return;const e={},i={},r=k.filter(e=>1===e.level);if(r.length>0){const i=E.filter(e=>e.criterion1_id&&e.criterion2_id);if(i.length>0){const t=(0,u.v0)(r,i.map(e=>({element1_id:e.criterion1_id,element2_id:e.criterion2_id,value:e.value}))),c=(0,u.m$)(t);e.main=c}}const t={},c={};if(r.forEach((d,s)=>{const a=e.main;t[d.id]=(null===a||void 0===a?void 0:a.priorities[s])||1/r.length;const n=E.filter(e=>e.alternative1_id&&e.alternative2_id&&!0);if(n.length>0&&F.length>0){const e=(0,u.v0)(F,n.map(e=>({element1_id:e.alternative1_id,element2_id:e.alternative2_id,value:e.value}))),r=(0,u.m$)(e);i[d.id]=r,c[d.id]={},F.forEach((e,i)=>{c[d.id][e.id]=r.priorities[i]||0})}}),Object.keys(t).length>0&&Object.keys(c).length>0){const e={criteriaWeights:t,alternativeScores:c,alternatives:F},i=(0,u.h4)(e);D(i)}I(e),K(i)}catch(O){P("\uacc4\uc0b0 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},[k,F,E]);if((0,t.useEffect)(()=>{T()},[T]),(0,t.useEffect)(()=>{!y&&k.length>0&&F.length>0&&$()},[y,k,F,E,$]),y)return(0,b.jsx)(j.A,{title:"\uacb0\uacfc \ub300\uc2dc\ubcf4\ub4dc",children:(0,b.jsx)("div",{className:"text-center py-8",children:"\uacc4\uc0b0 \uc911..."})});if(O)return(0,b.jsx)(j.A,{title:"\uacb0\uacfc \ub300\uc2dc\ubcf4\ub4dc",children:(0,b.jsx)("div",{className:"text-center py-8 text-red-600",children:O})});if(!W)return(0,b.jsx)(j.A,{title:"\uacb0\uacfc \ub300\uc2dc\ubcf4\ub4dc",children:(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:"\uacb0\uacfc\ub97c \uacc4\uc0b0\ud560 \uc218 \uc788\ub294 \ucda9\ubd84\ud55c \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"\ubaa8\ub4e0 \uae30\uc900\uacfc \ub300\uc548\uc5d0 \ub300\ud55c \uc30d\ub300\ube44\uad50\uac00 \uc644\ub8cc\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4."})]})});const G=R.main,H=k.filter(e=>1===e.level),L=W.ranking.map(e=>({name:e.alternativeName,score:(100*e.score).toFixed(1),fullScore:e.score})),M=H.map((e,i)=>({name:e.name,weight:G?(100*G.priorities[i]).toFixed(1):0,fullWeight:G?G.priorities[i]:0}));return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(j.A,{title:"AHP \ubd84\uc11d \uacb0\uacfc: ".concat(r),children:(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"\ud83d\udcca \ucd5c\uc885 \uc21c\uc704"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:W.ranking.map((e,i)=>(0,b.jsx)("div",{className:"p-3 rounded-lg border-2 ".concat(0===i?"border-yellow-400 bg-yellow-50":1===i?"border-gray-400 bg-gray-50":2===i?"border-amber-600 bg-amber-50":"border-gray-200 bg-white"),children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold ".concat(0===i?"text-yellow-600":1===i?"text-gray-600":2===i?"text-amber-600":"text-gray-500"),children:["#",e.rank]}),(0,b.jsx)("div",{className:"font-medium text-gray-800",children:e.alternativeName}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:[(100*e.score).toFixed(1),"%"]})]})},e.alternativeId))})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)(j.A,{title:"\ub300\uc548\ubcc4 \uc810\uc218",children:(0,b.jsx)(c.u,{width:"100%",height:300,children:(0,b.jsxs)(d.E,{data:L,children:[(0,b.jsx)(s.d,{strokeDasharray:"3 3"}),(0,b.jsx)(a.W,{dataKey:"name"}),(0,b.jsx)(n.h,{}),(0,b.jsx)(o.m,{formatter:e=>["".concat(e,"%"),"\uc810\uc218"]}),(0,b.jsx)(l.y,{dataKey:"score",fill:"#3B82F6"})]})})}),(0,b.jsx)(j.A,{title:"\uae30\uc900\ubcc4 \uac00\uc911\uce58",children:(0,b.jsx)(c.u,{width:"100%",height:300,children:(0,b.jsxs)(x.r,{children:[(0,b.jsx)(m.F,{data:M,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:i,weight:r}=e;return"".concat(i,": ").concat(r,"%")},outerRadius:80,fill:"#8884d8",dataKey:"weight",children:M.map((e,i)=>(0,b.jsx)(h.f,{fill:f[i%f.length]},"cell-".concat(i)))}),(0,b.jsx)(o.m,{formatter:e=>["".concat(e,"%"),"\uac00\uc911\uce58"]})]})})})]}),(0,b.jsx)(j.A,{title:"\uc77c\uad00\uc131 \ubd84\uc11d",children:(0,b.jsxs)("div",{className:"space-y-4",children:[G&&(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,b.jsx)("h5",{className:"font-medium mb-3",children:"\uae30\uc900 \ube44\uad50 \uc77c\uad00\uc131"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-700",children:G.consistencyRatio.toFixed(3)}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"\uc77c\uad00\uc131 \ube44\uc728 (CR)"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-".concat((0,u.kd)(G.consistencyRatio),"-600"),children:(0,u.nT)(G.consistencyRatio)}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"\uc77c\uad00\uc131 \uc218\uc900"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold ".concat(G.isConsistent?"text-green-600":"text-red-600"),children:G.isConsistent?"\u2713":"\u2717"}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:G.isConsistent?"\uc77c\uad00\uc131 \uc788\uc74c":"\uc77c\uad00\uc131 \ubd80\uc871"})]})]}),!G.isConsistent&&(0,b.jsx)("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:(0,b.jsx)("p",{className:"text-yellow-800 text-sm",children:"\u26a0\ufe0f \uc77c\uad00\uc131 \ube44\uc728\uc774 0.1\uc744 \ucd08\uacfc\ud569\ub2c8\ub2e4. \uc30d\ub300\ube44\uad50\ub97c \ub2e4\uc2dc \uac80\ud1a0\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."})})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,b.jsx)("h5",{className:"font-medium mb-2",children:"\uc77c\uad00\uc131 \uc9c0\ud45c \uc124\uba85"}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,b.jsxs)("p",{children:["\u2022 ",(0,b.jsx)("strong",{children:"CR \u2264 0.05:"})," \ub9e4\uc6b0 \uc77c\uad00\uc131 \uc788\uc74c (Excellent)"]}),(0,b.jsxs)("p",{children:["\u2022 ",(0,b.jsx)("strong",{children:"0.05 < CR \u2264 0.08:"})," \uc77c\uad00\uc131 \uc591\ud638 (Good)"]}),(0,b.jsxs)("p",{children:["\u2022 ",(0,b.jsx)("strong",{children:"0.08 < CR \u2264 0.10:"})," \ud5c8\uc6a9 \uac00\ub2a5\ud55c \uc218\uc900 (Acceptable)"]}),(0,b.jsxs)("p",{children:["\u2022 ",(0,b.jsx)("strong",{children:"CR > 0.10:"})," \uc77c\uad00\uc131 \ubd80\uc871 (Poor) - \uc7ac\uac80\ud1a0 \ud544\uc694"]})]})]})]})}),(0,b.jsx)(j.A,{title:"\uc0c1\uc138 \ubd84\uc11d",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"font-medium mb-3",children:"\uae30\uc900\ubcc4 \uac00\uc911\uce58 \uc0c1\uc138"}),(0,b.jsx)("div",{className:"space-y-2",children:H.map((e,i)=>(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,b.jsx)("span",{className:"font-medium",children:e.name}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:[G?(100*G.priorities[i]).toFixed(1):0,"%"]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["(\uc6b0\uc120\uc21c\uc704: ",G?G.priorities[i].toFixed(4):0,")"]})]})]},e.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"font-medium mb-3",children:"\ub300\uc548\ubcc4 \uc0c1\uc138 \uc810\uc218"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-100",children:[(0,b.jsx)("th",{className:"border p-2 text-left",children:"\ub300\uc548"}),H.map(e=>(0,b.jsx)("th",{className:"border p-2 text-center",children:e.name},e.id)),(0,b.jsx)("th",{className:"border p-2 text-center",children:"\ucd5c\uc885 \uc810\uc218"}),(0,b.jsx)("th",{className:"border p-2 text-center",children:"\uc21c\uc704"})]})}),(0,b.jsx)("tbody",{children:W.ranking.map(e=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"border p-2 font-medium",children:e.alternativeName}),H.map(i=>(0,b.jsx)("td",{className:"border p-2 text-center",children:B[i.id]?(100*B[i.id].priorities[F.findIndex(i=>i.id===e.alternativeId)]).toFixed(1)+"%":"-"},i.id)),(0,b.jsxs)("td",{className:"border p-2 text-center font-bold text-blue-600",children:[(100*e.score).toFixed(1),"%"]}),(0,b.jsxs)("td",{className:"border p-2 text-center font-bold",children:["#",e.rank]})]},e.alternativeId))})]})})]})]})})]})}}}]);
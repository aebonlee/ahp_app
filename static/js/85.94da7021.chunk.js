"use strict";(self.webpackChunkahp_research_platform=self.webpackChunkahp_research_platform||[]).push([[85],{5085(e,s,a){a.r(s),a.d(s,{default:()=>o});var l=a(2555),t=a(5043),r=a(3593),n=a(7907),i=a(795),d=a(8100),c=a(579);const o=e=>{let{users:s,loading:a,onCreateUser:o,onUpdateUser:x,onDeleteUser:m,onRefresh:u}=e;const[p,h]=(0,t.useState)(!1),[g,f]=(0,t.useState)(null),[j,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(""),[N,w]=(0,t.useState)("all"),[_,C]=(0,t.useState)(!1),[A,k]=(0,t.useState)(null),[S,P]=(0,t.useState)({email:"",first_name:"",last_name:"",role:"evaluator",password:"",confirmPassword:"",status:"active"}),[q,D]=(0,t.useState)({}),L=s.filter(e=>{const s=e.email.toLowerCase().includes(y.toLowerCase())||"".concat(e.first_name," ").concat(e.last_name).toLowerCase().includes(y.toLowerCase()),a="all"===N||e.role===N;return s&&a}),z=()=>{P({email:"",first_name:"",last_name:"",role:"evaluator",password:"",confirmPassword:"",status:"active"}),D({})},U=(e,s)=>{P(a=>(0,l.A)((0,l.A)({},a),{},{[e]:s})),q[e]&&D(s=>(0,l.A)((0,l.A)({},s),{},{[e]:""}))};return(0,c.jsxs)("div",{className:"max-w-6xl mx-auto",children:[A&&(0,c.jsx)("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm font-medium shadow-lg ".concat("success"===A.type?"bg-green-100 text-green-800":"info"===A.type?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:A.text}),(0,c.jsx)(d.A,{isOpen:null!==j,onClose:()=>v(null),title:"\uc0ac\uc6a9\uc790 \uc0ad\uc81c",size:"sm",footer:(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,c.jsx)(n.A,{variant:"secondary",onClick:()=>v(null),children:"\ucde8\uc18c"}),(0,c.jsx)(n.A,{variant:"error",onClick:async()=>{if(!j)return;const e=j;v(null);try{await m(e.id)}catch(l){s="error",a=l instanceof Error?l.message:"\uc0ac\uc6a9\uc790 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",k({type:s,text:a}),setTimeout(()=>k(null),3e3)}var s,a},children:"\uc0ad\uc81c"})]}),children:(0,c.jsxs)("p",{className:"text-sm text-gray-600",children:['\uc0ac\uc6a9\uc790 "',null===j||void 0===j?void 0:j.first_name," ",null===j||void 0===j?void 0:j.last_name,'"\ub97c \uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?']})}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uc0ac\uc6a9\uc790 \uad00\ub9ac"}),(0,c.jsx)("p",{className:"text-gray-600",children:"\uc2dc\uc2a4\ud15c \uc0ac\uc6a9\uc790\ub97c \uc0dd\uc131, \uc218\uc815, \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,c.jsxs)(r.A,{children:[(0,c.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 mb-6",children:[(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[(0,c.jsx)(i.A,{id:"search",placeholder:"\uc774\ub984 \ub610\ub294 \uc774\uba54\uc77c\ub85c \uac80\uc0c9...",value:y,onChange:b,className:"min-w-[200px]"}),(0,c.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,c.jsx)("option",{value:"all",children:"\ubaa8\ub4e0 \uc5ed\ud560"}),(0,c.jsx)("option",{value:"super_admin",children:"\ucd1d\uad04 \uad00\ub9ac\uc790"}),(0,c.jsx)("option",{value:"admin",children:"\uad00\ub9ac\uc790"}),(0,c.jsx)("option",{value:"evaluator",children:"\ud3c9\uac00\uc790"})]})]}),(0,c.jsxs)("div",{className:"flex space-x-2",children:[(0,c.jsx)(n.A,{variant:"secondary",onClick:u,loading:a,children:"\uc0c8\ub85c\uace0\uce68"}),(0,c.jsx)(n.A,{variant:"primary",onClick:()=>h(!0),children:"\uc0c8 \uc0ac\uc6a9\uc790 \ucd94\uac00"})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,c.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,c.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:s.length}),(0,c.jsx)("div",{className:"text-sm text-blue-700",children:"\uc804\uccb4 \uc0ac\uc6a9\uc790"})]}),(0,c.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,c.jsx)("div",{className:"text-2xl font-bold text-purple-900",children:s.filter(e=>"super_admin"===e.role).length}),(0,c.jsx)("div",{className:"text-sm text-purple-700",children:"\ucd1d\uad04 \uad00\ub9ac\uc790"})]}),(0,c.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,c.jsx)("div",{className:"text-2xl font-bold text-red-900",children:s.filter(e=>"service_admin"===e.role).length}),(0,c.jsx)("div",{className:"text-sm text-red-700",children:"\uad00\ub9ac\uc790"})]}),(0,c.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,c.jsx)("div",{className:"text-2xl font-bold text-green-900",children:s.filter(e=>"evaluator"===e.role).length}),(0,c.jsx)("div",{className:"text-sm text-green-700",children:"\ud3c9\uac00\uc790"})]}),(0,c.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,c.jsx)("div",{className:"text-2xl font-bold text-yellow-900",children:s.filter(e=>"active"===e.status).length}),(0,c.jsx)("div",{className:"text-sm text-yellow-700",children:"\ud65c\uc131 \uc0ac\uc6a9\uc790"})]})]}),a?(0,c.jsx)("div",{className:"text-center py-8",children:"\ub370\uc774\ud130 \ub85c\ub529 \uc911..."}):0===L.length?(0,c.jsx)("div",{className:"text-gray-500 text-center py-8",children:y||"all"!==N?"\uac80\uc0c9 \uc870\uac74\uc5d0 \ub9de\ub294 \uc0ac\uc6a9\uc790\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\ub4f1\ub85d\ub41c \uc0ac\uc6a9\uc790\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\uc0ac\uc6a9\uc790"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\uc774\uba54\uc77c"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\uc5ed\ud560"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\uc0c1\ud0dc"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\uac00\uc785\uc77c"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\ub9c8\uc9c0\ub9c9 \ub85c\uadf8\uc778"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\uc791\uc5c5"})]})}),(0,c.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(e=>(0,c.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,c.jsx)("td",{className:"px-6 py-4",children:(0,c.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]})}),(0,c.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.email}),(0,c.jsx)("td",{className:"px-6 py-4",children:(0,c.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("super_admin"===e.role?"bg-purple-100 text-purple-800":"service_admin"===e.role?"bg-red-100 text-red-800":"service_user"===e.role?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:"super_admin"===e.role?"\uc2dc\uc2a4\ud15c \uad00\ub9ac\uc790":"service_admin"===e.role?"\uc11c\ube44\uc2a4 \uad00\ub9ac\uc790":"service_user"===e.role?"\uc11c\ube44\uc2a4 \uc0ac\uc6a9\uc790":"\ud3c9\uac00\uc790"})}),(0,c.jsx)("td",{className:"px-6 py-4",children:(0,c.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"active"===e.status?"\ud65c\uc131":"\ube44\ud65c\uc131"})}),(0,c.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,c.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.last_login?new Date(e.last_login).toLocaleDateString():"\uc5c6\uc74c"}),(0,c.jsxs)("td",{className:"px-6 py-4 text-sm space-x-2",children:[(0,c.jsx)(n.A,{variant:"secondary",size:"sm",onClick:()=>(e=>{f(e),P({email:e.email,first_name:e.first_name,last_name:e.last_name,role:e.role,password:"",confirmPassword:"",status:e.status}),h(!0),D({})})(e),children:"\uc218\uc815"}),(0,c.jsx)(n.A,{variant:"error",size:"sm",onClick:()=>(e=>{v(e)})(e),children:"\uc0ad\uc81c"})]})]},e.id))})]})})]}),p&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:g?"\uc0ac\uc6a9\uc790 \uc218\uc815":"\uc0c8 \uc0ac\uc6a9\uc790 \ucd94\uac00"}),q.general&&(0,c.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,c.jsx)("p",{className:"text-sm text-red-600",children:q.general})}),(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return S.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S.email)||(e.email="\uc62c\ubc14\ub978 \uc774\uba54\uc77c \ud615\uc2dd\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."):e.email="\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",S.first_name.trim()||(e.first_name="\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),S.last_name.trim()||(e.last_name="\uc131\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),g||(S.password?S.password.length<6&&(e.password="\ube44\ubc00\ubc88\ud638\ub294 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."):e.password="\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",S.password!==S.confirmPassword&&(e.confirmPassword="\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")),D(e),0===Object.keys(e).length})()){C(!0);try{g?await x(g.id,{email:S.email,first_name:S.first_name,last_name:S.last_name,role:S.role,status:S.status}):await o({email:S.email,first_name:S.first_name,last_name:S.last_name,role:S.role,status:S.status}),z(),h(!1),f(null)}catch(s){D({general:s instanceof Error?s.message:"\uc0ac\uc6a9\uc790 \ucc98\ub9ac\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."})}finally{C(!1)}}},className:"space-y-4",children:[(0,c.jsx)(i.A,{id:"email",label:"\uc774\uba54\uc77c",type:"email",placeholder:"user@example.com",value:S.email,onChange:e=>U("email",e),error:q.email,required:!0}),(0,c.jsx)(i.A,{id:"first_name",label:"\uc774\ub984",placeholder:"\ud64d\uae38\ub3d9",value:S.first_name,onChange:e=>U("first_name",e),error:q.first_name,required:!0}),(0,c.jsx)(i.A,{id:"last_name",label:"\uc131",placeholder:"\ud64d",value:S.last_name,onChange:e=>U("last_name",e),error:q.last_name,required:!0}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uc5ed\ud560 ",(0,c.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,c.jsxs)("select",{value:S.role,onChange:e=>U("role",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,c.jsx)("option",{value:"evaluator",children:"\ud3c9\uac00\uc790"}),(0,c.jsx)("option",{value:"admin",children:"\uad00\ub9ac\uc790"}),(0,c.jsx)("option",{value:"super_admin",children:"\ucd1d\uad04 \uad00\ub9ac\uc790"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uc0c1\ud0dc ",(0,c.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,c.jsxs)("select",{value:S.status,onChange:e=>U("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,c.jsx)("option",{value:"active",children:"\ud65c\uc131"}),(0,c.jsx)("option",{value:"inactive",children:"\ube44\ud65c\uc131"})]})]}),!g&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.A,{id:"password",label:"\ube44\ubc00\ubc88\ud638",type:"password",placeholder:"6\uc790 \uc774\uc0c1 \uc785\ub825\ud558\uc138\uc694",value:S.password,onChange:e=>U("password",e),error:q.password,required:!0}),(0,c.jsx)(i.A,{id:"confirmPassword",label:"\ube44\ubc00\ubc88\ud638 \ud655\uc778",type:"password",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \ub2e4\uc2dc \uc785\ub825\ud558\uc138\uc694",value:S.confirmPassword,onChange:e=>U("confirmPassword",e),error:q.confirmPassword,required:!0})]}),(0,c.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,c.jsx)(n.A,{type:"button",variant:"secondary",onClick:()=>{h(!1),f(null),z()},disabled:_,children:"\ucde8\uc18c"}),(0,c.jsx)(n.A,{type:"submit",variant:"primary",loading:_,disabled:_,children:g?"\uc218\uc815":"\uc0dd\uc131"})]})]})]})})]})}}}]);
//# sourceMappingURL=85.94da7021.chunk.js.map
"use strict";(self.webpackChunkahp_research_platform=self.webpackChunkahp_research_platform||[]).push([[304],{9304:(e,t,a)=>{a.d(t,{Ay:()=>f});var r=a(2555),c=a(1801),s=a(1422);const i=new class{constructor(e){this.baseURL=void 0,this.baseURL=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const a=(0,r.A)({"Content-Type":"application/json"},t.headers),c=s.A.getAccessToken();c&&(a.Authorization="Bearer ".concat(c));const i=await fetch("".concat(this.baseURL).concat(e),(0,r.A)((0,r.A)({credentials:"include"},t),{},{headers:a})),o=await i.json();if(!i.ok){if(401===i.status){if((await s.A.refreshAccessToken()).success){const c=s.A.getAccessToken();if(c){a.Authorization="Bearer ".concat(c);const s=await fetch("".concat(this.baseURL).concat(e),(0,r.A)((0,r.A)({credentials:"include"},t),{},{headers:a}));if(s.ok){return{data:await s.json()}}}}else window.dispatchEvent(new CustomEvent("auth:tokenExpired"))}return{error:o.error||o.detail||"Request failed"}}return{data:o}}catch(a){return console.error("API request failed:",a),{error:"Network error"}}}get(e){return this.request(e,{method:"GET"})}post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}delete(e){return this.request(e,{method:"DELETE"})}patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}}(c.API_BASE_URL),o={login:async e=>{try{return{data:{user:(await s.A.login(e.username,e.password)).user},error:null}}catch(t){return{data:null,error:t instanceof Error?t.message:"Login failed"}}},logout:async()=>{try{const e=await s.A.logout();return{data:e.success?{message:"Logout successful"}:null,error:e.success?null:e.error}}catch(e){return{data:null,error:e instanceof Error?e.message:"Logout failed"}}},refreshToken:async()=>{try{const e=await s.A.refreshAccessToken();return{data:e.success?{message:"Token refreshed"}:null,error:e.success?null:e.error}}catch(e){return{data:null,error:e instanceof Error?e.message:"Token refresh failed"}}},verifyToken:async()=>{try{return{data:await s.A.getCurrentUser(),error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"Token verification failed"}}},isAuthenticated:()=>s.A.isAuthenticated(),getCurrentUser:async()=>{try{return{data:await s.A.getCurrentUser(),error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"Failed to get user info"}}}},n={save:e=>i.post("/api/evaluate/direct",e),fetch:e=>i.get("/api/evaluate/direct/".concat(e)),normalize:e=>i.post("/api/calculate/normalize",e)},l={save:e=>i.post("/api/evaluate/pairwise",e),fetchMatrix:(e,t)=>i.get("/api/evaluate/pairwise/".concat(e,"/").concat(t))},p={calculate:e=>i.post("/api/calculate/ahp",e),validateMatrix:e=>i.post("/api/calculate/validate-matrix",{matrix:e})},u={assign:e=>i.post("/api/service/evaluations/invitations/",e),fetchByProject:e=>i.get("/api/service/evaluations/invitations/?project=".concat(e)),list:e=>i.get("/api/service/evaluations/evaluations/?project=".concat(e)),updateWeight:(e,t)=>i.patch("/api/service/evaluations/invitations/".concat(e,"/"),t),remove:e=>i.delete("/api/service/evaluations/invitations/".concat(e,"/")),fetchProgress:e=>i.get("/api/service/evaluations/evaluations/?project=".concat(e,"&status=in_progress")),validateAccessKey:e=>i.get("/api/service/evaluations/invitations/by_token/?token=".concat(e))},d={save:e=>i.post("/api/service/analysis/calculate/individual/",e),fetchIndividual:e=>i.get("/api/service/analysis/project-summary/?project_id=".concat(e)),calculateGroup:e=>i.post("/api/service/analysis/calculate/group/",e),fetchProject:e=>i.get("/api/service/analysis/project-summary/?project_id=".concat(e)),sensitivityAnalysis:e=>i.post("/api/service/analysis/sensitivity/",e)},v={fetch:()=>i.get("/api/service/projects/projects/"),fetchById:e=>i.get("/api/service/projects/projects/".concat(e,"/")),create:e=>i.post("/api/service/projects/projects/",e),update:(e,t)=>i.patch("/api/service/projects/projects/".concat(e,"/"),t),delete:e=>i.delete("/api/service/projects/projects/".concat(e,"/"))},h={fetch:e=>i.get("/api/service/projects/criteria/?project=".concat(e)),create:e=>i.post("/api/service/projects/criteria/",e),update:(e,t)=>i.patch("/api/service/projects/criteria/".concat(e,"/"),t),delete:e=>i.delete("/api/service/projects/criteria/".concat(e,"/"))},g={fetch:e=>i.get("/api/service/projects/criteria/?project=".concat(e,"&type=alternative")),create:e=>i.post("/api/service/projects/criteria/",(0,r.A)((0,r.A)({},e),{},{type:"alternative"})),update:(e,t)=>i.patch("/api/service/projects/criteria/".concat(e,"/"),t),delete:e=>i.delete("/api/service/projects/criteria/".concat(e,"/"))},f={get:i.get.bind(i),post:i.post.bind(i),put:i.put.bind(i),delete:i.delete.bind(i),patch:i.patch.bind(i),authAPI:o,directEvaluationAPI:n,pairwiseEvaluationAPI:l,ahpCalculationAPI:p,evaluatorAPI:u,resultsAPI:d,projectAPI:v,criteriaAPI:h,alternativesAPI:g,apiHelpers:{generateMatrixKey:(e,t)=>"criteria"===e?"C:".concat(t||"root"):"A:".concat(t),generateTargetKey:(e,t,a)=>"criterion"===e?"criterion:".concat(t):"alternative:".concat(t,"@criterion:").concat(a),extractErrorMessage:e=>e.error?e.error:"Unknown error occurred",extractSuccessMessage:e=>e.message?e.message:"Operation completed successfully"}}}}]);
//# sourceMappingURL=304.fb470a2c.chunk.js.map
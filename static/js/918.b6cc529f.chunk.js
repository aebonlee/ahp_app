"use strict";(self.webpackChunkahp_research_platform=self.webpackChunkahp_research_platform||[]).push([[918],{4918(e,t,s){s.r(t),s.d(t,{default:()=>m});var a=s(5043),n=s(3593),r=s(7907),c=s(2555),o=s(1801);const l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const a=new AbortController,n=setTimeout(()=>a.abort(),s);try{return await fetch(e,(0,c.A)((0,c.A)({},t),{},{signal:a.signal}))}finally{clearTimeout(n)}};const i=new class{constructor(){this.results=[]}async checkFrontend(){const e=Date.now();try{const t={version:{NODE_ENV:"production",PUBLIC_URL:"/ahp_app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VERSION||"1.0.0",buildTime:{NODE_ENV:"production",PUBLIC_URL:"/ahp_app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BUILD_TIME||(new Date).toISOString(),environment:"production"};return{component:"Frontend (React)",status:"healthy",responseTime:Date.now()-e,message:"React application is running",details:t}}catch(t){return{component:"Frontend (React)",status:"error",message:"Frontend check failed: ".concat(t)}}}async checkBackendServer(){const e=Date.now();try{const t=await l("".concat(o.API_BASE_URL,"/health/"));if(t.ok){const s=await t.json().catch(()=>null);return{component:"Backend Server (Django)",status:"healthy",responseTime:Date.now()-e,message:"Django server is responding",details:s}}{const s=await t.json().catch(()=>null);return{component:"Backend Server (Django)",status:"degraded",responseTime:Date.now()-e,message:"Server returned status ".concat(t.status),details:s}}}catch(t){const e=t instanceof Error?t.message:String(t);return{component:"Backend Server (Django)",status:"error",message:"Cannot connect to backend: ".concat(e),details:{url:o.API_BASE_URL,error:e}}}}async checkDatabase(){const e=Date.now();try{const t=await l("".concat(o.API_BASE_URL,"/db-status/"));if(t.ok){const s=await t.json().catch(()=>null);return{component:"Database (PostgreSQL)",status:"healthy",responseTime:Date.now()-e,message:"Database connection is active",details:s}}{const s=await t.json().catch(()=>null);return{component:"Database (PostgreSQL)",status:"degraded",responseTime:Date.now()-e,message:"Database status check returned unexpected response",details:s}}}catch(t){try{if((await l("".concat(o.API_BASE_URL,"/api/service/status/"))).ok)return{component:"Database (PostgreSQL)",status:"degraded",message:"Database likely connected (indirect check)",responseTime:Date.now()-e,details:{indirect:!0}}}catch(s){}const a=t instanceof Error?t.message:String(t);return{component:"Database (PostgreSQL)",status:"error",message:"Database check failed: ".concat(a)}}}async checkAPIEndpoints(){const e=Date.now(),t=["/api/service/projects/projects/","/api/service/status/","/api/service/auth/token/verify/"],s=[];let a=0;for(const r of t)try{const e=Date.now(),t=await l("".concat(o.API_BASE_URL).concat(r),{headers:{"Content-Type":"application/json"}},3e3),n=Date.now()-e,c=t.status<500;c&&a++,s.push({endpoint:r,status:t.status,responseTime:n,healthy:c})}catch(n){const e=n instanceof Error?n.message:String(n);s.push({endpoint:r,status:0,error:e,healthy:!1})}return{component:"API Endpoints",status:a===t.length?"healthy":a>0?"degraded":"error",responseTime:Date.now()-e,message:"".concat(a,"/").concat(t.length," endpoints responding"),details:s}}async checkCORS(){const e=Date.now();try{const t=await l("".concat(o.API_BASE_URL,"/api/service/status/"),{method:"OPTIONS"}),s={"access-control-allow-origin":t.headers.get("access-control-allow-origin"),"access-control-allow-methods":t.headers.get("access-control-allow-methods"),"access-control-allow-headers":t.headers.get("access-control-allow-headers")},a=null!==s["access-control-allow-origin"];return{component:"CORS Configuration",status:a?"healthy":"error",responseTime:Date.now()-e,message:a?"CORS properly configured":"CORS not configured",details:s}}catch(t){const e=t instanceof Error?t.message:String(t);return{component:"CORS Configuration",status:"error",message:"CORS check failed: ".concat(e)}}}async checkAuthentication(){const e=Date.now();try{const t=await l("".concat(o.API_BASE_URL,"/api/auth/token/verify/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:"test-token"})}),s=t.status<500;return{component:"Authentication System",status:s?"healthy":"error",responseTime:Date.now()-e,message:s?"Auth system is operational":"Auth system error",details:{endpoint:"/api/auth/token/verify/",status:t.status}}}catch(t){const e=t instanceof Error?t.message:String(t);return{component:"Authentication System",status:"error",message:"Auth check failed: ".concat(e)}}}async runFullHealthCheck(){console.log("Starting system health check..."),this.results=[];const e=[this.checkFrontend(),this.checkBackendServer(),this.checkDatabase(),this.checkAPIEndpoints(),this.checkCORS(),this.checkAuthentication()],t=await Promise.all(e);this.results=t;const s={total:t.length,healthy:t.filter(e=>"healthy"===e.status).length,degraded:t.filter(e=>"degraded"===e.status).length,error:t.filter(e=>"error"===e.status).length};let a;a=s.error>0?"error":s.degraded>0?"degraded":"healthy";const n={timestamp:(new Date).toISOString(),overallStatus:a,results:t,summary:s};return this.printReport(n),n}printReport(e){console.log("\n"+"=".repeat(60)),console.log("SYSTEM HEALTH CHECK REPORT"),console.log("=".repeat(60)),console.log("Timestamp: ".concat(e.timestamp)),console.log("Overall Status: ".concat(e.overallStatus.toUpperCase())),console.log("\nSummary: Total=".concat(e.summary.total," Healthy=").concat(e.summary.healthy," Degraded=").concat(e.summary.degraded," Error=").concat(e.summary.error)),e.results.forEach(e=>{console.log("\n[".concat(e.status.toUpperCase(),"] ").concat(e.component)),e.responseTime&&console.log("  Response Time: ".concat(e.responseTime,"ms")),e.message&&console.log("  Message: ".concat(e.message))}),console.log("\n"+"=".repeat(60))}},d=i;var h=s(579);const m=()=>{const[e,t]=(0,a.useState)(!1),[s,c]=(0,a.useState)(null),[o,l]=(0,a.useState)(!1),[i,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{u()},[]),(0,a.useEffect)(()=>{if(o&&!e){const e=setInterval(()=>{u()},3e4);return()=>clearInterval(e)}},[o,e]);const u=async()=>{t(!0);try{const e=await d.runFullHealthCheck();c(e)}catch(e){m({type:"error",text:"\uc2dc\uc2a4\ud15c \uc810\uac80\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."}),setTimeout(()=>m(null),3e3)}finally{t(!1)}},g=e=>{switch(e){case"healthy":return"green";case"degraded":return"yellow";case"error":return"red";default:return"gray"}},p=e=>{switch(e){case"healthy":return"\u2705";case"degraded":return"\u26a0\ufe0f";case"error":return"\u274c";default:return"\u2753"}};return(0,h.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[i&&(0,h.jsx)("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm font-medium shadow-lg ".concat("success"===i.type?"bg-green-100 text-green-800":"info"===i.type?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:i.text}),(0,h.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,h.jsxs)("div",{className:"mb-8",children:[(0,h.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\ud83c\udfe5 \uc2dc\uc2a4\ud15c \uc0c1\ud0dc \uc810\uac80"}),(0,h.jsx)("p",{className:"text-gray-600",children:"\ud504\ub860\ud2b8\uc5d4\ub4dc, \ubc31\uc5d4\ub4dc, \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\ub3d9 \uc0c1\ud0dc\ub97c \uc810\uac80\ud569\ub2c8\ub2e4."})]}),(0,h.jsx)(n.A,{title:"\uc81c\uc5b4\ud310",className:"mb-6",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex gap-4",children:[(0,h.jsx)(r.A,{variant:"primary",onClick:u,disabled:e,children:e?"\uc810\uac80 \uc911...":"\uc2dc\uc2a4\ud15c \uc810\uac80 \uc2e4\ud589"}),(0,h.jsxs)("label",{className:"flex items-center",children:[(0,h.jsx)("input",{type:"checkbox",checked:o,onChange:e=>l(e.target.checked),className:"mr-2"}),"30\ucd08\ub9c8\ub2e4 \uc790\ub3d9 \uc810\uac80"]})]}),s&&(0,h.jsxs)("div",{className:"text-sm text-gray-600",children:["\ub9c8\uc9c0\ub9c9 \uc810\uac80: ",new Date(s.timestamp).toLocaleString("ko-KR")]})]})}),s&&(0,h.jsx)(n.A,{title:"\uc804\uccb4 \uc0c1\ud0dc",className:"mb-6",children:(0,h.jsxs)("div",{className:"text-center p-8 rounded-lg bg-".concat(g(s.overallStatus),"-50 border-2 border-").concat(g(s.overallStatus),"-200"),children:[(0,h.jsx)("div",{className:"text-5xl mb-4",children:p(s.overallStatus)}),(0,h.jsx)("div",{className:"text-2xl font-bold text-".concat(g(s.overallStatus),"-700"),children:s.overallStatus.toUpperCase()}),(0,h.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[(0,h.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.summary.healthy}),(0,h.jsx)("div",{className:"text-sm text-gray-600",children:"\uc815\uc0c1"})]}),(0,h.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:s.summary.degraded}),(0,h.jsx)("div",{className:"text-sm text-gray-600",children:"\ubd80\ubd84 \uc7a5\uc560"})]}),(0,h.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-red-600",children:s.summary.error}),(0,h.jsx)("div",{className:"text-sm text-gray-600",children:"\uc624\ub958"})]})]})]})}),s&&(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.results.map((e,t)=>(0,h.jsx)(n.A,{title:e.component,children:(0,h.jsx)("div",{className:"space-y-3",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("span",{className:"text-2xl",children:p(e.status)}),(0,h.jsx)("span",{className:"font-bold text-".concat(g(e.status),"-600"),children:e.status.toUpperCase()})]}),e.responseTime&&(0,h.jsxs)("span",{className:"text-sm text-gray-600",children:[e.responseTime,"ms"]})]},"status"),e.message?(0,h.jsx)("div",{className:"text-sm text-gray-700 bg-gray-50 p-2 rounded",children:e.message},"message"):null,e.details?(0,h.jsxs)("details",{className:"text-xs",children:[(0,h.jsx)("summary",{className:"cursor-pointer text-blue-600 hover:text-blue-800",children:"\uc0c1\uc138 \uc815\ubcf4 \ubcf4\uae30"}),(0,h.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded overflow-auto max-h-40",children:JSON.stringify(e.details,null,2)})]},"details"):null]})},t))}),e&&(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd04"}),(0,h.jsx)("div",{className:"text-lg text-gray-600",children:"\uc2dc\uc2a4\ud15c \uc810\uac80 \uc911..."})]})]})]})}}}]);
//# sourceMappingURL=918.b6cc529f.chunk.js.map
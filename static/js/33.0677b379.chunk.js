"use strict";(self.webpackChunkahp_research_platform=self.webpackChunkahp_research_platform||[]).push([[33],{9033:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var a=r(2555),c=r(5043),n=r(3593),s=r(7907),l=r(8100),o=r(2497),i=r(6811),d=r(9405),u=r(1673),p=r(4604),j=r(3138),x=r(9304),m=r(579);const h=e=>{let{onComplete:t,onCancel:r}=e;const[h,v]=(0,c.useState)({currentStep:1,projectId:null,projectData:null,criteriaCount:0,alternativesCount:0,evaluatorsCount:0}),[f,C]=(0,c.useState)(!1),[A,b]=(0,c.useState)(null),[g,y]=(0,c.useState)(!1),I=["\ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131","\ud3c9\uac00 \uae30\uc900 \uc124\uc815","\ub300\uc548 \uc124\uc815","\ud3c9\uac00\uc790 \ubc30\uc815","\ud504\ub85c\uc81d\ud2b8 \uc644\ub8cc"],N=async e=>{try{var t;C(!0);const r=await j.A.createProject({title:e.title,description:null!==(t=e.description)&&void 0!==t?t:"",objective:e.objective,ahp_type:e.ahpType,status:"active",evaluation_mode:e.evaluationMode||"practical",workflow_stage:"creating"});r&&r.id&&v(e=>(0,a.A)((0,a.A)({},e),{},{currentStep:2,projectId:r.id||null,projectData:r}))}catch(A){b("\ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}finally{C(!1)}},S=()=>{v(e=>(0,a.A)((0,a.A)({},e),{},{currentStep:3}))},w=()=>{v(e=>(0,a.A)((0,a.A)({},e),{},{currentStep:4}))},k=()=>{v(e=>(0,a.A)((0,a.A)({},e),{},{currentStep:5}))},D=async e=>{try{if(h.projectId){const a="completed"===e?"completed":"archived";await x.Ay.patch("/api/service/projects/projects/".concat(h.projectId,"/"),{status:a,workflow_stage:"completed"===e?"completed":"terminated"}),"completed"===e&&t?t():"terminated"===e&&r&&r()}}catch(A){b((A instanceof Error?A.message:"")||"\ud504\ub85c\uc81d\ud2b8 \uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},_=()=>{h.currentStep>1&&v(e=>(0,a.A)((0,a.A)({},e),{},{currentStep:e.currentStep-1}))},P=()=>{y(!0)};return(0,m.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,m.jsx)(l.A,{isOpen:g,onClose:()=>y(!1),title:"\ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131 \ucde8\uc18c",size:"sm",footer:(0,m.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,m.jsx)(s.A,{variant:"secondary",onClick:()=>y(!1),children:"\uacc4\uc18d \uc9c4\ud589"}),(0,m.jsx)(s.A,{variant:"error",onClick:async()=>{y(!1);try{h.projectId&&await j.A.deleteProject(h.projectId),r&&r()}catch(A){b((A instanceof Error?A.message:"")||"\ud504\ub85c\uc81d\ud2b8 \ucde8\uc18c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},children:"\ucde8\uc18c \ud655\uc778"})]}),children:(0,m.jsx)("p",{className:"text-sm text-gray-600",children:"\ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131\uc744 \ucde8\uc18c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc785\ub825\ud55c \ubaa8\ub4e0 \ub370\uc774\ud130\uac00 \uc0ad\uc81c\ub429\ub2c8\ub2e4."})}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"AHP \ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131 \uc6cc\ud06c\ud50c\ub85c\uc6b0"}),(0,m.jsx)("p",{className:"text-gray-600 mt-2",children:"\ub2e8\uacc4\ubcc4\ub85c \ud504\ub85c\uc81d\ud2b8\ub97c \uad6c\uc131\ud558\uace0 \ud3c9\uac00\ub97c \uc900\ube44\ud569\ub2c8\ub2e4."})]}),(0,m.jsx)("div",{className:"mb-8",children:(0,m.jsx)("div",{className:"flex items-center justify-between mb-4",children:I.map((e,t)=>{const r=t+1,a=h.currentStep===r,c=h.currentStep>r;return(0,m.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,m.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,m.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold transition-colors ".concat(a?"bg-blue-500 text-white":c?"bg-green-500 text-white":"bg-gray-200 text-gray-500"),children:c?"\u2713":r}),(0,m.jsx)("span",{className:"mt-2 text-xs ".concat(a?"text-blue-600 font-semibold":c?"text-green-600":"text-gray-500"),children:e})]}),t<I.length-1&&(0,m.jsx)("div",{className:"h-1 flex-1 mx-2 ".concat(h.currentStep>r?"bg-green-500":"bg-gray-200")})]},r)})})}),h.projectData&&(0,m.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("h3",{className:"font-semibold text-blue-900",children:["\ud504\ub85c\uc81d\ud2b8: ",h.projectData.title]}),(0,m.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["ID: ",h.projectId," | \uae30\uc900: ",h.criteriaCount,"\uac1c | \ub300\uc548: ",h.alternativesCount,"\uac1c | \ud3c9\uac00\uc790: ",h.evaluatorsCount,"\uba85"]})]}),h.currentStep>1&&h.currentStep<5&&(0,m.jsx)(s.A,{variant:"outline",size:"sm",onClick:_,children:"\u2190 \uc774\uc804 \ub2e8\uacc4"})]})}),(()=>{var e;if(A)return(0,m.jsx)(n.A,{children:(0,m.jsxs)("div",{className:"text-center py-8",children:[(0,m.jsx)("div",{className:"text-red-600 mb-4",children:A}),(0,m.jsx)(s.A,{onClick:()=>b(null),variant:"primary",children:"\ub2e4\uc2dc \uc2dc\ub3c4"})]})});switch(h.currentStep){case 1:return(0,m.jsx)(o.A,{onProjectCreated:()=>{},onCancel:P,loading:f,createProject:N});case 2:return h.projectId?(0,m.jsx)(i.A,{projectId:h.projectId,projectTitle:null===(e=h.projectData)||void 0===e?void 0:e.title,onComplete:S,onCriteriaChange:e=>v(t=>(0,a.A)((0,a.A)({},t),{},{criteriaCount:e}))}):null;case 3:return h.projectId?(0,m.jsx)(d.A,{projectId:h.projectId,onComplete:w,onAlternativesChange:e=>v(t=>(0,a.A)((0,a.A)({},t),{},{alternativesCount:e}))}):null;case 4:return h.projectId?(0,m.jsx)(u.A,{projectId:h.projectId,onComplete:k,onEvaluatorsChange:e=>v(t=>(0,a.A)((0,a.A)({},t),{},{evaluatorsCount:e}))}):null;case 5:return h.projectId&&h.projectData?(0,m.jsx)(p.default,{projectId:h.projectId,projectTitle:h.projectData.title,onBack:_,onProjectStatusChange:D,criteriaCount:h.criteriaCount,alternativesCount:h.alternativesCount,evaluatorsCount:h.evaluatorsCount}):null;default:return null}})(),!1]})}}}]);
//# sourceMappingURL=33.0677b379.chunk.js.map
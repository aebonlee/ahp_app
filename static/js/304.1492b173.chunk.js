"use strict";(self.webpackChunkahp_research_platform=self.webpackChunkahp_research_platform||[]).push([[304],{9304(e,t,r){r.d(t,{Ay:()=>y});var a=r(2555),s=r(1801),c=r(1422),i=r(8018);const o=new class{constructor(e){this.baseURL=void 0,this.baseURL=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const r=(0,a.A)({"Content-Type":"application/json"},t.headers),s=c.A.getAccessToken();s&&(r.Authorization="Bearer ".concat(s));const i=await fetch("".concat(this.baseURL).concat(e),(0,a.A)((0,a.A)({credentials:"include"},t),{},{headers:r})),o=await i.json();if(!i.ok){if(401===i.status){if((await c.A.refreshAccessToken()).success){const s=c.A.getAccessToken();if(s){r.Authorization="Bearer ".concat(s);const c=await fetch("".concat(this.baseURL).concat(e),(0,a.A)((0,a.A)({credentials:"include"},t),{},{headers:r}));if(c.ok){return{data:await c.json()}}}}else window.dispatchEvent(new CustomEvent("auth:tokenExpired"))}return{error:o.error||o.detail||"Request failed"}}return{data:o}}catch(r){return i.A.error("API request failed:",r),{error:"Network error"}}}get(e){return this.request(e,{method:"GET"})}post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}delete(e){return this.request(e,{method:"DELETE"})}patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}}(s.API_BASE_URL),n={login:async e=>{try{return{data:{user:(await c.A.login(e.username,e.password)).user},error:null}}catch(t){return{data:null,error:t instanceof Error?t.message:"Login failed"}}},logout:async()=>{try{const e=await c.A.logout();return{data:e.success?{message:"Logout successful"}:null,error:e.success?null:e.error}}catch(e){return{data:null,error:e instanceof Error?e.message:"Logout failed"}}},refreshToken:async()=>{try{const e=await c.A.refreshAccessToken();return{data:e.success?{message:"Token refreshed"}:null,error:e.success?null:e.error}}catch(e){return{data:null,error:e instanceof Error?e.message:"Token refresh failed"}}},verifyToken:async()=>{try{return{data:await c.A.getCurrentUser(),error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"Token verification failed"}}},isAuthenticated:()=>c.A.isAuthenticated(),getCurrentUser:async()=>{try{return{data:await c.A.getCurrentUser(),error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"Failed to get user info"}}}},p={save:e=>o.post("/api/service/evaluations/direct-input/",e),fetch:e=>o.get("/api/service/evaluations/direct-input/?project=".concat(e)),normalize:e=>o.post("/api/service/analysis/normalize/",e)},u={save:e=>o.post("/api/service/evaluations/comparisons/",e),fetchMatrix:(e,t)=>o.get("/api/service/evaluations/comparisons/?project=".concat(e,"&matrix_key=").concat(t))},l={calculate:e=>o.post("/api/service/analysis/calculate/individual/",e),validateMatrix:e=>o.post("/api/service/analysis/validate-matrix/",{matrix:e})},d={assign:e=>o.post("/api/service/evaluations/invitations/",e),fetchByProject:e=>o.get("/api/service/evaluations/invitations/?project=".concat(e)),list:e=>o.get("/api/service/evaluations/evaluations/?project=".concat(e)),updateWeight:(e,t)=>o.patch("/api/service/evaluations/invitations/".concat(e,"/"),t),remove:e=>o.delete("/api/service/evaluations/invitations/".concat(e,"/")),fetchProgress:e=>o.get("/api/service/evaluations/evaluations/?project=".concat(e,"&status=in_progress")),validateAccessKey:e=>o.get("/api/service/evaluations/invitations/by_token/?token=".concat(e))},v={save:e=>o.post("/api/service/analysis/calculate/individual/",e),fetchIndividual:e=>o.get("/api/service/analysis/project-summary/?project_id=".concat(e)),calculateGroup:e=>o.post("/api/service/analysis/calculate/group/",e),fetchProject:e=>o.get("/api/service/analysis/project-summary/?project_id=".concat(e)),sensitivityAnalysis:e=>o.post("/api/service/analysis/sensitivity/",e)},h={fetch:()=>o.get("/api/service/projects/projects/"),fetchById:e=>o.get("/api/service/projects/projects/".concat(e,"/")),create:e=>o.post("/api/service/projects/projects/",e),update:(e,t)=>o.patch("/api/service/projects/projects/".concat(e,"/"),t),delete:e=>o.delete("/api/service/projects/projects/".concat(e,"/"))},g={fetch:e=>o.get("/api/service/projects/criteria/?project=".concat(e)),create:e=>o.post("/api/service/projects/criteria/",e),update:(e,t)=>o.patch("/api/service/projects/criteria/".concat(e,"/"),t),delete:e=>o.delete("/api/service/projects/criteria/".concat(e,"/"))},f={fetch:e=>o.get("/api/service/projects/criteria/?project=".concat(e,"&type=alternative")),create:e=>o.post("/api/service/projects/criteria/",(0,a.A)((0,a.A)({},e),{},{type:"alternative"})),update:(e,t)=>o.patch("/api/service/projects/criteria/".concat(e,"/"),t),delete:e=>o.delete("/api/service/projects/criteria/".concat(e,"/"))},y={get:o.get.bind(o),post:o.post.bind(o),put:o.put.bind(o),delete:o.delete.bind(o),patch:o.patch.bind(o),authAPI:n,directEvaluationAPI:p,pairwiseEvaluationAPI:u,ahpCalculationAPI:l,evaluatorAPI:d,resultsAPI:v,projectAPI:h,criteriaAPI:g,alternativesAPI:f,apiHelpers:{generateMatrixKey:(e,t)=>"criteria"===e?"C:".concat(t||"root"):"A:".concat(t),generateTargetKey:(e,t,r)=>"criterion"===e?"criterion:".concat(t):"alternative:".concat(t,"@criterion:").concat(r),extractErrorMessage:e=>e.error?e.error:"Unknown error occurred",extractSuccessMessage:e=>e.message?e.message:"Operation completed successfully"}}}}]);
//# sourceMappingURL=304.1492b173.chunk.js.map